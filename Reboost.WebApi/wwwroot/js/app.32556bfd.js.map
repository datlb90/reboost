{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7e02","webpack:///./src/App.vue?b8f3","webpack:///./src/App.vue?bff9","webpack:///./src/views/Home.vue?e9a6","webpack:///./src/components/HelloWorld.vue?b92c","webpack:///src/components/HelloWorld.vue","webpack:///./src/components/HelloWorld.vue?4efa","webpack:///./src/components/HelloWorld.vue?f177","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?493c","webpack:///./src/views/Home.vue","webpack:///./src/views/Document.vue?df47","webpack:///./src/pdfjs/utils/abstractFunction.js","webpack:///./src/pdfjs/UI/utils.js","webpack:///./src/pdfjs/UI/event.js","webpack:///./src/pdfjs/adapter/StoreAdapter.js","webpack:///./src/pdfjs/utils/uuid.js","webpack:///./src/pdfjs/adapter/LocalStoreAdapter.js","webpack:///./src/pdfjs/utils/setAttributes.js","webpack:///./src/pdfjs/utils/normalizeColor.js","webpack:///./src/pdfjs/render/renderLine.js","webpack:///./src/pdfjs/render/renderPath.js","webpack:///./src/pdfjs/render/renderPoint.js","webpack:///./src/pdfjs/render/renderRect.js","webpack:///./src/pdfjs/render/renderText.js","webpack:///./src/pdfjs/render/appendChild.js","webpack:///./src/pdfjs/a11y/createScreenReaderOnly.js","webpack:///./src/pdfjs/a11y/insertElementWithinElement.js","webpack:///./src/pdfjs/a11y/insertElementWithinChildren.js","webpack:///./src/pdfjs/a11y/insertScreenReaderComment.js","webpack:///./src/pdfjs/a11y/renderScreenReaderComments.js","webpack:///./src/pdfjs/a11y/insertScreenReaderHint.js","webpack:///./src/pdfjs/a11y/initEventHandlers.js","webpack:///./src/pdfjs/a11y/renderScreenReaderHints.js","webpack:///./src/pdfjs/render/index.js","webpack:///./src/pdfjs/UI/edit.js","webpack:///./src/pdfjs/UI/pen.js","webpack:///./src/pdfjs/UI/point.js","webpack:///./src/pdfjs/UI/rect.js","webpack:///./src/pdfjs/UI/text.js","webpack:///./src/pdfjs/UI/page.js","webpack:///./src/pdfjs/UI/select.js","webpack:///./src/pdfjs/UI/index.js","webpack:///./src/pdfjs/PDFJSAnnotate.js","webpack:///./src/pdfjs/shared/initColorPicker.js","webpack:///src/views/Document.vue","webpack:///./src/views/Document.vue?7864","webpack:///./src/views/Document.vue","webpack:///./src/views/Test.vue?fa49","webpack:///./src/utils/url.js","webpack:///./src/utils/axios.js","webpack:///src/views/Test.vue","webpack:///./src/views/Test.vue?cb68","webpack:///./src/views/Test.vue?0b36","webpack:///./src/router/index.js","webpack:///./src/store/index.js","webpack:///./src/main.js","webpack:///./src/components/HelloWorld.vue?cd76","webpack:///./node_modules/lazy-debug-legacy/src sync","webpack:///./src/views/Test.vue?71ec","webpack:///./src/assets/logo.png"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","jsonpScriptSrc","p","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","_v","staticRenderFns","component","staticClass","_s","msg","_m","style","width","viewerWidth","documentId","staticStyle","slot","model","callback","$$v","newComment","expression","replace","on","$event","addCommentText","cancelCommentText","_l","comment","idx","uuid","top","topPosition","deleteCommentCard","displayEditComment","directives","rawName","isSelected","content","ref","refInFor","$set","editCommentCard","HighlightText","StrikethroughText","CommentText","abstractFunction","BORDER_COLOR","userSelectStyleSheet","createStyleSheet","body","findSVGContainer","node","parentNode","nodeName","toUpperCase","getAttribute","findSVGAtPoint","x","y","elements","querySelectorAll","el","rect","getBoundingClientRect","pointIntersectsRect","findAnnotationAtPoint","svg","getOffsetAnnotationRect","bottom","left","right","getAnnotationRect","getOffset","offsetLeft","offsetTop","h","w","LINE_OFFSET","toLowerCase","minX","maxX","minY","maxY","split","forEach","map","parseInt","height","includes","scaleUp","getMetadata","viewport","keys","scale","scaleDown","disableUserSelect","enableUserSelect","removeChild","pageNumber","JSON","parse","clickNode","emitter","EventEmitter","fireEvent","emit","arguments","addEventListener","removeEventListener","removeListener","clientX","clientY","StoreAdapter","definition","annotationId","annotation","annotations","selectedText","topPos","commentId","__getAnnotations","fn","then","a","__addAnnotation","__editAnnotation","__deleteAnnotation","success","__addComment","__deleteComment","REGEXP","PATTERN","replacement","Math","random","v","toString","LocalStoreAdapter","getAnnotations","filter","page","class","getAnnotation","findAnnotation","addAnnotation","updateAnnotations","editAnnotation","deleteAnnotation","index","getComments","addComment","text","updateComments","comments","thisComment","item","deleteComment","localStorage","getItem","setItem","stringify","UPPER_REGEX","BLACKLIST","keyCase","indexOf","match","setAttributes","attributes","REGEX_HASHLESS_HEX","normalizeColor","color","test","renderLine","group","createElementNS","stroke","strokeWidth","rectangles","line","x1","y1","x2","y2","renderPath","path","lines","p1","p2","join","fill","SIZE","D","renderPoint","outerSVG","innerSVG","viewBox","renderRect","order","otherGroups","groupsArr","Array","max","fillOpacity","pageNum","pageHeight","createRect","renderText","size","fontSize","innerHTML","isFirefox","navigator","userAgent","getTranslation","rotation","transform","trans","querySelector","objectAssign","child","wrapperNode","findWrapperNode","before","isArrayInArray","arr","childArr","isWrapped","arrString","rects","childNodes","wrapperRects","wrapper","rectsY","wrapperChildRects","wrapperY","rectX","rectWidth","wrapperX","wrapperWidth","createScreenReaderOnly","createTextNode","position","overflow","insertElementWithinElement","insertBefore","OFFSET_ADJUST","textLayerElementFromPoint","temp","cloneNode","tail","unshift","pop","outerHTML","insertElementWithinChildren","nodes","textLayer","textRect","insertScreenReaderComment","list","renderScreenReaderComments","isArray","PDFJSAnnotate","getStoreAdapter","getElementById","COMMENT_TYPES","insertScreenReaderHint","num","first","last","initEventHandlers","reorderAnnotationsByType","removeAnnotation","insertComment","removeComment","renderScreenReaderHints","removeElementById","elementId","SORT_TYPES","sortBy","sort","sortByPoint","b","sortByRectPoint","sortByLinePoint","lineA","lineB","render","removeAttribute","overlay","dragOffsetX","dragOffsetY","dragStartX","dragStartY","_enabled","isDragging","OVERLAY_BORDER_SIZE","createEditOverlay","destroyEditOverlay","anchor","id","styleLeft","styleTop","boxSizing","border","borderRadius","background","padding","textAlign","textDecoration","handleDocumentClick","handleDocumentKeyup","handleDocumentMousedown","borderColor","boxShadow","display","handleDocumentMousemove","handleDocumentMouseup","keyCode","cursor","offsetHeight","offsetWidth","getDelta","propX","propY","calcDelta","deltaX","deltaY","modelY","viewY","modelX","viewX","originX","originY","handleAnnotationClick","enableEdit","disableEdit","_penSize","_penColor","savePoint","point","setPen","penSize","penColor","enablePen","disablePen","input","handleInputBlur","handleInputKeyup","focus","closeInput","trim","assign","enablePoint","disablePoint","_type","getSelectionRects","selection","getSelection","range","getRangeAt","getClientRects","saveRect","removeAllRanges","boundingRect","offset","enableRect","disableRect","_textSize","_textColor","saveText","setText","textSize","textColor","enableText","disableText","PAGE_TEMPLATE","createPage","children","canvas","mozOpaque","renderPage","renderOptions","async","pdfDocument","rotate","getPage","pdfPage","canvasContext","getContext","alpha","getViewport","scalePage","getTextContent","normalizeWhitespace","textContent","textLayerFactory","DefaultTextLayerFactory","textLayerBuilder","createTextLayerBuilder","setTextContent","log","context","outputScale","getOutputScale","scaled","sx","sy","sfx","approximateFraction","sfy","visibility","roundToDivide","floor","xinv","limit","x_","q","ctx","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","pixelRatio","div","round","_rects","_svg","_target","_annotation","_selectedText","_inputHeight","_order","classList","contains","parentElement","textTool","newCommentWrapper","validTarget","hasAParentWithClass","unselectHighlightComment","element","className","posX","posY","highlightText","removeMinHeigthRects","substring","hideTextToolBar","min","updateCommentPositions","commentCards","commentHighlights","highlightArr","compareTopAttributes","findIndex","dataset","pdfAnnotateId","hasEnoughSpace","rectTop","svgHeight","svgPageNum","svgTop","endPos","moveDownFromEndPos","moveUpFromTopPos","upperTop","upperEnd","g","getHighlightByCommentId","gTop","moveDownToTopPos","lowerTop","moveUpToEndPos","updatePositionsAfterCommentAdded","handleCommentCardClick","startIndex","adjTop","adjEnd","previousTop","thisTop","thisEnd","desiredTop","previousEnd","thisCommentId","thisG","thisGTop","thisDesiredTop","top1","top2","order1","order2","firstTopPos","lastEndPos","thisTopPos","thisEndPos","nextTopPos","displayAddNewCommentForm","textArea","newHeight","orderTopPos","isDeleted","remove","commentContent","commentWrapper","commentText","stopPropagation","enableSelect","handleCommentAnnotationClick","restoreCommentPositions","highlightId","highlight","selectedHighlight","getElementsByClassName","selectedComment","highlights","updateCommentAnnotations","thisCard","add","cTop","selected","disableSelect","strikethroughText","__storeAdapter","setStoreAdapter","adapter","UI","COLORS","hex","initColorPicker","onChange","setColor","fireOnChange","closePicker","togglePicker","isPickerOpen","openPicker","picker","createColorOption","margin","onclick","username","form","login","apiCall","logout","weathers","_e","getBaseURL","url","location","href","protocol","host","getBaseApiURL","apiEndpoint","process","config","baseURL","urlUtils","instance","axios","methods","delete","options","post","put","patch","Vue","use","Router","router","base","routes","Home","Document","Test","Vuex","Store","state","mutations","actions","Element","locale","productionTip","store","App","$mount","webpackEmptyContext","req","code"],"mappings":"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A/GA,SA+GA,GACA,qBA5CA,EApEA,SAoEA,KACA,SAYA,GAVA,QACA,KACA,IACA,+BACA,4BADA,cAEA,GAEA,uDAGA,OACA,KACA,IACA,+BACA,4BADA,eAEA,GAGA,6BACA,uCAEA,IACA,qCACA,oCAGA,oEACA,EADA,OAGA,IACA,kCACA,oCAIA,GACA,iBA9DA,EA7CA,WA8CA,oDACA,+DACA,kCAGA,EACA,2EACA,GACA,+BACA,4BADA,iBAEA,WAGA,GACA,sCACA,GACA,YACA,WAtBA,OA0EA,SACA,qCACA,6BAEA,IAvHA,gDAyHA,eAzHA,mBAqIA,EA8CA,EAnLA,kFAmLA,EAnLA,SAmLA,GACA,8BACA,EACA,uCACA,WAlDA,EArIA,SAqIA,KACA,uDACA,KAGA,OAFA,6BAEA,GACA,WACA,iBACA,MACA,YACA,kBACA,MACA,WACA,gBACA,gBACA,iBACA,MAeA,OAXA,GACA,0BAEA,OACA,+BACA,4BADA,aAEA,GAGA,IAEA,GACA,WACA,gBACA,MACA,YACA,iBACA,MACA,WACA,gBACA,gBACA,iBACA,QArDA,OACA,EACA,0EACA,SACA,GACA,EACA,EACA,wEA2DA,SACA,0BACA,4BA9LA,gDAiMA,mBAjMA,WAkMA,WACA,aACA,2DACA,8BACA,4FAGA,gFAGA,+DAEA,cA9MA,WA+MA,WAEA,uCACA,yCACA,0CACA,wBACA,iDAIA,cACA,qGACA,4BACA,MACA,aACA,eACA,WACA,OAEA,KACA,0BACA,wCACA,wBAEA,CACA,0CACA,2CACA,uBACA,2DACA,UACA,4BACA,kBACA,oBAQA,cACA,6BACA,MAEA,iDACA,gDACA,6DACA,0CACA,4BAGA,iDACA,+BACA,wDACA,qDACA,kCACA,sBAGA,+DACA,8DACA,GACA,oCAKA,cACA,kCAEA,aACA,+BAEA,wIACA,mCADA,qCAlEA,uBACA,kCAqEA,6BA5RA,SA4RA,GACA,8CAEA,OACA,+CACA,2BACA,oEACA,YACA,oDACA,8CAEA,iDACA,6EACA,gCAEA,kCAEA,oCACA,0EAGA,yCACA,0CACA,uCACA,MACA,YAEA,4CAIA,2DAMA,GALA,YACA,+CAEA,qDAEA,MAEA,wCAEA,+DACA,YACA,+CACA,qDAEA,mCACA,KAEA,cACA,wCAEA,uBACA,uCACA,MAEA,cACA,wCAEA,uBACA,+CAMA,uBA9VA,SA8VA,GACA,qCACA,4DACA,sCAEA,8BAnWA,gHAoWA,gEACA,6EACA,gCAEA,kCACA,wCAzWA,kCA0WA,kCA1WA,cA0WA,EA1WA,0CA2WA,0CA3WA,iDA6WA,yBA7WA,SA6WA,GA7WA,iIA8WA,qCA9WA,cA8WA,EA9WA,OA+WA,uBACA,yEACA,0DAjXA,kBAmXA,GAnXA,sCAqXA,cArXA,sIAsXA,iCAtXA,gDAwXA,kBAxXA,4IAyXA,iCAzXA,OA0XA,sCACA,4BA3XA,gDA8XA,YA9XA,gGA+XA,4CA/XA,yDAiYA,uBAjYA,gDAmYA,oBAnYA,gDAqYA,eArYA,8GAuYA,6CACA,0DAxYA,kCAyYA,gDACA,gBACA,gBACA,kBACA,IA7YA,cAyYA,EAzYA,yCA8YA,uBA9YA,gDA+YA,+EA/YA,cAgZA,gEAhZA,mCAkZA,yCAlZA,QAmZA,mBAnZA,iDAsZA,YAtZA,sIAwZA,yCAxZA,OA0ZA,8BAEA,gCACA,wBA7ZA,gDA+ZA,cA/ZA,SA+ZA,GA/ZA,4GAgaA,SAhaA,oDAmaA,mCAEA,WACA,iBACA,YAGA,GACA,OACA,QACA,uDACA,QAGA,MAFA,iBACA,cACA,SACA,gBACA,gBACA,cACA,qBAEA,qEAKA,wBA5bA,wDAgcA,wBACA,sDAjcA,EAocA,cApcA,EAocA,aApcA,EAocA,WAEA,kFACA,YACA,6CACA,kBAzcA,mCA2cA,0CACA,kBACA,YACA,wBA9cA,iDAidA,uBAjdA,WAidA,WACA,6CACA,6EACA,gCAQA,GANA,kCAEA,oCACA,qDAEA,sCACA,eAIA,eACA,8EACA,2BACA,2CACA,IACA,MACA,YACA,aACA,QAEA,iBAEA,oCACA,0BAEA,0CACA,CAEA,0FACA,iCAEA,UACA,4CACA,CAEA,mDACA,kCACA,qCACA,+BACA,iEACA,KACA,wCAIA,sFACA,UACA,4CACA,CAEA,iDACA,kCACA,qCACA,+BACA,iEACA,KACA,wCAMA,iCAphBA,yGAqhBA,mFAEA,gBACA,6CACA,0DACA,uBACA,uCAEA,OACA,uCACA,kCA/hBA,gDAkiBA,yBAliBA,WAmiBA,iDACA,6BACA,eACA,8EACA,2BACA,2CAEA,IACA,MACA,YACA,aACA,oEACA,uBACA,mDACA,UACA,+EACA,WACA,yCACA,iDACA,YACA,uBACA,oEACA,6CACA,0DACA,mBACA,gBACA,qBACA,kCACA,iBACA,kBACA,8BAEA,kBACA,SAKA,kBAzkBA,WAykBA,WACA,mBACA,6BACA,6CACA,0DACA,mBACA,uBACA,iDACA,eACA,4BACA,oCACA,eACA,4CAEA,wCAGA,sBACA,wCAIA,8DACA,kBACA,IAEA,mFACA,uBAKA,yBAzmBA,WA0mBA,oEACA,YACA,oDACA,+DACA,YACA,gDAEA,iBAjnBA,SAinBA,OAEA,mCACA,sBAIA,GADA,wCACA,IACA,wBACA,qCACA,+BACA,sBACA,aAGA,MAFA,0CAQA,eAtoBA,SAsoBA,OACA,0DACA,qCAGA,GAFA,+BACA,iEACA,+BACA,CACA,qBAGA,GADA,+BACA,aACA,0CACA,qCACA,wBACA,+BAGA,aAUA,MATA,0DACA,qCAGA,GAFA,+BACA,iEACA,KACA,qBACA,mCASA,iBAvqBA,SAuqBA,OAEA,mCACA,sBAEA,sDACA,qCAIA,GAHA,+BACA,iEAEA,KACA,iCAIA,GAFA,+BAEA,IACA,wBACA,qCAEA,+BACA,sBAEA,aAUA,MATA,0DACA,qCAGA,GAFA,+BACA,iEACA,KACA,iCACA,mCAUA,mBA9sBA,SA8sBA,OAIA,GAFA,kCAEA,yBACA,0CACA,qCACA,wBACA,+BACA,aAGA,MAFA,0CAOA,eA/tBA,SA+tBA,GACA,2BACA,eACA,8EACA,2BACA,2CAEA,IACA,MACA,YACA,aACA,QAGA,+BACA,+EAEA,YACA,SACA,0BACA,0CACA,mCACA,sBACA,iCACA,YACA,SAKA,SAEA,UAEA,qBAjwBA,SAiwBA,KACA,sCACA,+BACA,iEAEA,sCAGA,GAFA,+BACA,iEACA,aACA,gBACA,SAEA,wCACA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","file":"js/app.32556bfd.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"about\":\"about\"}[chunkId]||chunkId) + \".\" + {\"about\":\"91aa75b2\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{attrs:{\"id\":\"nav\"}},[_c('router-link',{attrs:{\"to\":\"/\"}},[_vm._v(\" Home \")]),_vm._v(\" | \"),_c('router-link',{attrs:{\"to\":\"/about\"}},[_vm._v(\" About \")]),_vm._v(\" | \"),_c('router-link',{attrs:{\"to\":\"/test\"}},[_vm._v(\" Test \")]),_vm._v(\" | \"),_c('router-link',{attrs:{\"to\":\"/document\"}},[_vm._v(\" Document \")])],1),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=0bf1301e&\"\nvar script = {}\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('img',{attrs:{\"alt\":\"Vue logo\",\"src\":require(\"../assets/logo.png\")}}),_c('HelloWorld',{attrs:{\"msg\":\"Welcome to Your Vue.js App\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hello\"},[_c('h1',[_vm._v(_vm._s(_vm.msg))]),_vm._m(0),_c('h3',[_vm._v(\"Installed CLI Plugins\")]),_vm._m(1),_c('h3',[_vm._v(\"Essential Links\")]),_vm._m(2),_c('h3',[_vm._v(\"Ecosystem\")]),_vm._m(3)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\" For a guide and recipes on how to configure / customize this project,\"),_c('br'),_vm._v(\" check out the \"),_c('a',{attrs:{\"href\":\"https://cli.vuejs.org\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"vue-cli documentation\")]),_vm._v(\". \")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"babel\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"eslint\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://vuejs.org\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"Core Docs\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://forum.vuejs.org\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"Forum\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://chat.vuejs.org\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"Community Chat\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://twitter.com/vuejs\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"Twitter\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://news.vuejs.org\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"News\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://router.vuejs.org\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"vue-router\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://vuex.vuejs.org\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"vuex\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/vuejs/vue-devtools#vue-devtools\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"vue-devtools\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://vue-loader.vuejs.org\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"vue-loader\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/vuejs/awesome-vue\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"awesome-vue\")])])])}]\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"hello\">\n\t\t<h1>{{ msg }}</h1>\n\t\t<p>\n\t\t\tFor a guide and recipes on how to configure / customize this project,<br>\n\t\t\tcheck out the\n\t\t\t<a href=\"https://cli.vuejs.org\" target=\"_blank\" rel=\"noopener\">vue-cli documentation</a>.\n\t\t</p>\n\t\t<h3>Installed CLI Plugins</h3>\n\t\t<ul>\n\t\t\t<li><a href=\"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel\" target=\"_blank\" rel=\"noopener\">babel</a></li>\n\t\t\t<li><a href=\"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint\" target=\"_blank\" rel=\"noopener\">eslint</a></li>\n\t\t</ul>\n\t\t<h3>Essential Links</h3>\n\t\t<ul>\n\t\t\t<li><a href=\"https://vuejs.org\" target=\"_blank\" rel=\"noopener\">Core Docs</a></li>\n\t\t\t<li><a href=\"https://forum.vuejs.org\" target=\"_blank\" rel=\"noopener\">Forum</a></li>\n\t\t\t<li><a href=\"https://chat.vuejs.org\" target=\"_blank\" rel=\"noopener\">Community Chat</a></li>\n\t\t\t<li><a href=\"https://twitter.com/vuejs\" target=\"_blank\" rel=\"noopener\">Twitter</a></li>\n\t\t\t<li><a href=\"https://news.vuejs.org\" target=\"_blank\" rel=\"noopener\">News</a></li>\n\t\t</ul>\n\t\t<h3>Ecosystem</h3>\n\t\t<ul>\n\t\t\t<li><a href=\"https://router.vuejs.org\" target=\"_blank\" rel=\"noopener\">vue-router</a></li>\n\t\t\t<li><a href=\"https://vuex.vuejs.org\" target=\"_blank\" rel=\"noopener\">vuex</a></li>\n\t\t\t<li><a href=\"https://github.com/vuejs/vue-devtools#vue-devtools\" target=\"_blank\" rel=\"noopener\">vue-devtools</a></li>\n\t\t\t<li><a href=\"https://vue-loader.vuejs.org\" target=\"_blank\" rel=\"noopener\">vue-loader</a></li>\n\t\t\t<li><a href=\"https://github.com/vuejs/awesome-vue\" target=\"_blank\" rel=\"noopener\">awesome-vue</a></li>\n\t\t</ul>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'HelloWorld',\n\tprops: {\n\t\t// eslint-disable-next-line vue/require-default-prop\n\t\tmsg: String\n\t}\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelloWorld.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelloWorld.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HelloWorld.vue?vue&type=template&id=712c49d7&scoped=true&\"\nimport script from \"./HelloWorld.vue?vue&type=script&lang=js&\"\nexport * from \"./HelloWorld.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HelloWorld.vue?vue&type=style&index=0&id=712c49d7&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"712c49d7\",\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div class=\"home\">\n\t\t<img alt=\"Vue logo\" src=\"../assets/logo.png\">\n\t\t<HelloWorld msg=\"Welcome to Your Vue.js App\" />\n\t</div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport HelloWorld from '@/components/HelloWorld.vue';\n\nexport default {\n\tname: 'Home',\n\tcomponents: {\n\t\tHelloWorld\n\t}\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=bb769b06&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._m(0),_vm._m(1),_c('div',{attrs:{\"id\":\"content-wrapper\"}},[_c('div',{staticClass:\"pdfViewer\",style:({ width: _vm.viewerWidth + 'px' }),attrs:{\"id\":\"viewer\",\"document-id\":_vm.documentId}})]),_c('div',{attrs:{\"id\":\"comment-wrapper\"}},[_c('el-card',{staticClass:\"box-card add-new-comment\",staticStyle:{\"width\":\"100%\",\"display\":\"none\"},attrs:{\"id\":\"add-new-comment\"}},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('div',[_c('div',{staticStyle:{\"font-size\":\"15px\",\"font-weight\":\"bold\",\"text-align\":\"left\"}},[_vm._v(\" Dat Le \")])])]),_c('div',[_c('el-input',{attrs:{\"id\":\"comment-text-area\",\"type\":\"textarea\",\"autosize\":\"\",\"placeholder\":\"Add comment\"},model:{value:(_vm.newComment),callback:function ($$v) {_vm.newComment=$$v},expression:\"newComment\"}}),_c('div',{staticStyle:{\"height\":\"20px\",\"margin-top\":\"10px\"}},[_c('el-button',{staticStyle:{\"float\":\"left\",\"padding\":\"5px\"},attrs:{\"type\":\"primary\",\"disabled\":_vm.newComment.replace(/\\s/g, '').length == 0},on:{\"click\":function($event){return _vm.addCommentText()}}},[_vm._v(\" Comment \")]),_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"5px\"},on:{\"click\":function($event){return _vm.cancelCommentText()}}},[_vm._v(\" Cancel \")])],1)],1)]),_vm._l((_vm.comments),function(comment,idx){return _c('el-card',{key:comment.uuid,staticClass:\"box-card comment-card\",style:({top: comment.topPosition + 'px', width: '100%'}),attrs:{\"highlight-id\":comment.uuid,\"top-position\":comment.topPosition}},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('div',[_c('div',{staticStyle:{\"font-size\":\"15px\",\"font-weight\":\"bold\",\"text-align\":\"left\"}},[_vm._v(\" Dat Le \")]),_c('div',{staticStyle:{\"font-size\":\"12px\",\"text-align\":\"left\"}},[_vm._v(\" 3:16 PM Jul 7 \")])]),_c('el-button',{staticClass:\"action-card-btn\",staticStyle:{\"right\":\"-10px\"},attrs:{\"title\":\"Delete Comment\"},on:{\"click\":function($event){return _vm.deleteCommentCard(comment)}}},[_c('i',{staticClass:\"far fa-trash-alt\"})]),_c('el-button',{staticClass:\"action-card-btn\",staticStyle:{\"right\":\"10px\"},attrs:{\"title\":\"Edit Comment\"},on:{\"click\":function($event){return _vm.displayEditComment(comment, idx)}}},[_c('i',{staticClass:\"far fa-edit\"})])],1),_c('div',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!comment.isSelected),expression:\"!comment.isSelected\"}],staticStyle:{\"text-align\":\"left\",\"overflow-wrap\":\"break-word\",\"white-space\":\"pre-wrap\"},attrs:{\"id\":'comment-text-' + comment.uuid}},[_vm._v(\" \"+_vm._s(comment.content)+\" \")]),_c('el-input',{directives:[{name:\"show\",rawName:\"v-show\",value:(comment.isSelected == true),expression:\"comment.isSelected == true\"}],ref:'comment' + comment.uuid,refInFor:true,attrs:{\"id\":'comment-input-' + comment.uuid,\"type\":\"textarea\",\"autosize\":\"\"},model:{value:(comment.content),callback:function ($$v) {_vm.$set(comment, \"content\", $$v)},expression:\"comment.content\"}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(comment.isSelected == true),expression:\"comment.isSelected == true\"}],staticStyle:{\"height\":\"20px\",\"margin-top\":\"10px\"}},[_c('el-button',{staticStyle:{\"float\":\"left\",\"padding\":\"5px\"},attrs:{\"type\":\"primary\",\"disabled\":comment.content.replace(/\\s/g, '').length == 0},on:{\"click\":function($event){return _vm.editCommentCard()}}},[_vm._v(\" Comment \")]),_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"5px\"},on:{\"click\":function($event){return _vm.cancelCommentText()}}},[_vm._v(\" Cancel \")])],1)],1)])})],2),_c('el-button-group',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"textTool\"}},[_c('el-button',{staticClass:\"textToolBtn\",on:{\"click\":function($event){return _vm.HighlightText()}}},[_c('i',{staticClass:\"fas fa-highlighter\"})]),_c('el-button',{staticClass:\"textToolBtn\",on:{\"click\":function($event){return _vm.StrikethroughText()}}},[_c('i',{staticClass:\"fas fa-strikethrough\"})]),_c('el-button',{staticClass:\"textToolBtn\",attrs:{\"id\":\"comment-text\"},on:{\"click\":function($event){return _vm.CommentText()}}},[_c('i',{staticClass:\"fas fa-comment-alt\"})])],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"toolbar\"},[_c('button',{staticClass:\"cursor\",attrs:{\"type\":\"button\",\"title\":\"Cursor\",\"data-tooltype\":\"cursor\"}},[_vm._v(\" ➚ \")]),_c('div',{staticClass:\"spacer\"}),_c('button',{staticClass:\"rectangle\",attrs:{\"type\":\"button\",\"title\":\"Rectangle\",\"data-tooltype\":\"area\"}}),_c('button',{staticClass:\"highlight\",attrs:{\"type\":\"button\",\"title\":\"Highlight\",\"data-tooltype\":\"highlight\"}}),_c('button',{staticClass:\"strikeout\",attrs:{\"type\":\"button\",\"title\":\"Strikeout\",\"data-tooltype\":\"strikeout\"}}),_c('div',{staticClass:\"spacer\"}),_c('button',{staticClass:\"text\",attrs:{\"type\":\"button\",\"title\":\"Text Tool\",\"data-tooltype\":\"text\"}}),_c('select',{staticClass:\"text-size\"}),_c('div',{staticClass:\"text-color\"}),_c('div',{staticClass:\"spacer\"}),_c('div',{staticClass:\"spacer\"}),_c('button',{staticClass:\"comment\",attrs:{\"type\":\"button\",\"title\":\"Comment\",\"data-tooltype\":\"point\"}},[_vm._v(\" 🗨 \")]),_c('div',{staticClass:\"spacer\"}),_c('select',{staticClass:\"scale\"},[_c('option',{attrs:{\"value\":\".5\"}},[_vm._v(\" 50% \")]),_c('option',{attrs:{\"value\":\"1\"}},[_vm._v(\" 100% \")]),_c('option',{attrs:{\"value\":\"1.33\"}},[_vm._v(\" 133% \")]),_c('option',{attrs:{\"value\":\"1.5\"}},[_vm._v(\" 150% \")]),_c('option',{attrs:{\"value\":\"2\"}},[_vm._v(\" 200% \")])]),_c('a',{staticClass:\"rotate-ccw\",attrs:{\"href\":\"javascript://\",\"title\":\"Rotate Counter Clockwise\"}},[_vm._v(\"⟲\")]),_c('a',{staticClass:\"rotate-cw\",attrs:{\"href\":\"javascript://\",\"title\":\"Rotate Clockwise\"}},[_vm._v(\"⟳\")]),_c('div',{staticClass:\"spacer\"}),_c('a',{staticClass:\"clear\",attrs:{\"href\":\"javascript://\",\"title\":\"Clear\"}},[_vm._v(\"×\")]),_c('button',{attrs:{\"id\":\"restore\",\"title\":\"Restore\"}},[_vm._v(\" Restore \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"rubric-wrapper\"}},[_c('h4',[_vm._v(\"Rubrics\")])])}]\n\nexport { render, staticRenderFns }","/**\n * Throw an Error for an abstract function that hasn't been implemented.\n *\n * @param {String} name The name of the abstract function\n */\nexport default function abstractFunction(name) {\n\tthrow new Error(name + ' is not implemented');\n}\n","/* eslint-disable no-case-declarations */\nimport createStyleSheet from 'create-stylesheet';\n\nexport const BORDER_COLOR = '#00BFFF';\n\nconst userSelectStyleSheet = createStyleSheet({\n\tbody: {\n\t\t'-webkit-user-select': 'none',\n\t\t'-moz-user-select': 'none',\n\t\t'-ms-user-select': 'none',\n\t\t'user-select': 'none'\n\t}\n});\nuserSelectStyleSheet.setAttribute('data-pdf-annotate-user-select', 'true');\n\n/**\n * Find the SVGElement that contains all the annotations for a page\n *\n * @param {Element} node An annotation within that container\n * @return {SVGElement} The container SVG or null if it can't be found\n */\nexport function findSVGContainer(node) {\n\tlet parentNode = node;\n\n\twhile ((parentNode = parentNode.parentNode) &&\n          parentNode !== document) {\n\t\tif (parentNode.nodeName.toUpperCase() === 'SVG' &&\n        parentNode.getAttribute('data-pdf-annotate-container') === 'true') {\n\t\t\treturn parentNode;\n\t\t}\n\t}\n\n\treturn null;\n}\n\n/**\n * Find an SVGElement container at a given point\n *\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n * @return {SVGElement} The container SVG or null if one can't be found\n */\nexport function findSVGAtPoint(x, y) {\n\tlet elements = document.querySelectorAll('svg[data-pdf-annotate-container=\"true\"]');\n\n\tfor (let i=0, l=elements.length; i<l; i++) {\n\t\tlet el = elements[i];\n\t\tlet rect = el.getBoundingClientRect();\n\n\t\tif (pointIntersectsRect(x, y, rect)) {\n\n\t\t\treturn el;\n\t\t}\n\t}\n\n\treturn null;\n}\n\n/**\n * Find an Element that represents an annotation at a given point\n *\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n * @return {Element} The annotation element or null if one can't be found\n */\nexport function findAnnotationAtPoint(x, y) {\n\tlet svg = findSVGAtPoint(x, y);\n\tif (!svg) { return; }\n\tlet elements = svg.querySelectorAll('[data-pdf-annotate-type]');\n\n\t// Find a target element within SVG\n\tfor (let i=0, l=elements.length; i<l; i++) {\n\t\tlet el = elements[i];\n\t\tif (pointIntersectsRect(x, y, getOffsetAnnotationRect(el))) {   \n\t\t\treturn el;\n\t\t}\n\t}\n\n\treturn null;\n}\n\n/**\n * Determine if a point intersects a rect\n *\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n * @param {Object} rect The points of a rect (likely from getBoundingClientRect)\n * @return {Boolean} True if a collision occurs, otherwise false\n */\nexport function pointIntersectsRect(x, y, rect) {\n\treturn y >= rect.top && y <= rect.bottom && x >= rect.left && x <= rect.right;\n}\n\n/**\n * Get the rect of an annotation element accounting for offset.\n *\n * @param {Element} el The element to get the rect of\n * @return {Object} The dimensions of the element\n */\nexport function getOffsetAnnotationRect(el) {\n\tlet rect = getAnnotationRect(el);\n\tlet { offsetLeft, offsetTop } = getOffset(el);\n\treturn {\n\t\ttop: rect.top + offsetTop,\n\t\tleft: rect.left + offsetLeft,\n\t\tright: rect.right + offsetLeft,\n\t\tbottom: rect.bottom + offsetTop\n\t};\n}\n\n/**\n * Get the rect of an annotation element.\n *\n * @param {Element} el The element to get the rect of\n * @return {Object} The dimensions of the element\n */\nexport function getAnnotationRect(el) {\n\tlet h = 0, w = 0, x = 0, y = 0;\n\tlet rect = el.getBoundingClientRect();\n\t// TODO this should be calculated somehow\n\tconst LINE_OFFSET = 16;\n\n\tswitch (el.nodeName.toLowerCase()) {\n\t\tcase 'path':\n\t\t\tlet minX, maxX, minY, maxY;\n\n\t\t\tel.getAttribute('d').replace(/Z/, '').split('M').splice(1).forEach((p) => {\n\t\t\t\tlet s = p.split(' ').map(i => parseInt(i, 10));\n\n\t\t\t\tif (typeof minX === 'undefined' || s[0] < minX) { minX = s[0]; }\n\t\t\t\tif (typeof maxX === 'undefined' || s[2] > maxX) { maxX = s[2]; }\n\t\t\t\tif (typeof minY === 'undefined' || s[1] < minY) { minY = s[1]; }\n\t\t\t\tif (typeof maxY === 'undefined' || s[3] > maxY) { maxY = s[3]; }\n\t\t\t});\n\n\t\t\th = maxY - minY;\n\t\t\tw = maxX - minX;\n\t\t\tx = minX;\n\t\t\ty = minY;\n\t\t\tbreak;\n\n\t\tcase 'line':\n\t\t\th = parseInt(el.getAttribute('y2'), 10) - parseInt(el.getAttribute('y1'), 10);\n\t\t\tw = parseInt(el.getAttribute('x2'), 10) - parseInt(el.getAttribute('x1'), 10);\n\t\t\tx = parseInt(el.getAttribute('x1'), 10);\n\t\t\ty = parseInt(el.getAttribute('y1'), 10);\n\n\t\t\tif (h === 0) {\n\t\t\t\th += LINE_OFFSET;\n\t\t\t\ty -= (LINE_OFFSET / 2);\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase 'text':\n\t\t\th = rect.height;\n\t\t\tw = rect.width;\n\t\t\tx = parseInt(el.getAttribute('x'), 10);\n\t\t\ty = parseInt(el.getAttribute('y'), 10) - h;\n\t\t\tbreak;\n\n\t\tcase 'g':\n\t\t\tlet { offsetLeft, offsetTop } = getOffset(el);\n\t\t\th = rect.height;\n\t\t\tw = rect.width;\n\t\t\tx = rect.left - offsetLeft;\n\t\t\ty = rect.top - offsetTop;\n\n\t\t\tif (el.getAttribute('data-pdf-annotate-type') === 'strikeout') {\n\t\t\t\th += LINE_OFFSET;\n\t\t\t\ty -= (LINE_OFFSET / 2);\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase 'rect':\n\t\tcase 'svg':\n\t\t\th = parseInt(el.getAttribute('height'), 10);\n\t\t\tw = parseInt(el.getAttribute('width'), 10);\n\t\t\tx = parseInt(el.getAttribute('x'), 10);\n\t\t\ty = parseInt(el.getAttribute('y'), 10);\n\t\t\tbreak;\n\t}\n\n\t// Result provides same properties as getBoundingClientRect\n\tlet result = {\n\t\ttop: y,\n\t\tleft: x,\n\t\twidth: w,\n\t\theight: h,\n\t\tright: x + w,\n\t\tbottom: y + h\n\t};\n\n\t// For the case of nested SVG (point annotations) and grouped\n\t// lines or rects no adjustment needs to be made for scale.\n\t// I assume that the scale is already being handled\n\t// natively by virtue of the `transform` attribute.\n\tif (!['svg', 'g'].includes(el.nodeName.toLowerCase())) {\n\t\tresult = scaleUp(findSVGAtPoint(rect.left, rect.top), result);\n\t}\n\n\treturn result;\n}\n\n/**\n * Adjust scale from normalized scale (100%) to rendered scale.\n *\n * @param {SVGElement} svg The SVG to gather metadata from\n * @param {Object} rect A map of numeric values to scale\n * @return {Object} A copy of `rect` with values scaled up\n */\nexport function scaleUp(svg, rect) {\n\tlet result = {};\n\tlet { viewport } = getMetadata(svg);\n\n\tObject.keys(rect).forEach((key) => {\n\t\tresult[key] = rect[key] * viewport.scale;\n\t});\n\n\treturn result;\n}\n\n/**\n * Adjust scale from rendered scale to a normalized scale (100%).\n *\n * @param {SVGElement} svg The SVG to gather metadata from\n * @param {Object} rect A map of numeric values to scale\n * @return {Object} A copy of `rect` with values scaled down\n */\nexport function scaleDown(svg, rect) {\n\tlet result = {};\n\tlet { viewport } = getMetadata(svg);\n\n\tObject.keys(rect).forEach((key) => {\n\t\tresult[key] = rect[key] / viewport.scale;\n\t});\n\n\treturn result;\n}\n\n/**\n * Get the scroll position of an element, accounting for parent elements\n *\n * @param {Element} el The element to get the scroll position for\n * @return {Object} The scrollTop and scrollLeft position\n */\nexport function getScroll(el) {\n\tlet scrollTop = 0;\n\tlet scrollLeft = 0;\n\tlet parentNode = el;\n\n\twhile ((parentNode = parentNode.parentNode) &&\n          parentNode !== document) {\n\t\tscrollTop += parentNode.scrollTop;\n\t\tscrollLeft += parentNode.scrollLeft;\n\t}\n\n\treturn { scrollTop, scrollLeft };\n}\n\n/**\n * Get the offset position of an element, accounting for parent elements\n *\n * @param {Element} el The element to get the offset position for\n * @return {Object} The offsetTop and offsetLeft position\n */\nexport function getOffset(el) {\n\tlet parentNode = el;\n\n\twhile ((parentNode = parentNode.parentNode) &&\n          parentNode !== document) {\n\t\tif (parentNode.nodeName.toUpperCase() === 'SVG') {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tlet rect = parentNode.getBoundingClientRect();\n\n\treturn { offsetLeft: rect.left, offsetTop: rect.top };\n}\n\n/**\n * Disable user ability to select text on page\n */\nexport function disableUserSelect() {\n\tif (!userSelectStyleSheet.parentNode) {\n\t\tdocument.head.appendChild(userSelectStyleSheet);\n\t}\n}\n\n\n/**\n * Enable user ability to select text on page\n */\nexport function enableUserSelect() {\n\tif (userSelectStyleSheet.parentNode) {\n\t\tuserSelectStyleSheet.parentNode.removeChild(userSelectStyleSheet);\n\t}\n}\n\n/**\n * Get the metadata for a SVG container\n *\n * @param {SVGElement} svg The SVG container to get metadata for\n */\nexport function getMetadata(svg) {\n\treturn {\n\t\tdocumentId: svg.getAttribute('data-pdf-annotate-document'),\n\t\tpageNumber: parseInt(svg.getAttribute('data-pdf-annotate-page'), 10),\n\t\tviewport: JSON.parse(svg.getAttribute('data-pdf-annotate-viewport'))\n\t};\n}\n","import EventEmitter from 'events';\nimport {\n\tfindAnnotationAtPoint,\n\tfindSVGAtPoint\n} from './utils';\n\nconst emitter = new EventEmitter;\n\nlet clickNode;\n\n/**\n * Handle document.click event\n *\n * @param {Event} e The DOM event to be handled\n */\ndocument.addEventListener('click', function handleDocumentClick(e) {\n\tif (!findSVGAtPoint(e.clientX, e.clientY)) { return; }\n\n\tlet target = findAnnotationAtPoint(e.clientX, e.clientY);\n\n\t// Emit annotation:blur if clickNode is no longer clicked\n\tif (clickNode && clickNode !== target) {\n\t\temitter.emit('annotation:blur', clickNode);\n\t}\n\n\t// Emit annotation:click if target was clicked\n\tif (target) {\n\t\temitter.emit('annotation:click', target);\n\t}\n\n\tclickNode = target;\n});\n\n// let mouseOverNode;\n// document.addEventListener('mousemove', function handleDocumentMousemove(e) {\n//   let target = findAnnotationAtPoint(e.clientX, e.clientY);\n//\n//   // Emit annotation:mouseout if target was mouseout'd\n//   if (mouseOverNode && !target) {\n//     emitter.emit('annotation:mouseout', mouseOverNode);\n//   }\n//\n//   // Emit annotation:mouseover if target was mouseover'd\n//   if (target && mouseOverNode !== target) {\n//     emitter.emit('annotation:mouseover', target);\n//   }\n//\n//   mouseOverNode = target;\n// });\n\nexport function fireEvent() { emitter.emit(...arguments); }\nexport function addEventListener() { emitter.on(...arguments); }\nexport function removeEventListener() { emitter.removeListener(...arguments); }\n","/* eslint-disable no-unused-vars */\nimport abstractFunction from '../utils/abstractFunction';\nimport { fireEvent } from '../UI/event';\n\n// Adapter should never be invoked publicly\nexport default class StoreAdapter {\n\t/**\n   * Create a new StoreAdapter instance\n   *\n   * @param {Object} [definition] The definition to use for overriding abstract methods\n   */\n\tconstructor(definition = {}) {\n\t\t// Copy each function from definition if it is a function we know about\n\t\tObject.keys(definition).forEach((key) => {\n\t\t\tif (typeof definition[key] === 'function' &&\n          typeof this[key] === 'function') {\n\t\t\t\tthis[key] = definition[key];\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n   * Get all the annotations for a given document and page number.\n   *\n   * @param {String} documentId The ID for the document the annotations belong to\n   * @param {Number} pageNumber The number of the page the annotations belong to\n   * @return {Promise}\n   */\n\t__getAnnotations(documentId, pageNumber) { abstractFunction('getAnnotations'); }\n\tget getAnnotations() { return this.__getAnnotations; }\n\tset getAnnotations(fn) {\n\t\tthis.__getAnnotations = function getAnnotations(documentId, pageNumber) {\n\t\t\treturn fn(...arguments).then((annotations) => {\n\t\t\t\t// TODO may be best to have this happen on the server\n\t\t\t\tif (annotations.annotations) {\n\t\t\t\t\tannotations.annotations.forEach((a) => {\n\t\t\t\t\t\ta.documentId = documentId;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn annotations;\n\t\t\t});\n\t\t};\n\t}\n\n\t/**\n   * Get the definition for a specific annotation.\n   *\n   * @param {String} documentId The ID for the document the annotation belongs to\n   * @param {String} annotationId The ID for the annotation\n   * @return {Promise}\n   */\n\tgetAnnotation(documentId, annotationId) { abstractFunction('getAnnotation'); }\n\n\t/**\n   * Add an annotation\n   *\n   * @param {String} documentId The ID for the document to add the annotation to\n   * @param {String} pageNumber The page number to add the annotation to\n   * @param {Object} annotation The definition for the new annotation\n   * @return {Promise}\n   */\n\t__addAnnotation(documentId, pageNumber, annotation) { abstractFunction('addAnnotation'); }\n\tget addAnnotation() { return this.__addAnnotation; }\n\tset addAnnotation(fn) {\n\t\tthis.__addAnnotation = function addAnnotation(documentId, pageNumber, annotation) {\n\t\t\treturn fn(...arguments).then((annotation) => {\n\t\t\t\tfireEvent('annotation:add', documentId, pageNumber, annotation);\n\t\t\t\treturn annotation;\n\t\t\t});\n\t\t};\n\t}\n\n\t/**\n   * Edit an annotation\n   *\n   * @param {String} documentId The ID for the document\n   * @param {String} pageNumber the page number of the annotation\n   * @param {Object} annotation The definition of the modified annotation\n   * @return {Promise}\n   */\n\t__editAnnotation(documentId, pageNumber, annotation) { abstractFunction('editAnnotation'); }\n\tget editAnnotation() { return this.__editAnnotation; }\n\tset editAnnotation(fn) {\n\t\tthis.__editAnnotation = function editAnnotation(documentId, annotationId, annotation) {\n\t\t\treturn fn(...arguments).then((annotation) => {\n\t\t\t\tfireEvent('annotation:edit', documentId, annotationId, annotation);\n\t\t\t\treturn annotation;\n\t\t\t});\n\t\t};\n\t}\n\n\t/**\n   * Delete an annotation\n   *\n   * @param {String} documentId The ID for the document\n   * @param {String} annotationId The ID for the annotation\n   * @return {Promise}\n   */\n\t__deleteAnnotation(documentId, annotationId) { abstractFunction('deleteAnnotation'); }\n\tget deleteAnnotation() { return this.__deleteAnnotation; }\n\tset deleteAnnotation(fn) {\n\t\tthis.__deleteAnnotation = function deleteAnnotation(documentId, annotationId) {\n\t\t\treturn fn(...arguments).then((success) => {\n\t\t\t\tif (success) {\n\t\t\t\t\tfireEvent('annotation:delete', documentId, annotationId);\n\t\t\t\t}\n\t\t\t\treturn success;\n\t\t\t});\n\t\t};\n\t}\n\n\t/**\n   * Get all the comments for an annotation\n   *\n   * @param {String} documentId The ID for the document\n   * @param {String} annotationId The ID for the annotation\n   * @return {Promise}\n   */\n\tgetComments(documentId, annotationId) { abstractFunction('getComments'); }\n  \n\tupdateComments(documentId, annotations){abstractFunction('updateComments');}\n\t/**\n   * Add a new comment\n   *\n   * @param {String} documentId The ID for the document\n   * @param {String} annotationId The ID for the annotation\n   * @param {Object} content The definition of the comment\n   * @return {Promise}\n   */\n\t__addComment(documentId, annotation, content, selectedText, topPos) { abstractFunction('addComment'); }\n\tget addComment() { return this.__addComment; }\n\tset addComment(fn) {\n\t\tthis.__addComment = function addComment(documentId, annotation, content, selectedText, topPos) {\n\t\t\treturn fn(...arguments).then((comment) => {\n\t\t\t\tfireEvent('comment:add', documentId, annotation.uuid, comment);\n\t\t\t\treturn comment;\n\t\t\t});\n\t\t};\n\t}\n\n\t/**\n   * Delete a comment\n   *\n   * @param {String} documentId The ID for the document\n   * @param {String} commentId The ID for the comment\n   * @return {Promise}\n   */\n\t__deleteComment(documentId, commentId) { abstractFunction('deleteComment'); }\n\tget deleteComment() { return this.__deleteComment; }\n\tset deleteComment(fn) {\n\t\tthis.__deleteComment = function deleteComment(documentId, commentId) {\n\t\t\treturn fn(...arguments).then((success) => {\n\t\t\t\tif (success) {\n\t\t\t\t\tfireEvent('comment:delete', documentId, commentId);\n\t\t\t\t}\n\t\t\t\treturn success;\n\t\t\t});\n\t\t};\n\t}\n}\n","const REGEXP = /[xy]/g;\nconst PATTERN = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';\n\nfunction replacement(c) {\n\tlet r = Math.random()*16|0;\n\tlet v = c == 'x' ? r : (r&0x3|0x8);\n\treturn v.toString(16);\n}\n\n/**\n * Generate a univierally unique identifier\n *\n * @return {String}\n */\nexport default function uuid() {\n\treturn PATTERN.replace(REGEXP, replacement);\n}\n","/* eslint-disable no-unused-vars */\nimport uuid from '../utils/uuid';\nimport StoreAdapter from './StoreAdapter';\n\n// StoreAdapter for working with localStorage\n// This is ideal for testing, examples, and prototyping\nexport default class LocalStoreAdapter extends StoreAdapter {\n\tconstructor() {\n\t\tsuper({\n\t\t\tgetAnnotations(documentId, pageNumber) {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tlet annotations = getAnnotations(documentId).filter((i) => {\n\t\t\t\t\t\treturn i.page === pageNumber && i.class === 'Annotation';\n\t\t\t\t\t});\n\n\t\t\t\t\tresolve({\n\t\t\t\t\t\tdocumentId,\n\t\t\t\t\t\tpageNumber,\n\t\t\t\t\t\tannotations\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tgetAnnotation(documentId, annotationId) {\n\t\t\t\treturn Promise.resolve(getAnnotations(documentId)[findAnnotation(documentId, annotationId)]);\n\t\t\t},\n\n\t\t\taddAnnotation(documentId, pageNumber, annotation) {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tannotation.class = 'Annotation';\n\t\t\t\t\tannotation.uuid = uuid();\n\t\t\t\t\tannotation.page = pageNumber;\n\n\t\t\t\t\tlet annotations = getAnnotations(documentId);\n\t\t\t\t\tannotations.push(annotation);\n\t\t\t\t\tupdateAnnotations(documentId, annotations);\n\n\t\t\t\t\tresolve(annotation);\n\t\t\t\t});\n\t\t\t},\n\n\t\t\teditAnnotation(documentId, annotationId, annotation) {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tlet annotations = getAnnotations(documentId);\n\t\t\t\t\tannotations[findAnnotation(documentId, annotationId)] = annotation;\n\t\t\t\t\tupdateAnnotations(documentId, annotations);\n\n\t\t\t\t\tresolve(annotation);\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tdeleteAnnotation(documentId, annotationId) {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tlet index = findAnnotation(documentId, annotationId);\n\t\t\t\t\tif (index > -1) {\n\t\t\t\t\t\tlet annotations = getAnnotations(documentId);\n\t\t\t\t\t\tannotations.splice(index, 1);\n\t\t\t\t\t\tupdateAnnotations(documentId, annotations);\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve(true);\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tgetComments(documentId) {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tresolve(getAnnotations(documentId).filter((i) => {\n\t\t\t\t\t\treturn i.class === 'Comment';\n\t\t\t\t\t}));\n\t\t\t\t});\n\t\t\t},\n\n\t\t\taddComment(documentId, annotation, content, selectedText, topPos) {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tlet comment = {\n\t\t\t\t\t\tclass: 'Comment',\n\t\t\t\t\t\tuuid: annotation.uuid,\n\t\t\t\t\t\tannotation: annotation,\n\t\t\t\t\t\tcontent: content,\n\t\t\t\t\t\ttext: selectedText,\n\t\t\t\t\t\ttopPosition: topPos\n\t\t\t\t\t};\n\n\t\t\t\t\tlet annotations = getAnnotations(documentId);\n\t\t\t\t\tannotations.push(comment);\n\t\t\t\t\tupdateAnnotations(documentId, annotations);\n\n\t\t\t\t\tresolve(comment);\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tupdateComments(documentId, comments){\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tlet annotations = getAnnotations(documentId);\n\t\t\t\t\tfor (let i=0, l=annotations.length; i<l; i++) {\n\t\t\t\t\t\tif(annotations[i].class == 'Comment'){\n\t\t\t\t\t\t\tlet thisComment = comments.filter(item => {return (item.uuid == annotations[i].uuid);});\n\t\t\t\t\t\t\tif(thisComment && thisComment.length > 0)\n\t\t\t\t\t\t\t\tannotations[i] = thisComment[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tupdateAnnotations(documentId, annotations);\n\t\t\t\t\tresolve(true);\n\t\t\t\t});\n        \n\t\t\t},\n\t\t\tdeleteComment(documentId, commentId) {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tgetAnnotations(documentId);\n\t\t\t\t\tlet index = -1;\n\t\t\t\t\tlet annotations = getAnnotations(documentId);\n\t\t\t\t\tfor (let i=0, l=annotations.length; i<l; i++) {\n\t\t\t\t\t\tif (annotations[i].uuid === commentId) {\n\t\t\t\t\t\t\tindex = i;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (index > -1) {\n\t\t\t\t\t\tannotations.splice(index, 1);\n\t\t\t\t\t\tupdateAnnotations(documentId, annotations);\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve(true);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction getAnnotations(documentId) {\n\treturn JSON.parse(localStorage.getItem(`${documentId}/annotations`)) || [];\n}\n\nfunction updateAnnotations(documentId, annotations) {\n\tlocalStorage.setItem(`${documentId}/annotations`, JSON.stringify(annotations));\n}\n\nfunction findAnnotation(documentId, annotationId) {\n\tlet index = -1;\n\tlet annotations = getAnnotations(documentId);\n\tfor (let i=0, l=annotations.length; i<l; i++) {\n\t\tif (annotations[i].uuid === annotationId) {\n\t\t\tindex = i;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn index;\n}\n","const UPPER_REGEX = /[A-Z]/g;\n\n// Don't convert these attributes from camelCase to hyphenated-attributes\nconst BLACKLIST = [\n\t'viewBox'\n];\n\nlet keyCase = (key) => {\n\tif (BLACKLIST.indexOf(key) === -1) {\n\t\tkey = key.replace(UPPER_REGEX, match => '-' + match.toLowerCase());\n\t}\n\treturn key;\n};\n\n/**\n * Set attributes for a node from a map\n *\n * @param {Node} node The node to set attributes on\n * @param {Object} attributes The map of key/value pairs to use for attributes\n */\nexport default function setAttributes(node, attributes) {\n\tObject.keys(attributes).forEach((key) => {\n\t\tnode.setAttribute(keyCase(key), attributes[key]);\n\t});\n}\n","const REGEX_HASHLESS_HEX = /^([a-f0-9]{6}|[a-f0-9]{3})$/i;\n\n/**\n * Normalize a color value\n *\n * @param {String} color The color to normalize\n * @return {String}\n */\nexport default function normalizeColor(color) {\n\tif (REGEX_HASHLESS_HEX.test(color)) {\n\t\tcolor = `#${color}`;\n\t}\n\treturn color;\n}\n","import setAttributes from '../utils/setAttributes';\nimport normalizeColor from '../utils/normalizeColor';\n\n/**\n * Create SVGLineElements from an annotation definition.\n * This is used for anntations of type `strikeout`.\n *\n * @param {Object} a The annotation definition\n * @return {SVGGElement} A group of all lines to be rendered\n */\nexport default function renderLine(a) {\n\tlet group = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n\tsetAttributes(group, {\n\t\tstroke: normalizeColor(a.color || '#f00'),\n\t\tstrokeWidth: 1\n\t});\n\n\ta.rectangles.forEach((r) => {\n\t\tlet line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n\n\t\tsetAttributes(line, {\n\t\t\tx1: r.x,\n\t\t\ty1: r.y,\n\t\t\tx2: r.x + r.width,\n\t\t\ty2: r.y,\n\t\t});\n\n\t\tgroup.appendChild(line);\n\t});\n\n\treturn group;\n}\n","import setAttributes from '../utils/setAttributes';\nimport normalizeColor from '../utils/normalizeColor';\n\n/**\n * Create SVGPathElement from an annotation definition.\n * This is used for anntations of type `drawing`.\n *\n * @param {Object} a The annotation definition\n * @return {SVGPathElement} The path to be rendered\n */\nexport default function renderPath(a) {\n\tlet d = [];\n\tlet path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n  \n\tfor (let i=0, l=a.lines.length; i<l; i++) {\n\t\tlet p1 = a.lines[i];\n\t\tlet p2 = a.lines[i+1];\n\t\tif (p2) {\n\t\t\td.push(`M${p1[0]} ${p1[1]} ${p2[0]} ${p2[1]}`);\n\t\t}\n\t}\n  \n\tsetAttributes(path, {\n\t\td: `${d.join(' ')}Z`,\n\t\tstroke: normalizeColor(a.color || '#000'),\n\t\tstrokeWidth: a.width || 1,\n\t\tfill: 'none'\n\t});\n\n\treturn path;\n}\n","import setAttributes from '../utils/setAttributes';\n\nconst SIZE = 25;\nconst D = 'M499.968 214.336q-113.832 0 -212.877 38.781t-157.356 104.625 -58.311 142.29q0 62.496 39.897 119.133t112.437 97.929l48.546 27.9 -15.066 53.568q-13.392 50.778 -39.06 95.976 84.816 -35.154 153.45 -95.418l23.994 -21.204 31.806 3.348q38.502 4.464 72.54 4.464 113.832 0 212.877 -38.781t157.356 -104.625 58.311 -142.29 -58.311 -142.29 -157.356 -104.625 -212.877 -38.781z';\n\n/**\n * Create SVGElement from an annotation definition.\n * This is used for anntations of type `comment`.\n *\n * @param {Object} a The annotation definition\n * @return {SVGElement} A svg to be rendered\n */\nexport default function renderPoint(a) {\n\tlet outerSVG = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\tlet innerSVG = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\tlet rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n\tlet path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\n\tsetAttributes(outerSVG,  {\n\t\twidth: SIZE,\n\t\theight: SIZE,\n\t\tx: a.x,\n\t\ty: a.y\n\t});\n\n\tsetAttributes(innerSVG, {\n\t\twidth: SIZE,\n\t\theight: SIZE,\n\t\tx: 0,\n\t\ty: (SIZE * 0.05) * -1,\n\t\tviewBox: '0 0 1000 1000'\n\t});\n\n\tsetAttributes(rect, {\n\t\twidth: SIZE,\n\t\theight: SIZE,\n\t\tstroke: '#000',\n\t\tfill: '#ff0'\n\t});\n\n\tsetAttributes(path, {\n\t\td: D,\n\t\tstrokeWidth: 50,\n\t\tstroke: '#000',\n\t\tfill: '#fff'\n\t});\n\n\tinnerSVG.appendChild(path);\n\touterSVG.appendChild(rect);\n\touterSVG.appendChild(innerSVG);\n\n\treturn outerSVG;\n}\n","import setAttributes from '../utils/setAttributes';\nimport normalizeColor from '../utils/normalizeColor';\n\n/**\n * Create SVGRectElements from an annotation definition.\n * This is used for anntations of type `area` and `highlight`.\n *\n * @param {Object} a The annotation definition\n * @return {SVGGElement|SVGRectElement} A group of all rects to be rendered\n */\nexport default function renderRect(a) {\n\tif (a.type === 'highlight' || a.type === 'comment-highlight') {\n\t\tlet group = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n\t\tlet order = 1;\n\n\t\tlet otherGroups = document.querySelectorAll(\"g[top='\"+ a.top +\"']\");\n\t\tif(otherGroups.length > 0){\n\t\t\tlet groupsArr = Array.prototype.slice.call(otherGroups);\n\t\t\tlet max = Math.max.apply(Math, groupsArr.map(function(o) { return parseInt(o.getAttribute('order')); }));\n\t\t\torder = max + 1;\n\t\t}\n    \n\t\tsetAttributes(group, {\n\t\t\tfill: normalizeColor(a.color || '#ff0'),\n\t\t\tfillOpacity: 0.2,\n\t\t\ttop: a.top,\n\t\t\tpageNum: a.pageNum,\n\t\t\tpageHeight: a.pageHeight,\n\t\t\torder: order\n\t\t});\n    \n\t\ta.rectangles.forEach((r) => {\n\t\t\tgroup.appendChild(createRect(r));\n\t\t});\n\n\t\treturn group;\n\t} else {\n\t\tlet rect = createRect(a);\n\t\tsetAttributes(rect, {\n\t\t\tstroke: normalizeColor(a.color || '#f00'),\n\t\t\tfill: 'none'\n\t\t});\n\n\t\treturn rect;\n\t}\n}\n\nfunction createRect(r) {\n\tlet rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n\n\tsetAttributes(rect, {\n\t\tx: r.x,\n\t\ty: r.y,\n\t\twidth: r.width,\n\t\theight: r.height\n\t});\n\n\treturn rect;\n}\n","import setAttributes from '../utils/setAttributes';\nimport normalizeColor from '../utils/normalizeColor';\n\n/**\n * Create SVGTextElement from an annotation definition.\n * This is used for anntations of type `textbox`.\n *\n * @param {Object} a The annotation definition\n * @return {SVGTextElement} A text to be rendered\n */\nexport default function renderText(a) {\n\tlet text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n\n\tsetAttributes(text, {\n\t\tx: a.x,\n\t\ty: a.y + parseInt(a.size, 10),\n\t\tfill: normalizeColor(a.color || '#000'),\n\t\tfontSize: a.size\n\t});\n\ttext.innerHTML = a.content;\n\n\treturn text;\n}\n","import objectAssign from 'object-assign';\nimport renderLine from './renderLine';\nimport renderPath from './renderPath';\nimport renderPoint from './renderPoint';\nimport renderRect from './renderRect';\nimport renderText from './renderText';\n//import { wrap } from 'module';\n\nconst isFirefox = /firefox/i.test(navigator.userAgent);\n\n/**\n * Get the x/y translation to be used for transforming the annotations\n * based on the rotation of the viewport.\n *\n * @param {Object} viewport The viewport data from the page\n * @return {Object}\n */\nfunction getTranslation(viewport) {\n\tlet x;\n\tlet y;\n\n\t// Modulus 360 on the rotation so that we only\n\t// have to worry about four possible values.\n\tswitch(viewport.rotation % 360) {\n\t\tcase 0:\n\t\t\tx = y = 0;\n\t\t\tbreak;\n\t\tcase 90:\n\t\t\tx = 0;\n\t\t\ty = (viewport.width / viewport.scale) * -1;\n\t\t\tbreak;\n\t\tcase 180:\n\t\t\tx = (viewport.width / viewport.scale) * -1;\n\t\t\ty = (viewport.height / viewport.scale) * -1;\n\t\t\tbreak;\n\t\tcase 270:\n\t\t\tx = (viewport.height / viewport.scale) * -1;\n\t\t\ty = 0;\n\t\t\tbreak;\n\t}\n\n\treturn { x, y };\n}\n\n/**\n * Transform the rotation and scale of a node using SVG's native transform attribute.\n *\n * @param {Node} node The node to be transformed\n * @param {Object} viewport The page's viewport data\n * @return {Node}\n */\nfunction transform(node, viewport) {\n\tlet trans = getTranslation(viewport);\n\n\t// Let SVG natively transform the element\n\tnode.setAttribute('transform', `scale(${viewport.scale}) rotate(${viewport.rotation}) translate(${trans.x}, ${trans.y})`);\n  \n\t// Manually adjust x/y for nested SVG nodes\n\tif (!isFirefox && node.nodeName.toLowerCase() === 'svg') {\n\t\tnode.setAttribute('x', parseInt(node.getAttribute('x'), 10) * viewport.scale);\n\t\tnode.setAttribute('y', parseInt(node.getAttribute('y'), 10) * viewport.scale);\n\n\t\tlet x = parseInt(node.getAttribute('x', 10));\n\t\tlet y = parseInt(node.getAttribute('y', 10));\n\t\tlet width = parseInt(node.getAttribute('width'), 10);\n\t\tlet height = parseInt(node.getAttribute('height'), 10);\n\t\tlet path = node.querySelector('path');\n\t\tlet svg = path.parentNode;\n   \n\t\t// Scale width/height\n\t\t[node, svg, path, node.querySelector('rect')].forEach((n) => {\n\t\t\tn.setAttribute('width', parseInt(n.getAttribute('width'), 10) * viewport.scale);\n\t\t\tn.setAttribute('height', parseInt(n.getAttribute('height'), 10) * viewport.scale);\n\t\t});\n\n\t\t// Transform path but keep scale at 100% since it will be handled natively\n\t\ttransform(path, objectAssign({}, viewport, { scale: 1 }));\n    \n\t\tswitch(viewport.rotation % 360) {\n\t\t\tcase 90:\n\t\t\t\tnode.setAttribute('x', viewport.width - y - width);\n\t\t\t\tnode.setAttribute('y', x);\n\t\t\t\tsvg.setAttribute('x', 1);\n\t\t\t\tsvg.setAttribute('y', 0);\n\t\t\t\tbreak;\n\t\t\tcase 180:\n\t\t\t\tnode.setAttribute('x', viewport.width - x - width);\n\t\t\t\tnode.setAttribute('y', viewport.height - y - height);\n\t\t\t\tsvg.setAttribute('y', 2);\n\t\t\t\tbreak;\n\t\t\tcase 270:\n\t\t\t\tnode.setAttribute('x', y);\n\t\t\t\tnode.setAttribute('y', viewport.height - x - height);\n\t\t\t\tsvg.setAttribute('x', -1);\n\t\t\t\tsvg.setAttribute('y', 0);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn node;\n}\n\n/**\n * Append an annotation as a child of an SVG.\n *\n * @param {SVGElement} svg The SVG element to append the annotation to\n * @param {Object} annotation The annotation definition to render and append\n * @param {Object} viewport The page's viewport data\n * @return {SVGElement} A node that was created and appended by this function\n */\nexport default function appendChild(svg, annotation, viewport) {\n\tif (!viewport) {\n\t\tviewport = JSON.parse(svg.getAttribute('data-pdf-annotate-viewport'));\n\t}\n  \n\tlet child;\n\tswitch (annotation.type) {\n\t\tcase 'area':\n\t\tcase 'comment-highlight':\n\t\tcase 'highlight':\n\t\t\tchild = renderRect(annotation);\n\t\t\tbreak;\n\t\tcase 'strikeout':\n\t\t\tchild = renderLine(annotation);\n\t\t\tbreak;\n\t\tcase 'point':\n\t\t\tchild = renderPoint(annotation);\n\t\t\tbreak;\n\t\tcase 'textbox':\n\t\t\tchild = renderText(annotation);\n\t\t\tbreak;\n\t\tcase 'drawing':\n\t\t\tchild = renderPath(annotation);\n\t\t\tbreak;\n\t}\n\n\t// If no type was provided for an annotation it will result in node being null.\n\t// Skip appending/transforming if node doesn't exist.\n\tif (child) {\n\t\t// Set attributes\n\t\tchild.setAttribute('data-pdf-annotate-id', annotation.uuid);\n\t\tchild.setAttribute('data-pdf-annotate-type', annotation.type);\n\t\tchild.setAttribute('aria-hidden', true);\n\n\n\t\t// INSERT the group element into its CORRECT order, not before its wrapper\n\t\tlet wrapperNode = findWrapperNode(svg, child);\n\t\tif(wrapperNode != null)\n\t\t\twrapperNode.before(transform(child, viewport));\n\t\telse\n\t\t\tsvg.appendChild(transform(child, viewport));\n\t}\n\n\treturn child;\n}\n\nfunction isArrayInArray(arr, childArr){\n\tlet isWrapped = true;\n\tlet arrString = arr.toString();\n\tfor(let i = 0; i < childArr.length; i++){\n\t\tif(!arrString.includes(childArr[i])){\n\t\t\tisWrapped = false;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn isWrapped;\n}\n\nfunction findWrapperNode(svg, node){\n\tlet rects = node.childNodes;\n\tif(rects.length > 0){\n\t\tlet wrapperRects = svg.querySelectorAll(\"rect[y='\" + rects[0].getAttribute('y') + \"']\");\n\t\tif(wrapperRects.length > 0){\n\t\t\tif(rects.length == 1){\n\t\t\t\tif(wrapperRects[0].parentNode.childNodes.length == 1){\n\t\t\t\t\tlet rectX = parseInt(rects[0].getAttribute('x'));\n\t\t\t\t\tlet rectWidth = parseInt(rects[0].getAttribute('width'));\n\t\t\t\t\tlet wrapperX = parseInt(wrapperRects[0].getAttribute('x'));\n\t\t\t\t\tlet wrapperWidth = parseInt(wrapperRects[0].getAttribute('width'));\n\t\t\t\t\tif(rectX < wrapperX && rectWidth > wrapperWidth)\n\t\t\t\t\t\treturn null;\n\t\t\t\t} \n\t\t\t} else {\n\t\t\t\t// node has more than 1 rects\n\t\t\t\tlet wrapper =  null;\n\t\t\t\tlet rectsY = Array.prototype.slice.call(rects).map(function(r) { return r.getAttribute('y'); });\n\t\t\t\t// check all parents of wrapperRects\n\t\t\t\tfor(let i = 0; i < wrapperRects.length; i++){\n\t\t\t\t\tlet item = wrapperRects[i];\n\t\t\t\t\tlet wrapperChildRects = item.parentNode.childNodes;\n\t\t\t\t\tif(rects.length <= wrapperChildRects.length){\n\t\t\t\t\t\tlet wrapperY = Array.prototype.slice.call(wrapperChildRects).map(function(r) { return r.getAttribute('y'); });\n\t\t\t\t\t\tif(isArrayInArray(wrapperY, rectsY)){\n\t\t\t\t\t\t\twrapper = item.parentNode;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn wrapper;\n\t\t\t}\n\t\t\treturn wrapperRects[0].parentNode;\n\t\t} \n\t}\n\treturn null;\n}\n","/**\n * Create a node that is only visible to screen readers\n *\n * @param {String} content The text content that should be read by screen reader\n * @param {String} [annotationId] The ID of the annotation assocaited\n * @return {Element} An Element that is only visible to screen readers\n */\nexport default function createScreenReaderOnly(content, annotationId) {\n\tlet node = document.createElement('div');\n\tlet text = document.createTextNode(content);\n\tnode.appendChild(text);\n\tnode.setAttribute('id', `pdf-annotate-screenreader-${annotationId}`);\n\tnode.style.position = 'absolute';\n\tnode.style.left = '-10000px';\n\tnode.style.top = 'auto';\n\tnode.style.width = '1px';\n\tnode.style.height = '1px';\n\tnode.style.overflow = 'hidden';\n\treturn node;\n}\n","import {\n\tpointIntersectsRect,\n\tscaleUp,\n\tscaleDown\n} from '../UI/utils'; \n\n/**\n * Insert an element at a point within the document.\n * This algorithm will only insert within an element amidst it's text content.\n *\n * @param {Element} el The element to be inserted\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n * @param {Number} pageNumber The page number to limit elements to\n * @param {Boolean} insertBefore Whether the element is to be inserted before or after x\n * @return {Boolean} True if element was able to be inserted, otherwise false\n */\nexport default function insertElementWithinElement(el, x, y, pageNumber, insertBefore) {\n\tconst OFFSET_ADJUST = 2;\n\n\t// If inserting before adjust `x` by looking for element a few px to the right\n\t// Otherwise adjust a few px to the left\n\t// This is to allow a little tolerance by searching within the box, instead\n\t// of getting a false negative by testing right on the border.\n\tx = Math.max(x + (OFFSET_ADJUST * (insertBefore ? 1 : -1)), 0);\n\n\tlet node = textLayerElementFromPoint(x, y + OFFSET_ADJUST, pageNumber);\n\tif (!node) {\n\t\treturn false;\n\t}\n  \n\t// Now that node has been found inverse the adjustment for `x`.\n\t// This is done to accomodate tolerance by cutting off on the outside of the\n\t// text boundary, instead of missing a character by cutting off within.\n\tx = x + (OFFSET_ADJUST * (insertBefore ? -1 : 1));\n\n\tlet svg = document.querySelector(`svg[data-pdf-annotate-page=\"${pageNumber}\"]`);\n\tlet left = scaleDown(svg, {left: node.getBoundingClientRect().left}).left - svg.getBoundingClientRect().left;\n\tlet temp = node.cloneNode(true);\n\tlet head = temp.innerHTML.split('');\n\tlet tail = [];\n\n\t// Insert temp off screen\n\ttemp.style.position = 'absolute';\n\ttemp.style.top = '-10000px';\n\ttemp.style.left = '-10000px';\n\tdocument.body.appendChild(temp);\n\n\twhile (head.length) {\n\t\t// Don't insert within HTML tags\n\t\tif (head[head.length - 1] === '>') {\n\t\t\twhile(head.length) {\n\t\t\t\ttail.unshift(head.pop());\n\t\t\t\tif (tail[0] === '<') {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n    \n\t\t// Check if width of temp based on current head value satisfies x\n\t\ttemp.innerHTML = head.join('');\n\t\tlet width = scaleDown(svg, {width: temp.getBoundingClientRect().width}).width;\n\t\tif (left + width <= x) {\n\t\t\tbreak;\n\t\t}\n\t\ttail.unshift(head.pop());\n\t}\n  \n\t// Update original node with new markup, including element to be inserted\n\tnode.innerHTML = head.join('') + el.outerHTML + tail.join('');\n\ttemp.parentNode.removeChild(temp);\n\n\treturn true;\n}\n\n/**\n * Get a text layer element at a given point on a page\n *\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n * @param {Number} pageNumber The page to limit elements to\n * @return {Element} First text layer element found at the point\n */\nfunction textLayerElementFromPoint(x, y, pageNumber) {\n\tlet svg = document.querySelector(`svg[data-pdf-annotate-page=\"${pageNumber}\"]`);\n\tlet rect = svg.getBoundingClientRect();\n\ty = scaleUp(svg, {y}).y + rect.top;\n\tx = scaleUp(svg, {x}).x + rect.left;\n\treturn [...svg.parentNode.querySelectorAll('.textLayer [data-canvas-width]')].filter((el) => {\n\t\treturn pointIntersectsRect(x, y, el.getBoundingClientRect());\n\t})[0];\n}\n","import insertElementWithinElement from './insertElementWithinElement';\nimport { pointIntersectsRect } from '../UI/utils';\nimport { scaleUp } from '../UI/utils'; \n\n/**\n * Insert an element at a point within the document.\n * This algorithm will try to insert between elements if possible.\n * It will however use `insertElementWithinElement` if it is more accurate.\n *\n * @param {Element} el The element to be inserted\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n * @param {Number} pageNumber The page number to limit elements to\n * @return {Boolean} True if element was able to be inserted, otherwise false\n */\nexport default function insertElementWithinChildren(el, x, y, pageNumber) {\n\t// Try and use most accurate method of inserting within an element\n\tif (insertElementWithinElement(el, x, y, pageNumber, true)) {\n\t\treturn true;\n\t}\n\n\t// Fall back to inserting between elements\n\tlet svg = document.querySelector(`svg[data-pdf-annotate-page=\"${pageNumber}\"]`);\n\tlet rect = svg.getBoundingClientRect();\n\tlet nodes = [...svg.parentNode.querySelectorAll('.textLayer > div')];\n\n\ty = scaleUp(svg, {y}).y + rect.top;\n\tx = scaleUp(svg, {x}).x + rect.left;\n\n\t// Find the best node to insert before\n\tfor (let i=0, l=nodes.length; i<l; i++) {\n\t\tlet n = nodes[i];\n\t\tlet r = n.getBoundingClientRect();\n\t\tif (y <= r.top) {\n\t\t\tn.parentNode.insertBefore(el, n);\n\t\t\treturn true;\n\t\t}\n\t}\n\n\t// If all else fails try to append to the bottom\n\tlet textLayer = svg.parentNode.querySelector('.textLayer');\n\tif (textLayer) {\n\t\tlet textRect = textLayer.getBoundingClientRect();\n\t\tif (pointIntersectsRect(x, y, textRect)) {\n\t\t\ttextLayer.appendChild(el);\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n","/**\n * Insert a comment into the DOM to be available by screen reader\n *\n * @param {Object} comment The comment to be inserted\n */\nexport default function insertScreenReaderComment(comment) {\n\tif (!comment) {\n\t\treturn;\n\t}\n\n\tlet list = document.querySelector(`#pdf-annotate-screenreader-${comment.annotation} ol`);\n\tif (list) {\n\t\tlet item = document.createElement('li');\n\t\titem.setAttribute('id', `pdf-annotate-screenreader-comment-${comment.uuid}`);\n\t\titem.appendChild(document.createTextNode(`${comment.content}`));\n\t\tlist.appendChild(item);\n\t}\n}\n","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport insertScreenReaderComment from './insertScreenReaderComment';\n\n/**\n * Insert the comments into the DOM to be available by screen reader\n *\n * Example output:\n *   <div class=\"screenReaderOnly\">\n *    <div>Begin highlight 1</div>\n *    <ol aria-label=\"Comments\">\n *      <li>Foo</li>\n *      <li>Bar</li>\n *      <li>Baz</li>\n *      <li>Qux</li>\n *    </ol>\n *  </div>\n *  <div>Some highlighted text goes here...</div>\n *  <div class=\"screenReaderOnly\">End highlight 1</div>\n *\n * NOTE: `screenReaderOnly` is not a real class, just used for brevity\n *\n * @param {String} documentId The ID of the document\n * @param {String} annotationId The ID of the annotation\n * @param {Array} [comments] Optionally preloaded comments to be rendered\n * @return {Promise}\n */\nexport default function renderScreenReaderComments(documentId, annotationId, comments) {\n\tlet promise;\n\n\tif (Array.isArray(comments)) {\n\t\tpromise = Promise.resolve(comments);\n\t} else {\n\t\tpromise = PDFJSAnnotate.getStoreAdapter().getComments(documentId, annotationId);\n\t}\n\n\treturn promise.then((comments) => {\n\t\t// Node needs to be found by querying DOM as it may have been inserted as innerHTML\n\t\t// leaving `screenReaderNode` as an invalid reference (see `insertElementWithinElement`).\n\t\tlet node = document.getElementById(`pdf-annotate-screenreader-${annotationId}`);\n\t\tif (node) { \n\t\t\tlet list = document.createElement('ol');\n\t\t\tlist.setAttribute('id', `pdf-annotate-screenreader-comment-list-${annotationId}`);\n\t\t\tlist.setAttribute('aria-label', 'Comments');\n\t\t\tnode.appendChild(list);\n\t\t\tcomments.forEach(insertScreenReaderComment);\n\t\t}\n\t});\n}\n","/* eslint-disable no-case-declarations */\nimport createScreenReaderOnly from './createScreenReaderOnly';\nimport insertElementWithinChildren from './insertElementWithinChildren';\nimport insertElementWithinElement from './insertElementWithinElement';\nimport renderScreenReaderComments from './renderScreenReaderComments';\n\n// Annotation types that support comments\nconst COMMENT_TYPES = ['highlight', 'point', 'area'];\n\n/**\n * Insert a hint into the DOM for screen readers for a specific annotation.\n *\n * @param {Object} annotation The annotation to insert a hint for\n * @param {Number} num The number of the annotation out of all annotations of the same type\n */\nexport default function insertScreenReaderHint(annotation, num = 0) {\n\tswitch (annotation.type) {\n\t\tcase 'highlight':\n\t\tcase 'strikeout':\n\t\t\tlet rects = annotation.rectangles;\n\t\t\tlet first = rects[0];\n\t\t\tlet last = rects[rects.length - 1];\n\n\t\t\tinsertElementWithinElement(\n\t\t\t\tcreateScreenReaderOnly(`Begin ${annotation.type} annotation ${num}`, annotation.uuid),\n\t\t\t\tfirst.x, first.y, annotation.page, true\n\t\t\t);\n\n\t\t\tinsertElementWithinElement(\n\t\t\t\tcreateScreenReaderOnly(`End ${annotation.type} annotation ${num}`, `${annotation.uuid}-end`),\n\t\t\t\tlast.x + last.width, last.y, annotation.page, false\n\t\t\t);\n\t\t\tbreak;\n\n\t\tcase 'textbox':\n\t\tcase 'point':\n\t\t\tlet text = annotation.type === 'textbox' ? ` (content: ${annotation.content})` : '';\n\n\t\t\tinsertElementWithinChildren(\n\t\t\t\tcreateScreenReaderOnly(`${annotation.type} annotation ${num}${text}`, annotation.uuid),\n\t\t\t\tannotation.x, annotation.y, annotation.page\n\t\t\t);\n\t\t\tbreak;\n\n\t\tcase 'drawing':\n\t\tcase 'area':\n\t\t\tlet x = typeof annotation.x !== 'undefined' ? annotation.x : annotation.lines[0][0];\n\t\t\tlet y = typeof annotation.y !== 'undefined' ? annotation.y : annotation.lines[0][1];\n\n\t\t\tinsertElementWithinChildren(\n\t\t\t\tcreateScreenReaderOnly('Unlabeled drawing', annotation.uuid),\n\t\t\t\tx, y, annotation.page\n\t\t\t);\n\t\t\tbreak;\n\t}\n\n\t// Include comments in screen reader hint\n\tif (COMMENT_TYPES.includes(annotation.type)) {\n\t\trenderScreenReaderComments(annotation.documentId, annotation.uuid);\n\t}\n}\n","/* eslint-disable no-unused-vars */\nimport insertScreenReaderHint from './insertScreenReaderHint';\nimport renderScreenReaderHints from './renderScreenReaderHints';\nimport insertScreenReaderComment from './insertScreenReaderComment';\nimport renderScreenReaderComments from './renderScreenReaderComments';\nimport { addEventListener } from '../UI/event';\nimport PDFJSAnnotate from '../PDFJSAnnotate';\n\n/**\n * Initialize the event handlers for keeping screen reader hints synced with data\n */\nexport default function initEventHandlers() {\n\taddEventListener('annotation:add', (documentId, pageNumber, annotation) => {\n\t\treorderAnnotationsByType(documentId, pageNumber, annotation.type);\n\t});\n\taddEventListener('annotation:edit', (documentId, annotationId, annotation) => {\n\t\treorderAnnotationsByType(documentId, annotation.page, annotation.type);\n\t});\n\taddEventListener('annotation:delete', removeAnnotation);\n\taddEventListener('comment:add', insertComment);\n\taddEventListener('comment:delete', removeComment);\n}\n\n/**\n * Reorder the annotation numbers by annotation type\n *\n * @param {String} documentId The ID of the document\n * @param {Number} pageNumber The page number of the annotations\n * @param {Strig} type The annotation type\n */\nfunction reorderAnnotationsByType(documentId, pageNumber, type) {\n\tPDFJSAnnotate.getStoreAdapter().getAnnotations(documentId, pageNumber)\n\t\t.then((annotations) => {\n\t\t\treturn annotations.annotations.filter((a) => {\n\t\t\t\treturn a.type === type;\n\t\t\t});\n\t\t})\n\t\t.then((annotations) => {\n\t\t\tannotations.forEach((a) => {\n\t\t\t\tremoveAnnotation(documentId, a.uuid);\n\t\t\t});\n\n\t\t\treturn annotations;\n\t\t})\n\t\t.then(renderScreenReaderHints);\n}\n\n/**\n * Remove the screen reader hint for an annotation\n *\n * @param {String} documentId The ID of the document\n * @param {String} annotationId The Id of the annotation\n */\nfunction removeAnnotation(documentId, annotationId) {\n\tremoveElementById(`pdf-annotate-screenreader-${annotationId}`);\n\tremoveElementById(`pdf-annotate-screenreader-${annotationId}-end`);\n}\n\n/**\n * Insert a screen reader hint for a comment\n *\n * @param {String} documentId The ID of the document\n * @param {String} annotationId The ID of tha assocated annotation\n * @param {Object} comment The comment to insert a hint for\n */\nfunction insertComment(documentId, annotationId, comment) {\n\t// let list = document.querySelector(`pdf-annotate-screenreader-comment-list-${annotationId}`);\n\t// let promise;\n\n\t// if (!list) {\n\t//   promise = renderScreenReaderComments(documentId, annotationId, []).then(() => {\n\t//     list = document.querySelector(`pdf-annotate-screenreader-comment-list-${annotationId}`);\n\t//     return true;\n\t//   });\n\t// } else {\n\t//   promise = Promise.resolve(true);\n\t// }\n\n\t// promise.then(() => {\n\t//   insertScreenReaderComment(comment);\n\t// });\n}\n\n/**\n * Remove a screen reader hint for a comment\n *\n * @param {String} documentId The ID of the document\n * @param {String} commentId The ID of the comment\n */\nfunction removeComment(documentId, commentId) {\n\tremoveElementById(`pdf-annotate-screenreader-comment-${commentId}`);\n}\n\n/**\n * Remove an element from the DOM by it's ID if it exists\n *\n * @param {String} elementID The ID of the element to be removed\n */\nfunction removeElementById(elementId) {\n\tlet el = document.getElementById(elementId);\n\tif (el) {\n\t\tel.parentNode.removeChild(el);\n\t}\n}\n","import insertScreenReaderHint from './insertScreenReaderHint';\nimport initEventHandlers from './initEventHandlers';\n\n// TODO This is not the right place for this to live\ninitEventHandlers();\n\n/**\n * Insert hints into the DOM for screen readers.\n *\n * @param {Array} annotations The annotations that hints are inserted for\n */\nexport default function renderScreenReaderHints(annotations) {\n\tannotations = Array.isArray(annotations) ? annotations : [];\n\n\t// Insert hints for each type\n\tObject.keys(SORT_TYPES).forEach((type) => {\n\t\tlet sortBy = SORT_TYPES[type];\n\t\tannotations\n\t\t\t.filter((a) => a.type === type)\n\t\t\t.sort(sortBy)\n\t\t\t.forEach((a, i) => insertScreenReaderHint(a, i + 1));\n\t});\n}\n\n// Sort annotations first by y, then by x.\n// This allows hints to be injected in the order they appear,\n// which makes numbering them easier.\nfunction sortByPoint(a, b) {\n\tif (a.y < b.y) {\n\t\treturn a.x - b.x;\n\t} else {\n\t\treturn 1;\n\t}\n}\n\n// Sort annotation by it's first rectangle\nfunction sortByRectPoint(a, b) {\n\treturn sortByPoint(a.rectangles[0], b.rectangles[0]);\n}\n\n// Sort annotation by it's first line\nfunction sortByLinePoint(a, b) {\n\tlet lineA = a.lines[0];\n\tlet lineB = b.lines[0];\n\treturn sortByPoint(\n\t\t{x: lineA[0], y: lineA[1]},\n\t\t{x: lineB[0], y: lineB[1]}\n\t);\n}\n\n// Arrange supported types and associated sort methods\nconst SORT_TYPES = {\n\t'highlight': sortByRectPoint,\n\t'strikeout': sortByRectPoint,\n\t'drawing': sortByLinePoint,\n\t'textbox': sortByPoint,\n\t'point': sortByPoint,\n\t'area': sortByPoint\n};\n\n","/* eslint-disable no-unused-vars */\nimport PDFJSAnnotate from '../PDFJSAnnotate';\nimport appendChild from './appendChild';\nimport renderScreenReaderHints from '../a11y/renderScreenReaderHints';\n\n/**\n * Render the response from PDFJSAnnotate.getStoreAdapter().getAnnotations to SVG\n *\n * @param {SVGElement} svg The SVG element to render the annotations to\n * @param {Object} viewport The page viewport data\n * @param {Object} data The response from PDFJSAnnotate.getStoreAdapter().getAnnotations\n * @return {Promise} Settled once rendering has completed\n *  A settled Promise will be either:\n *    - fulfilled: SVGElement\n *    - rejected: Error\n */\nexport default function render(svg, viewport, data) {\n\treturn new Promise((resolve, reject) => {\n\t\t// Reset the content of the SVG\n\t\tsvg.innerHTML = ''; \n\t\tsvg.setAttribute('data-pdf-annotate-container', true);\n\t\tsvg.setAttribute('data-pdf-annotate-viewport', JSON.stringify(viewport));\n\t\tsvg.removeAttribute('data-pdf-annotate-document');\n\t\tsvg.removeAttribute('data-pdf-annotate-page');\n\n\t\t// If there's no data nothing can be done\n\t\tif (!data) {\n\t\t\treturn resolve(svg);\n\t\t}\n\n\t\tsvg.setAttribute('data-pdf-annotate-document', data.documentId);\n\t\tsvg.setAttribute('data-pdf-annotate-page', data.pageNumber);\n  \n\t\t// Make sure annotations is an array\n\t\tif (!Array.isArray(data.annotations) || data.annotations.length === 0) {\n\t\t\treturn resolve(svg);\n\t\t}\n\t\t//console.log(data.annotations);\n\t\t// Append annotation to svg\n\t\tdata.annotations.forEach((a) => {\n\t\t\tappendChild(svg, a, viewport);\n\t\t});\n\n\t\tresolve(svg);\n\t});\n}\n","/* eslint-disable no-unused-vars */\nimport PDFJSAnnotate from '../PDFJSAnnotate';\n\nimport appendChild from '../render/appendChild';\nimport {\n\taddEventListener,\n\tremoveEventListener\n} from './event';\nimport {\n\tBORDER_COLOR,\n\tdisableUserSelect,\n\tenableUserSelect,\n\tfindSVGContainer,\n\tfindSVGAtPoint,\n\tgetAnnotationRect,\n\tgetMetadata,\n\tscaleDown,\n\tscaleUp\n} from './utils';\n\nlet _enabled = false;\nlet isDragging = false, overlay;\nlet dragOffsetX, dragOffsetY, dragStartX, dragStartY;\nconst OVERLAY_BORDER_SIZE = 3;\n\n/**\n * Create an overlay for editing an annotation.\n *\n * @param {Element} target The annotation element to apply overlay for\n */\nfunction createEditOverlay(target) {\n\tdestroyEditOverlay();\n\n\toverlay = document.createElement('div');\n\tlet anchor = document.createElement('a');\n\tlet parentNode = findSVGContainer(target).parentNode;\n\tlet id = target.getAttribute('data-pdf-annotate-id');\n\tlet rect = getAnnotationRect(target);\n\tlet styleLeft = rect.left - OVERLAY_BORDER_SIZE;\n\tlet styleTop = rect.top - OVERLAY_BORDER_SIZE;\n  \n\toverlay.setAttribute('id', 'pdf-annotate-edit-overlay');\n\toverlay.setAttribute('data-target-id', id);\n\toverlay.style.boxSizing = 'content-box';\n\toverlay.style.position = 'absolute';\n\toverlay.style.top = `${styleTop}px`;\n\toverlay.style.left = `${styleLeft}px`;\n\toverlay.style.width = `${rect.width}px`;\n\toverlay.style.height = `${rect.height}px`;\n\toverlay.style.border = `${OVERLAY_BORDER_SIZE}px solid ${BORDER_COLOR}`;\n\toverlay.style.borderRadius = `${OVERLAY_BORDER_SIZE}px`;\n\n\tanchor.innerHTML = '×';\n\tanchor.setAttribute('href', 'javascript://');\n\tanchor.style.background = '#fff';\n\tanchor.style.borderRadius = '20px';\n\tanchor.style.border = '1px solid #bbb';\n\tanchor.style.color = '#bbb';\n\tanchor.style.fontSize = '16px';\n\tanchor.style.padding = '2px';\n\tanchor.style.textAlign = 'center';\n\tanchor.style.textDecoration = 'none';\n\tanchor.style.position = 'absolute';\n\tanchor.style.top = '-13px';\n\tanchor.style.right = '-13px';\n\tanchor.style.width = '25px';\n\tanchor.style.height = '25px';\n  \n\toverlay.appendChild(anchor);\n\tparentNode.appendChild(overlay);\n\tdocument.addEventListener('click', handleDocumentClick);\n\tdocument.addEventListener('keyup', handleDocumentKeyup);\n\tdocument.addEventListener('mousedown', handleDocumentMousedown);\n\tanchor.addEventListener('click', deleteAnnotation);\n\tanchor.addEventListener('mouseover', () => {\n\t\tanchor.style.color = '#35A4DC';\n\t\tanchor.style.borderColor = '#999';\n\t\tanchor.style.boxShadow = '0 1px 1px #ccc';\n\t});\n\tanchor.addEventListener('mouseout', () => {\n\t\tanchor.style.color = '#bbb';\n\t\tanchor.style.borderColor = '#bbb';\n\t\tanchor.style.boxShadow = '';\n\t});\n\toverlay.addEventListener('mouseover', () => {\n\t\tif (!isDragging) { anchor.style.display = ''; }\n\t});\n\toverlay.addEventListener('mouseout', () => {\n\t\tanchor.style.display = 'none';\n\t});\n}\n\n/**\n * Destroy the edit overlay if it exists.\n */\nfunction destroyEditOverlay() {\n\tif (overlay) {\n\t\toverlay.parentNode.removeChild(overlay);\n\t\toverlay = null;\n\t}\n\n\tdocument.removeEventListener('click', handleDocumentClick);\n\tdocument.removeEventListener('keyup', handleDocumentKeyup);\n\tdocument.removeEventListener('mousedown', handleDocumentMousedown);\n\tdocument.removeEventListener('mousemove', handleDocumentMousemove);\n\tdocument.removeEventListener('mouseup', handleDocumentMouseup);\n\tenableUserSelect();\n}\n\n/**\n * Delete currently selected annotation\n */\nfunction deleteAnnotation() {\n\tif (!overlay) { return; }\n\n\tlet annotationId = overlay.getAttribute('data-target-id');\n\tlet nodes = document.querySelectorAll(`[data-pdf-annotate-id=\"${annotationId}\"]`);\n\tlet svg = overlay.parentNode.querySelector('svg.annotationLayer');\n\tlet { documentId } = getMetadata(svg);\n\n\t[...nodes].forEach((n) => {\n\t\tn.parentNode.removeChild(n);\n\t});\n  \n\tPDFJSAnnotate.getStoreAdapter().deleteAnnotation(documentId, annotationId);\n\n\tdestroyEditOverlay();\n}\n\n/**\n * Handle document.click event\n *\n * @param {Event} e The DOM event that needs to be handled\n */\nfunction handleDocumentClick(e) {\n\tif (!findSVGAtPoint(e.clientX, e.clientY)) { return; }\n\n\t// Remove current overlay\n\tlet overlay = document.getElementById('pdf-annotate-edit-overlay');\n\tif (overlay) {\n\t\tif (isDragging || e.target === overlay) {\n\t\t\treturn;\n\t\t}\n\n\t\tdestroyEditOverlay();\n\t}\n}\n\n/**\n * Handle document.keyup event\n *\n * @param {Event} e The DOM event that needs to be handled\n */\nfunction handleDocumentKeyup(e) {\n\tif (overlay && e.keyCode === 46 &&\n      e.target.nodeName.toLowerCase() !== 'textarea' &&\n      e.target.nodeName.toLowerCase() !== 'input') {\n\t\tdeleteAnnotation();\n\t}\n}\n\n/**\n * Handle document.mousedown event\n *\n * @param {Event} e The DOM event that needs to be handled\n */\nfunction handleDocumentMousedown(e) {\n\tif (e.target !== overlay) { return; }\n\n\t// Highlight and strikeout annotations are bound to text within the document.\n\t// It doesn't make sense to allow repositioning these types of annotations.\n\tlet annotationId = overlay.getAttribute('data-target-id');\n\tlet target = document.querySelector(`[data-pdf-annotate-id=\"${annotationId}\"]`);\n\tlet type = target.getAttribute('data-pdf-annotate-type');\n\n\tif (type === 'highlight' || type === 'strikeout') { return; }\n\n\tisDragging = true;\n\tdragOffsetX = e.clientX;\n\tdragOffsetY = e.clientY;\n\tdragStartX = overlay.offsetLeft;\n\tdragStartY = overlay.offsetTop;\n\n\toverlay.style.background = 'rgba(255, 255, 255, 0.7)';\n\toverlay.style.cursor = 'move';\n\toverlay.querySelector('a').style.display = 'none';\n\n\tdocument.addEventListener('mousemove', handleDocumentMousemove);\n\tdocument.addEventListener('mouseup', handleDocumentMouseup);\n\tdisableUserSelect();\n}\n\n/**\n * Handle document.mousemove event\n *\n * @param {Event} e The DOM event that needs to be handled\n */\nfunction handleDocumentMousemove(e) {\n\tlet annotationId = overlay.getAttribute('data-target-id');\n\tlet parentNode = overlay.parentNode;\n\tlet rect = parentNode.getBoundingClientRect();\n\tlet y = (dragStartY + (e.clientY - dragOffsetY));\n\tlet x = (dragStartX + (e.clientX - dragOffsetX));\n\tlet minY = 0;\n\tlet maxY = rect.height;\n\tlet minX = 0;\n\tlet maxX = rect.width;\n\n\tif (y > minY && y + overlay.offsetHeight < maxY) {\n\t\toverlay.style.top = `${y}px`;\n\t}\n\n\tif (x > minX && x + overlay.offsetWidth < maxX) {\n\t\toverlay.style.left = `${x}px`;\n\t}\n}\n\n/**\n * Handle document.mouseup event\n *\n * @param {Event} e The DOM event that needs to be handled\n */\nfunction handleDocumentMouseup(e) {\n\tlet annotationId = overlay.getAttribute('data-target-id');\n\tlet target = document.querySelectorAll(`[data-pdf-annotate-id=\"${annotationId}\"]`);\n\tlet type = target[0].getAttribute('data-pdf-annotate-type');\n\tlet svg = overlay.parentNode.querySelector('svg.annotationLayer');\n\tlet { documentId } = getMetadata(svg);\n  \n\toverlay.querySelector('a').style.display = '';\n\n\tfunction getDelta(propX, propY) {\n\t\treturn calcDelta(parseInt(target[0].getAttribute(propX), 10), parseInt(target[0].getAttribute(propY), 10));\n\t}\n\n\tfunction calcDelta(x, y) {\n\t\treturn {\n\t\t\tdeltaX: OVERLAY_BORDER_SIZE + scaleDown(svg, {x: overlay.offsetLeft}).x - x,\n\t\t\tdeltaY: OVERLAY_BORDER_SIZE + scaleDown(svg, {y: overlay.offsetTop}).y - y\n\t\t};\n\t}\n\n\tPDFJSAnnotate.getStoreAdapter().getAnnotation(documentId, annotationId).then((annotation) => {\n\t\tif (['area', 'highlight', 'point', 'textbox'].indexOf(type) > -1) {\n\t\t\tlet { deltaX, deltaY } = getDelta('x', 'y');\n\t\t\t[...target].forEach((t, i) => {\n\t\t\t\tif (deltaY !== 0) {\n\t\t\t\t\tlet modelY = parseInt(t.getAttribute('y'), 10) + deltaY;\n\t\t\t\t\tlet viewY = modelY;\n\n\t\t\t\t\tif (type === 'textbox') {\n\t\t\t\t\t\tviewY += annotation.size;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (type === 'point') {\n\t\t\t\t\t\tviewY = scaleUp(svg, { viewY }).viewY;\n\t\t\t\t\t}\n\n\t\t\t\t\tt.setAttribute('y', viewY);\n\t\t\t\t\tif (annotation.rectangles) {\n\t\t\t\t\t\tannotation.rectangles[i].y = modelY;\n\t\t\t\t\t} else if (annotation.y) {\n\t\t\t\t\t\tannotation.y = modelY;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (deltaX !== 0) {\n\t\t\t\t\tlet modelX = parseInt(t.getAttribute('x'), 10) + deltaX;\n\t\t\t\t\tlet viewX = modelX;\n\n\t\t\t\t\tif (type === 'point') {\n\t\t\t\t\t\tviewX = scaleUp(svg, { viewX }).viewX;\n\t\t\t\t\t}\n\n\t\t\t\t\tt.setAttribute('x', viewX);\n\t\t\t\t\tif (annotation.rectangles) {\n\t\t\t\t\t\tannotation.rectangles[i].x = modelX;\n\t\t\t\t\t} else if (annotation.x) {\n\t\t\t\t\t\tannotation.x = modelX;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t// } else if (type === 'strikeout') {\n\t\t\t//   let { deltaX, deltaY } = getDelta('x1', 'y1');\n\t\t\t//   [...target].forEach(target, (t, i) => {\n\t\t\t//     if (deltaY !== 0) {\n\t\t\t//       t.setAttribute('y1', parseInt(t.getAttribute('y1'), 10) + deltaY);\n\t\t\t//       t.setAttribute('y2', parseInt(t.getAttribute('y2'), 10) + deltaY);\n\t\t\t//       annotation.rectangles[i].y = parseInt(t.getAttribute('y1'), 10);\n\t\t\t//     }\n\t\t\t//     if (deltaX !== 0) {\n\t\t\t//       t.setAttribute('x1', parseInt(t.getAttribute('x1'), 10) + deltaX);\n\t\t\t//       t.setAttribute('x2', parseInt(t.getAttribute('x2'), 10) + deltaX);\n\t\t\t//       annotation.rectangles[i].x = parseInt(t.getAttribute('x1'), 10);\n\t\t\t//     }\n\t\t\t//   });\n\t\t} else if (type === 'drawing') {\n\t\t\tlet rect = scaleDown(svg, getAnnotationRect(target[0]));\n\t\t\tlet [originX, originY] = annotation.lines[0];\n\t\t\tlet { deltaX, deltaY } = calcDelta(originX, originY);\n\n\t\t\t// origin isn't necessarily at 0/0 in relation to overlay x/y\n\t\t\t// adjust the difference between overlay and drawing coords\n\t\t\tdeltaY += (originY - rect.top);\n\t\t\tdeltaX += (originX - rect.left);\n\n\t\t\tannotation.lines.forEach((line, i) => {\n\t\t\t\tlet [x, y] = annotation.lines[i];\n\t\t\t\tannotation.lines[i][0] = x + deltaX;\n\t\t\t\tannotation.lines[i][1] = y + deltaY;\n\t\t\t});\n\n\t\t\ttarget[0].parentNode.removeChild(target[0]);\n\t\t\tappendChild(svg, annotation);\n\t\t}\n\n\t\tPDFJSAnnotate.getStoreAdapter().editAnnotation(documentId, annotationId, annotation);\n\t});\n\n\tsetTimeout(() => {\n\t\tisDragging = false;\n\t}, 0);\n\n\toverlay.style.background = '';\n\toverlay.style.cursor = '';\n\n\tdocument.removeEventListener('mousemove', handleDocumentMousemove);\n\tdocument.removeEventListener('mouseup', handleDocumentMouseup);\n\tenableUserSelect();\n}\n\n/**\n * Handle annotation.click event\n *\n * @param {Element} e The annotation element that was clicked\n */\nfunction handleAnnotationClick(target) {\n\tcreateEditOverlay(target);\n}\n\n/**\n * Enable edit mode behavior.\n */\nexport function enableEdit () {\n\tif (_enabled) { return; }\n\n\t_enabled = true;\n\taddEventListener('annotation:click', handleAnnotationClick);\n}\n\n/**\n * Disable edit mode behavior.\n */\nexport function disableEdit () {\n\tdestroyEditOverlay();\n\n\tif (!_enabled) { return; }\n\n\t_enabled = false;\n\tremoveEventListener('annotation:click', handleAnnotationClick);\n}\n\n","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport appendChild from '../render/appendChild';\nimport {\n\tdisableUserSelect,\n\tenableUserSelect,\n\tfindSVGAtPoint,\n\tgetMetadata,\n\tscaleDown\n} from './utils';\n\nlet _enabled = false;\nlet _penSize;\nlet _penColor;\nlet path;\nlet lines;\n\n/**\n * Handle document.mousedown event\n */\nfunction handleDocumentMousedown() {\n\tpath = null;\n\tlines = [];\n\n\tdocument.addEventListener('mousemove', handleDocumentMousemove);\n\tdocument.addEventListener('mouseup', handleDocumentMouseup);\n}\n\n/**\n * Handle document.mouseup event\n *\n * @param {Event} e The DOM event to be handled\n */\nfunction handleDocumentMouseup(e) {\n\tlet svg;\n\tif (lines.length > 1 && (svg = findSVGAtPoint(e.clientX, e.clientY))) {\n\t\tlet { documentId, pageNumber } = getMetadata(svg);\n\n\t\tPDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, pageNumber, {\n\t\t\ttype: 'drawing',\n\t\t\twidth: _penSize,\n\t\t\tcolor: _penColor,\n\t\t\tlines\n\t\t}\n\t\t).then((annotation) => {\n\t\t\tif (path) {\n\t\t\t\tsvg.removeChild(path);\n\t\t\t}\n\n\t\t\tappendChild(svg, annotation);\n\t\t});\n\t}\n\n\tdocument.removeEventListener('mousemove', handleDocumentMousemove);\n\tdocument.removeEventListener('mouseup', handleDocumentMouseup);\n}\n\n/**\n * Handle document.mousemove event\n *\n * @param {Event} e The DOM event to be handled\n */\nfunction handleDocumentMousemove(e) {\n\tsavePoint(e.clientX, e.clientY);\n}\n\n/**\n * Handle document.keyup event\n *\n * @param {Event} e The DOM event to be handled\n */\nfunction handleDocumentKeyup(e) {\n\t// Cancel rect if Esc is pressed\n\tif (e.keyCode === 27) {\n\t\tlines = null;\n\t\tpath.parentNode.removeChild(path);\n\t\tdocument.removeEventListener('mousemove', handleDocumentMousemove);\n\t\tdocument.removeEventListener('mouseup', handleDocumentMouseup);\n\t}\n}\n\n/**\n * Save a point to the line being drawn.\n *\n * @param {Number} x The x coordinate of the point\n * @param {Number} y The y coordinate of the point\n */\nfunction savePoint(x, y) {\n\tlet svg = findSVGAtPoint(x, y);\n\tif (!svg) {\n\t\treturn;\n\t}\n\n\tlet rect = svg.getBoundingClientRect();\n\tlet point = scaleDown(svg, {\n\t\tx: x - rect.left,\n\t\ty: y - rect.top\n\t});\n\n\tlines.push([point.x, point.y]);\n\n\tif (lines.length <= 1) {\n\t\treturn;\n\t}\n\n\tif (path) {\n\t\tsvg.removeChild(path);\n\t}\n\n\tpath = appendChild(svg, {\n\t\ttype: 'drawing',\n\t\tcolor: _penColor,\n\t\twidth: _penSize,\n\t\tlines\n\t});\n}\n\n/**\n * Set the attributes of the pen.\n *\n * @param {Number} penSize The size of the lines drawn by the pen\n * @param {String} penColor The color of the lines drawn by the pen\n */\nexport function setPen(penSize = 1, penColor = '000000') {\n\t_penSize = parseInt(penSize, 10);\n\t_penColor = penColor;\n}\n\n/**\n * Enable the pen behavior\n */\nexport function enablePen() {\n\tif (_enabled) { return; }\n\n\t_enabled = true;\n\tdocument.addEventListener('mousedown', handleDocumentMousedown);\n\tdocument.addEventListener('keyup', handleDocumentKeyup);\n\tdisableUserSelect();\n}\n\n/**\n * Disable the pen behavior\n */\nexport function disablePen() {\n\tif (!_enabled) { return; }\n\n\t_enabled = false;\n\tdocument.removeEventListener('mousedown', handleDocumentMousedown);\n\tdocument.removeEventListener('keyup', handleDocumentKeyup);\n\tenableUserSelect();\n}\n\n","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport appendChild from '../render/appendChild';\nimport {\n\tBORDER_COLOR,\n\tfindSVGAtPoint,\n\tgetMetadata,\n\tscaleDown\n} from './utils';\n\nlet _enabled = false;\nlet input;\n\n/**\n * Handle document.mouseup event\n *\n * @param {Event} The DOM event to be handled\n */\nfunction handleDocumentMouseup(e) {\n\tif (input || !findSVGAtPoint(e.clientX, e.clientY)) {\n\t\treturn;\n\t}\n  \n\tinput = document.createElement('input');\n\tinput.setAttribute('id', 'pdf-annotate-point-input');\n\tinput.setAttribute('placeholder', 'Enter comment');\n\tinput.style.border = `3px solid ${BORDER_COLOR}`;\n\tinput.style.borderRadius = '3px';\n\tinput.style.position = 'absolute';\n\tinput.style.top = `${e.clientY}px`;\n\tinput.style.left = `${e.clientX}px`;\n\n\tinput.addEventListener('blur', handleInputBlur);\n\tinput.addEventListener('keyup', handleInputKeyup);\n\n\tdocument.body.appendChild(input);\n\tinput.focus();\n}\n\n/**\n * Handle input.blur event\n */\nfunction handleInputBlur() {\n\tsavePoint();\n}\n\n/**\n * Handle input.keyup event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleInputKeyup(e) {\n\tif (e.keyCode === 27) {\n\t\tcloseInput();\n\t} else if (e.keyCode === 13) {\n\t\tsavePoint();\n\t}\n}\n\n/**\n * Save a new point annotation from input\n */\nfunction savePoint() {\n\tif (input.value.trim().length > 0) {\n\t\tlet clientX = parseInt(input.style.left, 10);\n\t\tlet clientY = parseInt(input.style.top, 10);\n\t\tlet content = input.value.trim();\n\t\tlet svg = findSVGAtPoint(clientX, clientY);\n\t\tif (!svg) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet rect = svg.getBoundingClientRect();\n\t\tlet { documentId, pageNumber } = getMetadata(svg);\n\t\tlet annotation = Object.assign({\n\t\t\ttype: 'point'\n\t\t}, scaleDown(svg, {\n\t\t\tx: clientX - rect.left,\n\t\t\ty: clientY - rect.top\n\t\t})\n\t\t);\n\n\t\tPDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, pageNumber, annotation)\n\t\t\t.then((annotation) => {\n\t\t\t\tPDFJSAnnotate.getStoreAdapter().addComment(\n\t\t\t\t\tdocumentId,\n\t\t\t\t\tannotation.uuid,\n\t\t\t\t\tcontent\n\t\t\t\t);\n\n\t\t\t\tappendChild(svg, annotation);\n\t\t\t});\n\t}\n\n\tcloseInput();\n}\n\n/**\n * Close the input element\n */\nfunction closeInput() {\n\tinput.removeEventListener('blur', handleInputBlur);\n\tinput.removeEventListener('keyup', handleInputKeyup);\n\tdocument.body.removeChild(input);\n\tinput = null;\n}\n\n/**\n * Enable point annotation behavior\n */\nexport function enablePoint() {\n\tif (_enabled) { return; }\n\n\t_enabled = true;\n\tdocument.addEventListener('mouseup', handleDocumentMouseup);\n}\n\n/**\n * Disable point annotation behavior\n */\nexport function disablePoint() {\n\tif (!_enabled) { return; }\n\n\t_enabled = false;\n\tdocument.removeEventListener('mouseup', handleDocumentMouseup);\n}\n\n","/* eslint-disable no-empty */\n/* eslint-disable no-unused-vars */\nimport PDFJSAnnotate from '../PDFJSAnnotate';\nimport appendChild from '../render/appendChild';\nimport {\n\tBORDER_COLOR,\n\tdisableUserSelect,\n\tenableUserSelect,\n\tfindSVGAtPoint,\n\tgetMetadata,\n\tgetOffset,\n\tscaleDown,\n\tscaleUp\n} from './utils';\n\nlet _enabled = false;\nlet _type;\nlet overlay;\nlet originY;\nlet originX;\n\n/**\n * Get the current window selection as rects\n *\n * @return {Array} An Array of rects\n */\nfunction getSelectionRects() {\n\ttry {\n\t\tlet selection = window.getSelection();\n\t\tlet range = selection.getRangeAt(0);\n\t\tlet rects = range.getClientRects();\n\n\t\tif (rects.length > 0 &&\n        rects[0].width > 0 &&\n        rects[0].height > 0) {\n\t\t\treturn rects;\n\t\t}\n\t} catch (e) {}\n  \n\treturn null;\n}\n\n/**\n * Handle document.mousedown event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleDocumentMousedown(e) {\n\tlet svg;\n\tif (_type !== 'area' || !(svg = findSVGAtPoint(e.clientX, e.clientY))) {\n\t\treturn;\n\t}\n\n\tlet rect = svg.getBoundingClientRect();\n\toriginY = e.clientY;\n\toriginX = e.clientX;\n\n\toverlay = document.createElement('div');\n\toverlay.style.position = 'absolute';\n\toverlay.style.top = `${originY - rect.top}px`;\n\toverlay.style.left = `${originX - rect.left}px`;\n\toverlay.style.border = `3px solid ${BORDER_COLOR}`;\n\toverlay.style.borderRadius = '3px';\n\tsvg.parentNode.appendChild(overlay);\n  \n\tdocument.addEventListener('mousemove', handleDocumentMousemove);\n\tdisableUserSelect();\n}\n\n/**\n * Handle document.mousemove event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleDocumentMousemove(e) {\n\tlet svg = overlay.parentNode.querySelector('svg.annotationLayer');\n\tlet rect = svg.getBoundingClientRect();\n\n\tif (originX + (e.clientX - originX) < rect.right) {\n\t\toverlay.style.width = `${e.clientX - originX}px`;\n\t}\n\n\tif (originY + (e.clientY - originY) < rect.bottom) {\n\t\toverlay.style.height = `${e.clientY - originY}px`;\n\t}\n}\n\n/**\n * Handle document.mouseup event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleDocumentMouseup(e) {\n\tlet rects;\n\tif (_type !== 'area' && (rects = getSelectionRects())) {\n\t\tlet svg = findSVGAtPoint(rects[0].left, rects[0].top);\n\t\tsaveRect(_type, [...rects].map((r) => {\n\t\t\treturn {\n\t\t\t\ttop: r.top,\n\t\t\t\tleft: r.left,\n\t\t\t\twidth: r.width,\n\t\t\t\theight: r.height\n\t\t\t};\n\t\t}));\n\t} else if (_type === 'area' && overlay) {\n\t\tlet svg = overlay.parentNode.querySelector('svg.annotationLayer');\n\t\tlet rect = svg.getBoundingClientRect();\n\t\tsaveRect(_type, [{\n\t\t\ttop: parseInt(overlay.style.top, 10) + rect.top,\n\t\t\tleft: parseInt(overlay.style.left, 10) + rect.left,\n\t\t\twidth: parseInt(overlay.style.width, 10),\n\t\t\theight: parseInt(overlay.style.height, 10)\n\t\t}]);\n\n\t\toverlay.parentNode.removeChild(overlay);\n\t\toverlay = null;\n\n\t\tdocument.removeEventListener('mousemove', handleDocumentMousemove);\n\t\tenableUserSelect();\n\t}\n}\n\n/**\n * Handle document.keyup event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleDocumentKeyup(e) {\n\t// Cancel rect if Esc is pressed\n\tif (e.keyCode === 27) {\n\t\tlet selection = window.getSelection();\n\t\tselection.removeAllRanges();\n\t\tif (overlay && overlay.parentNode) {\n\t\t\toverlay.parentNode.removeChild(overlay);\n\t\t\toverlay = null;\n\t\t\tdocument.removeEventListener('mousemove', handleDocumentMousemove);\n\t\t}\n\t}\n}\n\n/**\n * Save a rect annotation\n *\n * @param {String} type The type of rect (area, highlight, strikeout)\n * @param {Array} rects The rects to use for annotation\n * @param {String} color The color of the rects\n */\nfunction saveRect(type, rects, color) {\n\tlet svg = findSVGAtPoint(rects[0].left, rects[0].top);\n\tlet node;\n\tlet annotation;\n\n\tif (!svg) {\n\t\treturn;\n\t}\n\n\tlet boundingRect = svg.getBoundingClientRect();\n\n\tif (!color) {\n\t\tif (type === 'highlight') {\n\t\t\tcolor = 'FFFF00';\n\t\t} else if (type === 'strikeout') {\n\t\t\tcolor = 'FF0000';\n\t\t}\n\t}\n\n\t// Initialize the annotation\n\tannotation = {\n\t\ttype,\n\t\tcolor,\n\t\trectangles: [...rects].map((r) => {\n\t\t\tlet offset = 0;\n\n\t\t\tif (type === 'strikeout') {\n\t\t\t\toffset = r.height / 2;\n\t\t\t}\n\n\t\t\treturn scaleDown(svg, {\n\t\t\t\ty: (r.top + offset) - boundingRect.top,\n\t\t\t\tx: r.left - boundingRect.left,\n\t\t\t\twidth: r.width,\n\t\t\t\theight: r.height\n\t\t\t});\n\t\t}).filter((r) => r.width > 0 && r.height > 0 && r.x > -1 && r.y > -1)\n\t};\n  \n\t// Short circuit if no rectangles exist\n\tif (annotation.rectangles.length === 0) {\n\t\treturn;\n\t}\n\n\t// Special treatment for area as it only supports a single rect\n\tif (type === 'area') {\n\t\tlet rect = annotation.rectangles[0];\n\t\tdelete annotation.rectangles;\n\t\tannotation.x = rect.x;\n\t\tannotation.y = rect.y;\n\t\tannotation.width = rect.width;\n\t\tannotation.height = rect.height;\n\t}\n\n\tlet { documentId, pageNumber } = getMetadata(svg);\n\n\t// Add the annotation\n\tPDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, pageNumber, annotation)\n\t\t.then((annotation) => {\n\t\t\tappendChild(svg, annotation);\n\t\t});\n}\n\n/**\n * Enable rect behavior\n */\nexport function enableRect(type) {\n\t_type = type;\n  \n\tif (_enabled) { return; }\n\n\t_enabled = true;\n\tdocument.addEventListener('mouseup', handleDocumentMouseup);\n\tdocument.addEventListener('mousedown', handleDocumentMousedown);\n\tdocument.addEventListener('keyup', handleDocumentKeyup);\n}\n\n/**\n * Disable rect behavior\n */\nexport function disableRect() {\n\tif (!_enabled) { return; }\n\n\t_enabled = false;\n\tdocument.removeEventListener('mouseup', handleDocumentMouseup);\n\tdocument.removeEventListener('mousedown', handleDocumentMousedown);\n\tdocument.removeEventListener('keyup', handleDocumentKeyup);\n}\n\n","import PDFJSAnnotate from '../PDFJSAnnotate';\nimport appendChild from '../render/appendChild';\nimport {\n\tBORDER_COLOR,\n\tfindSVGAtPoint,\n\tgetMetadata,\n\tscaleDown\n} from './utils';\n\nlet _enabled = false;\nlet input;\nlet _textSize;\nlet _textColor;\n\n/**\n * Handle document.mouseup event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleDocumentMouseup(e) {\n\tif (input || !findSVGAtPoint(e.clientX, e.clientY)) {\n\t\treturn;\n\t}\n\n\tinput = document.createElement('input');\n\tinput.setAttribute('id', 'pdf-annotate-text-input');\n\tinput.setAttribute('placeholder', 'Enter text');\n\tinput.style.border = `3px solid ${BORDER_COLOR}`;\n\tinput.style.borderRadius = '3px';\n\tinput.style.position = 'absolute';\n\tinput.style.top = `${e.clientY}px`;\n\tinput.style.left = `${e.clientX}px`;\n\tinput.style.fontSize = `${_textSize}px`;\n\n\tinput.addEventListener('blur', handleInputBlur);\n\tinput.addEventListener('keyup', handleInputKeyup);\n\n\tdocument.body.appendChild(input);\n\tinput.focus();\n}\n\n/**\n * Handle input.blur event\n */\nfunction handleInputBlur() {\n\tsaveText();\n}\n\n/**\n * Handle input.keyup event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleInputKeyup(e) {\n\tif (e.keyCode === 27) {\n\t\tcloseInput();\n\t} else if (e.keyCode === 13) {\n\t\tsaveText();\n\t}\n}\n\n/**\n * Save a text annotation from input\n */\nfunction saveText() {\n\tif (input.value.trim().length > 0) {\n\t\tlet clientX = parseInt(input.style.left, 10);\n\t\tlet clientY = parseInt(input.style.top, 10);\n\t\tlet svg = findSVGAtPoint(clientX, clientY);\n\t\tif (!svg) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet { documentId, pageNumber } = getMetadata(svg);\n\t\tlet rect = svg.getBoundingClientRect();\n\t\tlet annotation = Object.assign({\n\t\t\ttype: 'textbox',\n\t\t\tsize: _textSize,\n\t\t\tcolor: _textColor,\n\t\t\tcontent: input.value.trim()\n\t\t}, scaleDown(svg, {\n\t\t\tx: clientX - rect.left,\n\t\t\ty: clientY -  rect.top,\n\t\t\twidth: input.offsetWidth,\n\t\t\theight: input.offsetHeight\n\t\t})\n\t\t);\n\n\t\tPDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, pageNumber, annotation)\n\t\t\t.then((annotation) => {\n\t\t\t\tappendChild(svg, annotation);\n\t\t\t});\n\t}\n  \n\tcloseInput();\n}\n\n/**\n * Close the input\n */\nfunction closeInput() {\n\tif (input) {\n\t\tinput.removeEventListener('blur', handleInputBlur);\n\t\tinput.removeEventListener('keyup', handleInputKeyup);\n\t\tdocument.body.removeChild(input);\n\t\tinput = null;\n\t}\n}\n\n/**\n * Set the text attributes\n *\n * @param {Number} textSize The size of the text\n * @param {String} textColor The color of the text\n */\nexport function setText(textSize = 12, textColor = '000000') {\n\t_textSize = parseInt(textSize, 10);\n\t_textColor = textColor;\n}\n\n\n/**\n * Enable text behavior\n */\nexport function enableText() {\n\tif (_enabled) { return; }\n\n\t_enabled = true;\n\tdocument.addEventListener('mouseup', handleDocumentMouseup);\n}\n\n\n/**\n * Disable text behavior\n */\nexport function disableText() {\n\tif (!_enabled) { return; }\n\n\t_enabled = false;\n\tdocument.removeEventListener('mouseup', handleDocumentMouseup);\n}\n\n","/* eslint-disable no-unused-vars */\n/* eslint-disable no-constant-condition */\nimport PDFJSAnnotate from '../PDFJSAnnotate';\nimport renderScreenReaderHints from '../a11y/renderScreenReaderHints';\nimport { DefaultTextLayerFactory } from 'pdf-dist/web/pdf_viewer.js';\n// Template for creating a new page\nconst PAGE_TEMPLATE = `\n  <div style=\"visibility: hidden;\" class=\"page\" data-loaded=\"false\">\n    <div class=\"canvasWrapper\">\n      <canvas></canvas>\n\t\t</div>\n\t\t<svg class=\"annotationLayer\"></svg>\n\t\t<div class=\"textLayer\"></div>\n  </div>\n`;\n\n/**\n * Create a new page to be appended to the DOM.\n *\n * @param {Number} pageNumber The page number that is being created\n * @return {HTMLElement}\n */\nexport function createPage(pageNumber) {\n\tlet temp = document.createElement('div');\n\ttemp.innerHTML = PAGE_TEMPLATE;\n\n\tlet page = temp.children[0];\n\tlet canvas = page.querySelector('canvas');\n\n\tpage.setAttribute('id', `pageContainer${pageNumber}`);\n\tpage.setAttribute('data-page-number', pageNumber);\n\n\tcanvas.mozOpaque = true;\n\tcanvas.setAttribute('id', `page${pageNumber}`);\n\n\treturn page;\n}\n\n/**\n * Render a page that has already been created.\n *\n * @param {Number} pageNumber The page number to be rendered\n * @param {Object} renderOptions The options for rendering\n * @return {Promise} Settled once rendering has completed\n *  A settled Promise will be either:\n *    - fulfilled: [pdfPage, annotations]\n *    - rejected: Error\n */\nexport async function renderPage(pageNumber, renderOptions) {\n\tlet {\n\t\tdocumentId,\n\t\tpdfDocument,\n\t\tscale,\n\t\trotate\n\t} = renderOptions;\n\n\t// Load the page and annotations\n\treturn Promise.all([\n\t\tpdfDocument.getPage(pageNumber),\n\t\tPDFJSAnnotate.getAnnotations(documentId, pageNumber)\n\t]).then(async ([pdfPage, annotations]) => {\n\t\tlet page = document.getElementById(`pageContainer${pageNumber}`);\n\t\tlet svg = page.querySelector('.annotationLayer');\n\t\tlet canvas = page.querySelector('.canvasWrapper canvas');\n\t\tlet canvasContext = canvas.getContext('2d', { alpha: false });\n\t\tlet viewport = pdfPage.getViewport({ scale, rotate });\n\t\tlet transform = scalePage(pageNumber, viewport, canvasContext);\n\t\tawait pdfPage.render({ canvasContext, viewport, transform }).promise;\n\t\tawait PDFJSAnnotate.render(svg, viewport, annotations).promise;\n\t\tlet textContent = await pdfPage.getTextContent({ normalizeWhitespace: true });\n\t\t// Render text layer for a11y of text content\n\t\tlet textLayer = page.querySelector('.textLayer');\n\t\tlet textLayerFactory = new DefaultTextLayerFactory();\n\t\tlet textLayerBuilder = textLayerFactory.createTextLayerBuilder(textLayer, pageNumber - 1, viewport);\n\t\ttextLayerBuilder.setTextContent(textContent);\n\t\ttextLayerBuilder.render();\n\t\t// Enable a11y for annotations\n\t\t// Timeout is needed to wait for `textLayerBuilder.render`\n\t\tsetTimeout(() => {\n\t\t\ttry {\n\t\t\t\trenderScreenReaderHints(annotations.annotations);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(e);\n\t\t\t}\n\t\t});\n\n\t\treturn [pdfPage, annotations];\n\t\t// return pdfPage.getTextContent({ normalizeWhitespace: true })\n\t\t// \t.then((textContent) => {\n\t\t// \treturn new Promise((resolve, reject) => {\n\t\t// \t\t// Render text layer for a11y of text content\n\t\t// \t\tlet textLayer = page.querySelector(`.textLayer`);\n\t\t// \t\tlet textLayerFactory = new DefaultTextLayerFactory();\n\t\t// \t\tlet textLayerBuilder = textLayerFactory.createTextLayerBuilder(textLayer, pageNumber - 1, viewport);\n\t\t// \t\ttextLayerBuilder.setTextContent(textContent);\n\t\t// \t\ttextLayerBuilder.render();\n\n\t\t// \t\t// Enable a11y for annotations\n\t\t// \t\t// Timeout is needed to wait for `textLayerBuilder.render`\n\t\t// \t\tsetTimeout(() => {\n\t\t// \t\t\ttry {\n\t\t// \t\t\t\trenderScreenReaderHints(annotations.annotations);\n\t\t// \t\t\t\tresolve();\n\t\t// \t\t\t} catch (e) {\n\t\t// \t\t\t\treject(e);\n\t\t// \t\t\t}\n\t\t// \t\t});\n\t\t// \t});\n\t\t// });\n\n\n\n\n\t\t// // Render the page\n\t\t// return Promise.all([\n\t\t// \tpdfPage.render({ canvasContext, viewport, transform }),\n\t\t// \tPDFJSAnnotate.render(svg, viewport, annotations)\n\t\t// ]).then(() => {\n\t\t// \t// Text content is needed for a11y, but is also necessary for creating\n\t\t// \t// highlight and strikeout annotations which require selecting text.\n\t\t// \treturn pdfPage.getTextContent({ normalizeWhitespace: true }).then((textContent) => {\n\t\t// \t\treturn new Promise((resolve, reject) => {\n\t\t// \t\t\t// Render text layer for a11y of text content\n\t\t// \t\t\tlet textLayer = page.querySelector(`.textLayer`);\n\t\t// \t\t\tlet textLayerFactory = new DefaultTextLayerFactory();\n\t\t// \t\t\tlet textLayerBuilder = textLayerFactory.createTextLayerBuilder(textLayer, pageNumber - 1, viewport);\n\t\t// \t\t\ttextLayerBuilder.setTextContent(textContent);\n\t\t// \t\t\ttextLayerBuilder.render();\n\n\t\t// \t\t\t// Enable a11y for annotations\n\t\t// \t\t\t// Timeout is needed to wait for `textLayerBuilder.render`\n\t\t// \t\t\tsetTimeout(() => {\n\t\t// \t\t\t\ttry {\n\t\t// \t\t\t\t\trenderScreenReaderHints(annotations.annotations);\n\t\t// \t\t\t\t\tresolve();\n\t\t// \t\t\t\t} catch (e) {\n\t\t// \t\t\t\t\treject(e);\n\t\t// \t\t\t\t}\n\t\t// \t\t\t});\n\t\t// \t\t});\n\t\t// \t});\n\t\t// }).then(() => {\n\t\t// \t// Indicate that the page was loaded\n\t\t// \tpage.setAttribute('data-loaded', 'true');\n\n\t\t// \treturn [pdfPage, annotations];\n\t\t//});\n\n\n\n\t});\n}\n\n/**\n * Scale the elements of a page.\n *\n * @param {Number} pageNumber The page number to be scaled\n * @param {Object} viewport The viewport of the PDF page (see pdfPage.getViewport(scale, rotate))\n * @param {Object} context The canvas context that the PDF page is rendered to\n * @return {Array} The transform data for rendering the PDF page\n */\nfunction scalePage(pageNumber, viewport, context) {\n\tlet page = document.getElementById(`pageContainer${pageNumber}`);\n\tlet canvas = page.querySelector('.canvasWrapper canvas');\n\tlet svg = page.querySelector('.annotationLayer');\n\tlet wrapper = page.querySelector('.canvasWrapper');\n\tlet textLayer = page.querySelector('.textLayer');\n\tlet outputScale = getOutputScale(context);\n\tlet transform = !outputScale.scaled ? null : [outputScale.sx, 0, 0, outputScale.sy, 0, 0];\n\tlet sfx = approximateFraction(outputScale.sx);\n\tlet sfy = approximateFraction(outputScale.sy);\n\n\t// Adjust width/height for scale\n\tpage.style.visibility = '';\n\tcanvas.width = roundToDivide(viewport.width * outputScale.sx, sfx[0]);\n\tcanvas.height = roundToDivide(viewport.height * outputScale.sy, sfy[0]);\n\tcanvas.style.width = roundToDivide(viewport.width, sfx[1]) + 'px';\n\tcanvas.style.height = roundToDivide(viewport.height, sfx[1]) + 'px';\n\tsvg.setAttribute('width', viewport.width);\n\tsvg.setAttribute('height', viewport.height);\n\tsvg.style.width = `${viewport.width}px`;\n\tsvg.style.height = `${viewport.height}px`;\n\tpage.style.width = `${viewport.width}px`;\n\tpage.style.height = `${viewport.height}px`;\n\twrapper.style.width = `${viewport.width}px`;\n\twrapper.style.height = `${viewport.height}px`;\n\ttextLayer.style.width = `${viewport.width}px`;\n\ttextLayer.style.height = `${viewport.height}px`;\n\n\treturn transform;\n}\n\n/**\n * The following methods are taken from mozilla/pdf.js and as such fall under\n * the Apache License (http://www.apache.org/licenses/).\n *\n * Original source can be found at mozilla/pdf.js:\n * https://github.com/mozilla/pdf.js/blob/master/web/ui_utils.js\n */\n\n/**\n * Approximates a float number as a fraction using Farey sequence (max order\n * of 8).\n *\n * @param {Number} x Positive float number\n * @return {Array} Estimated fraction: the first array item is a numerator,\n *                 the second one is a denominator.\n */\nfunction approximateFraction(x) {\n\t// Fast path for int numbers or their inversions.\n\tif (Math.floor(x) === x) {\n\t\treturn [x, 1];\n\t}\n\n\tconst xinv = 1 / x;\n\tconst limit = 8;\n\tif (xinv > limit) {\n\t\treturn [1, limit];\n\t} else if (Math.floor(xinv) === xinv) {\n\t\treturn [1, xinv];\n\t}\n\n\tconst x_ = x > 1 ? xinv : x;\n\n\t// a/b and c/d are neighbours in Farey sequence.\n\tlet a = 0, b = 1, c = 1, d = 1;\n\n\t// Limit search to order 8.\n\twhile (true) {\n\t\t// Generating next term in sequence (order of q).\n\t\tlet p = a + c, q = b + d;\n\t\tif (q > limit) {\n\t\t\tbreak;\n\t\t}\n\t\tif (x_ <= p / q) {\n\t\t\tc = p; d = q;\n\t\t} else {\n\t\t\ta = p; b = q;\n\t\t}\n\t}\n\n\t// Select closest of neighbours to x.\n\tif (x_ - a / b < c / d - x_) {\n\t\treturn x_ === x ? [a, b] : [b, a];\n\t} else {\n\t\treturn x_ === x ? [c, d] : [d, c];\n\t}\n}\n\nfunction getOutputScale(ctx) {\n\tlet devicePixelRatio = window.devicePixelRatio || 1;\n\tlet backingStoreRatio = ctx.webkitBackingStorePixelRatio ||\n\t\tctx.mozBackingStorePixelRatio ||\n\t\tctx.msBackingStorePixelRatio ||\n\t\tctx.oBackingStorePixelRatio ||\n\t\tctx.backingStorePixelRatio || 1;\n\tlet pixelRatio = devicePixelRatio / backingStoreRatio;\n\treturn {\n\t\tsx: pixelRatio,\n\t\tsy: pixelRatio,\n\t\tscaled: pixelRatio !== 1\n\t};\n}\n\nfunction roundToDivide(x, div) {\n\tlet r = x % div;\n\treturn r === 0 ? x : Math.round(x - r + div);\n}\n","/* eslint-disable no-empty */\n/* eslint-disable no-unused-vars */\nimport PDFJSAnnotate from '../PDFJSAnnotate';\nimport appendChild from '../render/appendChild';\nimport { addEventListener } from './event';\nimport {\n\tBORDER_COLOR,\n\tdisableUserSelect,\n\tenableUserSelect,\n\tfindSVGAtPoint,\n\tgetMetadata,\n\tgetOffset,\n\tscaleDown,\n\tscaleUp,\n\tgetAnnotationRect\n} from './utils';\n\nlet _enabled = false;\nlet _type;\nlet overlay;\nlet originY;\nlet originX;\nlet _rects;\nlet _svg;\nlet _target;\nlet _annotation;\nlet _selectedText;\nlet _topPos;\nlet _endPos;\nlet _inputHeight;\nlet _order;\n/**\n * Get the current window selection as rects\n *\n * @return {Array} An Array of rects\n */\nfunction getSelectionRects() {\n\ttry {\n\t\tlet selection = window.getSelection();\n\t\tlet range = selection.getRangeAt(0);\n\t\tlet rects = range.getClientRects();\n\n\t\tif (rects.length > 0 &&\n        rects[0].width > 0 &&\n        rects[0].height > 0) {\n\t\t\treturn rects;\n\t\t}\n\t} catch (e) {}\n  \n\treturn null;\n}\n\n/**\n * Handle document.mousedown event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleDocumentMousedown(e) {\n\tlet svg;\n\tif (_type === 'select' || !(svg = findSVGAtPoint(e.clientX, e.clientY))) {\n\t\t// hide text bool buttons\n\t\tif(!e.target.classList.contains('textToolBtn') && \n        !e.target.classList.contains('svg-inline--fa') &&\n        !e.target.parentElement.classList.contains('svg-inline--fa')){\n\t\t\tlet textTool = document.getElementById('textTool');\n\t\t\ttextTool.style.visibility = 'hidden';\n\t\t}\n\t\t// Hide add new comment form\n\t\tlet newCommentWrapper = document.getElementById('add-new-comment');\n\t\tif(newCommentWrapper && newCommentWrapper.style.display != 'none'){\n\t\t\tlet validTarget = hasAParentWithClass(e.target, 'add-new-comment');\n\t\t\tlet comment = document.getElementById('comment-text-area').value;\n\t\t\tif(!validTarget && comment.replace(/\\s/g, '').length == 0)\n\t\t\t\tcancelCommentText();\n\t\t}\n\t\t// Unselect highlight comment\n\t\tif(!e.target.classList.contains('comment-highlight-selected')){\n\t\t\tlet validTarget = hasAParentWithClass(e.target, 'comment-card-selected');\n\t\t\tif(!validTarget)\n\t\t\t\tunselectHighlightComment();\n\t\t}\n\t\treturn;\n\t}\n\n\tlet rect = svg.getBoundingClientRect();\n\toriginY = e.clientY;\n\toriginX = e.clientX;\n\n\toverlay = document.createElement('div');\n\toverlay.style.position = 'absolute';\n\toverlay.style.top = `${originY - rect.top}px`;\n\toverlay.style.left = `${originX - rect.left}px`;\n\toverlay.style.border = `3px solid ${BORDER_COLOR}`;\n\toverlay.style.borderRadius = '3px';\n\tsvg.parentNode.appendChild(overlay);\n  \n\tdocument.addEventListener('mousemove', handleDocumentMousemove);\n\tdisableUserSelect();\n}\n\nfunction hasAParentWithClass(element, className) {\n\tfor(let i = 0; i <= 5; i++){\n\t\tif (element.classList.contains(className)) \n\t\t\treturn true;\n\t\telse\n\t\t\telement = element.parentNode;\n\t}\n\treturn false;\n\t// if (element.classList.contains(className)) return true;\n\t// return element.parentNode && hasAParentWithClass(element.parentNode, className);\n}\n\n/**\n * Handle document.mousemove event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleDocumentMousemove(e) {\n\tlet svg = overlay.parentNode.querySelector('svg.annotationLayer');\n\tlet rect = svg.getBoundingClientRect();\n\n\tif (originX + (e.clientX - originX) < rect.right) {\n\t\toverlay.style.width = `${e.clientX - originX}px`;\n\t}\n\n\tif (originY + (e.clientY - originY) < rect.bottom) {\n\t\toverlay.style.height = `${e.clientY - originY}px`;\n\t}\n}\n\n/**\n * Handle document.mouseup event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleDocumentMouseup(e) {\n\tif(e.target.parentElement.classList.contains('textLayer')){\n    \n\t\tlet rects;\n\t\tif (_type === 'select' && (rects = getSelectionRects())) {\n    \n\t\t\tlet text = window\n\t\t\t\t.getSelection()\n\t\t\t\t.toString()\n\t\t\t\t.trim();\n\t\t\t// Display text tool bar if text is selected.\n\t\t\tif (text) {\n\t\t\t\tlet textTool = document.getElementById('textTool');\n\t\t\t\tlet posX = rects[rects.length - 1].left + (rects[rects.length - 1].width / 2);\n\t\t\t\tlet posY = rects[rects.length - 1].top + 20;\n\t\t\t\ttextTool.style =\n          'position: absolute; top: ' +\n          posY +\n          'px; left: ' +\n          posX +\n          'px;';\n\n\t\t\t\t_rects = rects;\n\t\t\t\t_svg = findSVGAtPoint(rects[0].left, rects[0].top);\n\t\t\t\t_target = e.target;\n\t\t\t\t_selectedText = text;\n\t\t\t} else {\n\t\t\t\t// Display different tool bar\n\t\t\t}\n\t\t} \n\t}\n}\n\n/**\n * Handle document.keyup event\n *\n * @param {Event} e The DOM event to handle\n */\nfunction handleDocumentKeyup(e) {\n\t// Cancel rect if Esc is pressed\n\tif (e.keyCode === 27) {\n\t\tlet selection = window.getSelection();\n\t\tselection.removeAllRanges();\n\t\tif (overlay && overlay.parentNode) {\n\t\t\toverlay.parentNode.removeChild(overlay);\n\t\t\toverlay = null;\n\t\t\tdocument.removeEventListener('mousemove', handleDocumentMousemove);\n\t\t}\n\t}\n}\n\n/**\n * Save a highlight annotation\n */\nexport async function highlightText(type) {\n\tlet svg = _svg; //findSVGAtPoint(rects[0].left, rects[0].top);\n\tlet rects = _rects;\n\tlet annotation;\n\n\tif (!svg) {\n\t\treturn;\n\t}\n\n\tlet boundingRect = svg.getBoundingClientRect();\n  \n\tlet color = 'FFFF00';\n\tif(type == 'strikeout')\n\t\tcolor = 'FF0000';\n\t// Initialize the annotation\n\tannotation = {\n\t\ttype,\n\t\tcolor,\n\t\trectangles: [...rects].map((r) => {\n\t\t\tlet offset = 0;\n\t\t\tif(type == 'strikeout')\n\t\t\t\toffset = r.height / 2;\n\t\t\treturn scaleDown(svg, {\n\t\t\t\ty: (r.top + offset) - boundingRect.top,\n\t\t\t\tx: r.left - boundingRect.left,\n\t\t\t\twidth: r.width,\n\t\t\t\theight: r.height\n\t\t\t});\n\t\t}).filter((r) => r.width > 0 && r.height > 0 && r.x > -1 && r.y > -1)\n\t};\n  \n  \n\t// Short circuit if no rectangles exist\n\tif (annotation.rectangles.length === 0) {\n\t\treturn;\n\t}\n\n\tif(annotation.rectangles.length > 2){\n\t\tannotation.rectangles = removeMinHeigthRects(annotation.rectangles);\n\t}\n\n\tlet { documentId, pageNumber } = getMetadata(svg);\n\n\tannotation.top = parseInt(_target.style.top.substring(0, _target.style.top.length - 2));\n\tannotation.pageNum = pageNumber;\n\tannotation.pageHeight = svg.getAttribute('height');\n\t_annotation = annotation;\n  \n  \n\t// Add the annotation\n\tawait PDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, pageNumber, annotation)\n\t\t.then((annotation) => {\n\t\t\tappendChild(svg, annotation);\n\t\t\thideTextToolBar();\n\t\t});\n}\n\nfunction removeMinHeigthRects(arr) {\n\tlet min = Math.min(...arr.map(a => a.height));\n\treturn arr.filter(a => a.height != min);\n}\n\nfunction hideTextToolBar(){\n\tlet textTool = document.getElementById('textTool');\n\ttextTool.style.visibility = 'hidden';\n}\n\nfunction updateCommentPositions(){\n\tlet commentCards = document.querySelectorAll('.comment-card');\n\tlet commentHighlights = document.querySelectorAll(\"g[data-pdf-annotate-type='comment-highlight']\");\n\tlet highlightArr = Array.prototype.slice.call(commentHighlights);\n\t// Sort the highlights\n\thighlightArr.sort(compareTopAttributes);\n\t// Get order of the current highlight\n\t_order = highlightArr.findIndex(item => {\n\t\treturn item.dataset.pdfAnnotateId == _annotation.uuid;\n\t});\n\n\tif(!hasEnoughSpace(commentCards)){\n\t\t// Update comment positions\n\n\t\t// get add new form's top position\n\t\tlet svg = _svg;\n\t\tlet rectTop = parseInt(_target.style.top.substring(0, _target.style.top.length - 2));\n\t\tlet svgHeight = svg.getAttribute('height');\n\t\tlet svgPageNum = svg.getAttribute('data-pdf-annotate-page');\n\t\tlet svgTop = 0;\n\t\tif(svgPageNum > 1)\n\t\t\tsvgTop += ((svgPageNum - 1) * svgHeight);\n\t\tlet topPos = svgTop + rectTop - 35;\n\t\tlet endPos = topPos + 105;\n\n\t\tif(_order == 0){\n\t\t\t// Move down all comment cards\n\t\t\t//moveDownCommentCards(commentCards, 0, commentCards.length - 1, topPos, endPos);\n\t\t\tmoveDownFromEndPos(commentCards, 0, endPos);\n\t\t} else if(_order == highlightArr.length - 1){\n\t\t\t// Move up all comment cards\n\t\t\t//moveUpCommentCards(commentCards, commentCards.length - 1, 0, topPos, endPos);\n\t\t\tmoveUpFromTopPos(commentCards, commentCards.length - 1, topPos);\n\t\t} else {\n\t\t\t// Move up commentCards[0] -> commentCards[i - 1]\n\t\t\t//moveUpCommentCards(commentCards, _order - 1, 0, topPos, endPos)\n\t\t\tlet upperTop = parseInt(commentCards[_order - 1].style.top.substring(0, commentCards[_order - 1].style.top.length - 2));\n\t\t\tlet upperEnd = upperTop + commentCards[_order - 1].offsetHeight;\n\t\t\t// Check if move up is necessary\n\t\t\tif(upperEnd > (topPos - 10)){\n\t\t\t\tmoveUpFromTopPos(commentCards, _order - 1, topPos);\n\t\t\t} else {\n\t\t\t\t// Check if move down is necessary\n\t\t\t\tlet commentId = commentCards[_order - 1].getAttribute('highlight-id');\n\t\t\t\tlet g = getHighlightByCommentId(commentId);\n\t\t\t\tlet gTop = parseInt(g.getAttribute('top')) - 35;\n\t\t\t\tif(g.getAttribute('page-num') > 1)\n\t\t\t\t\tgTop += ((g.getAttribute('page-num') - 1) * g.getAttribute('page-height'));\n\t\t\t\tif(upperTop < gTop){\n\t\t\t\t\tmoveDownToTopPos(commentCards, _order - 1, topPos);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Move down commentCards[i] -> commentCards[commentCards.length - 1]\n\t\t\t//moveDownCommentCards(commentCards, _order, commentCards.length, topPos, endPos);\n\t\t\tlet lowerTop = parseInt(commentCards[_order].style.top.substring(0, commentCards[_order].style.top.length - 2));\n\t\t\tif(lowerTop < (endPos + 10)){\n\t\t\t\tmoveDownFromEndPos(commentCards, _order, endPos);\n\t\t\t} else {\n\t\t\t\t// Check if move up is necessary\n\t\t\t\tlet commentId = commentCards[_order].getAttribute('highlight-id');\n\t\t\t\tlet g = getHighlightByCommentId(commentId);\n\t\t\t\tlet gTop = parseInt(g.getAttribute('top')) - 35;\n\t\t\t\tif(g.getAttribute('page-num') > 1)\n\t\t\t\t\tgTop += ((g.getAttribute('page-num') - 1) * g.getAttribute('page-height'));\n\t\t\t\tif(lowerTop > gTop){\n\t\t\t\t\tmoveUpToEndPos(commentCards, _order, endPos);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function updatePositionsAfterCommentAdded(){\n\tlet newComment = document.querySelector(\".comment-card[highlight-id='\"+ _annotation.uuid +\"']\");\n\tlet commentCards = document.querySelectorAll('.comment-card');\n\tlet endPos = parseInt(newComment.getAttribute('top-position')) + newComment.offsetHeight;\n\tif(_order < (commentCards.length - 1))\n\t\tmoveUpToEndPos(commentCards, _order + 1, endPos);\n\tnewComment.addEventListener('click', handleCommentCardClick);\n}\n\nexport function updatePositionsAfterCommentDeleted(){\n\n}\n\nfunction moveUpFromTopPos(commentCards, startIndex, topPos){\n\t// Get start index card's position\n\tlet adjTop = parseInt(commentCards[startIndex].style.top.substring(0, commentCards[startIndex].style.top.length - 2));\n\tlet adjEnd = adjTop + commentCards[startIndex].offsetHeight;\n\t// Move the start index card up first\n\tcommentCards[startIndex].style.top = adjTop - (adjEnd - topPos) - 10 + 'px';\n\tcommentCards[startIndex].setAttribute('top-position', adjTop - (adjEnd - topPos) - 10);\n\tif(startIndex > 0){\n\t\tfor(let m = startIndex - 1; m >= 0; m--){\n\t\t\tlet previousTop = parseInt(commentCards[m + 1].style.top.substring(0, commentCards[m + 1].style.top.length - 2));\n\t\t\tlet thisTop = parseInt(commentCards[m].style.top.substring(0, commentCards[m].style.top.length - 2));\n\t\t\tlet thisEnd = thisTop + commentCards[m].offsetHeight;\n\t\t\tif(thisEnd > (previousTop - 10)){\n\t\t\t\tcommentCards[m].style.top = thisTop - (thisEnd - previousTop) - 10 + 'px';\n\t\t\t\tcommentCards[m].setAttribute('top-position', thisTop - (thisEnd - previousTop) - 10);\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction moveUpToEndPos(commentCards, startIndex, endPos){\n\n\tlet commentId = commentCards[startIndex].getAttribute('highlight-id');\n\tlet g = getHighlightByCommentId(commentId);\n\tlet gTop = parseInt(g.getAttribute('top')) - 35;\n\tif(g.getAttribute('page-num') > 1)\n\t\tgTop += ((g.getAttribute('page-num') - 1) * g.getAttribute('page-height'));\n\n\tlet desiredTop = gTop >= (endPos + 10) ? gTop : (endPos + 10) ;\n\t// Move start index card up\n\tcommentCards[startIndex].style.top = desiredTop + 'px';\n\tcommentCards[startIndex].setAttribute('top-position', desiredTop);\n\n\t// let adjTop = parseInt(commentCards[startIndex].style.top.substring(0, commentCards[startIndex].style.top.length - 2));\n\t// commentCards[startIndex].style.top = adjTop - (adjTop - endPos) + 10 + \"px\";\n\t// commentCards[startIndex].setAttribute(\"top-position\", adjTop - (adjTop - endPos) + 10);\n\n\tif(commentCards.length > (startIndex + 1)){\n\n\t\tfor(let n = startIndex + 1; n < commentCards.length; n++){\n\t\t\tlet previousTop = parseInt(commentCards[n - 1].style.top.substring(0, commentCards[n - 1].style.top.length - 2));\n\t\t\tlet previousEnd = previousTop + commentCards[n - 1].offsetHeight;\n\t\t\tlet thisTop = parseInt(commentCards[n].style.top.substring(0, commentCards[n].style.top.length - 2));\n      \n\t\t\t// Check if move down is necessary\n\t\t\tif(thisTop > (previousEnd + 10)){\n\t\t\t\tlet thisCommentId = commentCards[n].getAttribute('highlight-id');\n\t\t\t\tlet thisG = getHighlightByCommentId(thisCommentId);\n\t\t\t\tlet thisGTop = parseInt(thisG.getAttribute('top')) - 35;\n\t\t\t\tif(thisG.getAttribute('page-num') > 1)\n\t\t\t\t\tthisGTop += ((thisG.getAttribute('page-num') - 1) * thisG.getAttribute('page-height'));\n\t\t\t\tif(thisTop > thisGTop){\n\t\t\t\t\tlet thisDesiredTop = thisGTop >= (previousEnd + 10) ? thisGTop : (previousEnd + 10) ;\n\t\t\t\t\tcommentCards[n].style.top = thisDesiredTop + 'px';\n\t\t\t\t\tcommentCards[n].setAttribute('top-position', thisDesiredTop);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction moveDownToTopPos(commentCards, startIndex, topPos){\n\t// Get start index card's position\n\tlet adjTop = parseInt(commentCards[startIndex].style.top.substring(0, commentCards[startIndex].style.top.length - 2));\n\tlet adjEnd = adjTop + commentCards[startIndex].offsetHeight;\n\t// Check if move down is necessary\n\tlet commentId = commentCards[startIndex].getAttribute('highlight-id');\n\tlet g = getHighlightByCommentId(commentId);\n\tlet gTop = parseInt(g.getAttribute('top')) - 35;\n\tif(g.getAttribute('page-num') > 1)\n\t\tgTop += ((g.getAttribute('page-num') - 1) * g.getAttribute('page-height'));\n\t// Only move cards down if the upper card is higher that its highlight\n\tif(adjTop < gTop ){\n\t\tlet desiredTop = gTop <= (adjTop + (topPos - adjEnd) - 10) ? gTop : (adjTop + (topPos - adjEnd) - 10) ;\n\t\t// Move upper adjacent card down\n\t\tcommentCards[startIndex].style.top = desiredTop + 'px';\n\t\tcommentCards[startIndex].setAttribute('top-position', desiredTop);\n\t\t// Move other cards down\n\t\tif(startIndex > 0){\n\t\t\tfor(let n = startIndex - 1; n >= 0; n--){\n\t\t\t\tlet previousTop = parseInt(commentCards[n + 1].style.top.substring(0, commentCards[n + 1].style.top.length - 2));\n\t\t\t\t//let previousEnd = previousTop + commentCards[n + 1].offsetHeight;\n\t\t\t\tlet thisTop = parseInt(commentCards[n].style.top.substring(0, commentCards[n].style.top.length - 2));\n\t\t\t\tlet thisEnd = thisTop + commentCards[n].offsetHeight;\n\t\t\t\t// Check if move down is necessary\n\t\t\t\tif(thisEnd < (previousTop - 10)){\n\t\t\t\t\tlet thisCommentId = commentCards[n].getAttribute('highlight-id');\n\t\t\t\t\tlet thisG = getHighlightByCommentId(thisCommentId);\n\t\t\t\t\tlet thisGTop = parseInt(thisG.getAttribute('top')) - 35;\n\t\t\t\t\tif(thisG.getAttribute('page-num') > 1)\n\t\t\t\t\t\tthisGTop += ((thisG.getAttribute('page-num') - 1) * thisG.getAttribute('page-height'));\n\t\t\t\t\tif(thisTop < thisGTop){\n\t\t\t\t\t\tlet thisDesiredTop = thisGTop <= (thisTop + (previousTop - thisEnd) - 10) ? thisGTop : (thisTop + (previousTop - thisEnd) - 10) ;\n\t\t\t\t\t\tcommentCards[n].style.top = thisDesiredTop + 'px';\n\t\t\t\t\t\tcommentCards[n].setAttribute('top-position', thisDesiredTop);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n  \n}\n\nfunction moveDownFromEndPos(commentCards, startIndex, endPos){\n\t// Move the start index card down first\n\t//let adjTop = parseInt(commentCards[startIndex].style.top.substring(0, commentCards[startIndex].style.top.length - 2));\n\tcommentCards[startIndex].style.top = endPos + 10 + 'px';\n\tcommentCards[startIndex].setAttribute('top-position', endPos + 10);\n\t// Move other cards down ward\n\tif(commentCards.length > (startIndex + 1)){\n\t\tfor(let j = startIndex + 1; j < commentCards.length; j++){\n\t\t\tlet previousTop = parseInt(commentCards[j - 1].style.top.substring(0, commentCards[j - 1].style.top.length - 2));\n\t\t\tlet previousEnd = previousTop + commentCards[j - 1].offsetHeight;\n\t\t\tlet thisTop = parseInt(commentCards[j].style.top.substring(0, commentCards[j].style.top.length - 2));\n\t\t\tif(thisTop < (previousEnd + 10)){\n\t\t\t\tcommentCards[j].style.top = thisTop + (previousEnd - thisTop) + 10 + 'px';\n\t\t\t\tcommentCards[j].setAttribute('top-position', thisTop + (previousEnd - thisTop) + 10 );\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction moveUpCommentCards(commentCards, startIndex, endIndex, topPos, endPos){\n\t// Get adjacent card's position\n\tlet adjTop = parseInt(commentCards[startIndex].style.top.substring(0, commentCards[startIndex].style.top.length - 2));\n\tlet adjEnd = adjTop + commentCards[startIndex].offsetHeight;\n\t// Check if move up is necessary\n\tif(adjEnd > (topPos - 10)){\n\t\t// Move the upper adjacent card up first\n\t\tcommentCards[startIndex].style.top = adjTop - (adjEnd - topPos) - 10 + 'px';\n\t\tcommentCards[startIndex].setAttribute('top-position', adjTop - (adjEnd - topPos) - 10);\n\t\t// Move other cards upward\n\t\tif(startIndex > 0){\n\t\t\tfor(let m = startIndex - 1; m >= 0; m--){\n\t\t\t\tlet previousTop = parseInt(commentCards[m + 1].style.top.substring(0, commentCards[m + 1].style.top.length - 2));\n\t\t\t\tlet thisTop = parseInt(commentCards[m].style.top.substring(0, commentCards[m].style.top.length - 2));\n\t\t\t\tlet thisEnd = thisTop + commentCards[m].offsetHeight;\n\t\t\t\tif(thisEnd > (previousTop - 10)){\n\t\t\t\t\tcommentCards[m].style.top = thisTop - (thisEnd - previousTop) - 10 + 'px';\n\t\t\t\t\tcommentCards[m].setAttribute('top-position', thisTop - (thisEnd - previousTop) - 10);\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// Check if move down is necessary\n\t\tlet commentId = commentCards[startIndex].getAttribute('highlight-id');\n\t\tlet g = getHighlightByCommentId(commentId);\n\t\tlet gTop = parseInt(g.getAttribute('top')) - 35;\n\n\t\tif(adjTop < gTop){\n\t\t\tlet desiredTop = gTop <= (adjTop + (topPos - adjEnd) - 10) ? gTop : (adjTop + (topPos - adjEnd) - 10) ;\n\t\t\t// Move upper adjacent card down\n\t\t\tcommentCards[startIndex].style.top = desiredTop + 'px';\n\t\t\tcommentCards[startIndex].setAttribute('top-position', desiredTop);\n\t\t\t// Move other cards down\n\t\t\tif(startIndex > 0){\n\t\t\t\tfor(let n = startIndex - 1; n >= 0; n--){\n\t\t\t\t\tlet previousTop = parseInt(commentCards[n + 1].style.top.substring(0, commentCards[n + 1].style.top.length - 2));\n\t\t\t\t\tlet previousEnd = previousTop + commentCards[n + 1].offsetHeight;\n\t\t\t\t\tlet thisTop = parseInt(commentCards[n].style.top.substring(0, commentCards[n].style.top.length - 2));\n\t\t\t\t\tlet thisEnd = thisTop + commentCards[n].offsetHeight;\n\t\t\t\t\t// Check if move down is necessary\n\t\t\t\t\tif(thisEnd < (previousTop - 10)){\n\t\t\t\t\t\tlet thisCommentId = commentCards[n].getAttribute('highlight-id');\n\t\t\t\t\t\tlet thisG = getHighlightByCommentId(thisCommentId);\n\t\t\t\t\t\tlet thisGTop = parseInt(thisG.getAttribute('top')) - 35;\n\t\t\t\t\t\tif(thisTop < thisGTop){\n\t\t\t\t\t\t\tlet thisDesiredTop = thisGTop <= (thisTop + (previousTop - thisEnd) - 10) ? gTop : (thisTop + (previousTop - thisEnd) - 10) ;\n\t\t\t\t\t\t\tcommentCards[n].style.top = thisDesiredTop + 'px';\n\t\t\t\t\t\t\tcommentCards[n].setAttribute('top-position', thisDesiredTop);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n  \n}\n\nfunction moveDownCommentCards(commentCards, startIndex, endIndex, topPos, endPos){\n\t// Move the upper adjacent card down first\n\tlet adjTop = parseInt(commentCards[startIndex].style.top.substring(0, commentCards[startIndex].style.top.length - 2));\n\tif(adjTop < (endPos + 10)){\n\t\tcommentCards[startIndex].style.top = endPos + 10 + 'px';\n\t\tcommentCards[startIndex].setAttribute('top-position', endPos + 10);\n\n\t\t// Move other cards down ward\n\t\tif(commentCards.length > (startIndex + 1)){\n\t\t\tfor(let j = startIndex + 1; j < commentCards.length; j++){\n\t\t\t\tlet previousTop = parseInt(commentCards[j - 1].style.top.substring(0, commentCards[j - 1].style.top.length - 2));\n\t\t\t\tlet previousEnd = previousTop + commentCards[j - 1].offsetHeight;\n\t\t\t\tlet thisTop = parseInt(commentCards[j].style.top.substring(0, commentCards[j].style.top.length - 2));\n\t\t\t\tif(thisTop < (previousEnd + 10)){\n\t\t\t\t\tcommentCards[j].style.top = thisTop + (previousEnd - thisTop) + 10 + 'px';\n\t\t\t\t\tcommentCards[j].setAttribute('top-position', thisTop + (previousEnd - thisTop) + 10 );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// Check if move up is necessary\n\t\tlet commentId = commentCards[startIndex].getAttribute('highlight-id');\n\t\tlet g = getHighlightByCommentId(commentId);\n\t\tlet gTop = parseInt(g.getAttribute('top')) - 35;\n\n\t\tif(adjTop > gTop){\n\t\t\tlet desiredTop = gTop >= (endPos + 10) ? gTop : (endPos + 10) ;\n\t\t\t// Move lower adjacent card up\n\t\t\tcommentCards[startIndex].style.top = desiredTop + 'px';\n\t\t\tcommentCards[startIndex].setAttribute('top-position', desiredTop);\n\t\t\t// Move other cards up\n\t\t\tif(commentCards.length > (startIndex + 1)){\n\t\t\t\tfor(let n = startIndex + 1; n < commentCards.length; n++){\n\t\t\t\t\tlet previousTop = parseInt(commentCards[n - 1].style.top.substring(0, commentCards[n - 1].style.top.length - 2));\n\t\t\t\t\tlet previousEnd = previousTop + commentCards[n - 1].offsetHeight;\n\t\t\t\t\tlet thisTop = parseInt(commentCards[n].style.top.substring(0, commentCards[n].style.top.length - 2));\n\t\t\t\t\t//let thisEnd = thisTop + commentCards[n].offsetHeight;\n\t\t\t\t\t// Check if move down is necessary\n\t\t\t\t\tif(thisTop > (previousEnd + 10)){\n\t\t\t\t\t\tlet thisCommentId = commentCards[n].getAttribute('highlight-id');\n\t\t\t\t\t\tlet thisG = getHighlightByCommentId(thisCommentId);\n\t\t\t\t\t\tlet thisGTop = parseInt(thisG.getAttribute('top')) - 35;\n\t\t\t\t\t\tif(thisTop > thisGTop){\n\t\t\t\t\t\t\tlet thisDesiredTop = thisGTop >= (previousEnd + 10) ? thisGTop : (previousEnd + 10) ;\n\t\t\t\t\t\t\tcommentCards[n].style.top = thisDesiredTop + 'px';\n\t\t\t\t\t\t\tcommentCards[n].setAttribute('top-position', thisDesiredTop);\n\t\t\t\t\t\t}\n            \n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction compareTopAttributes(a, b){\n\tlet top1 = parseInt(a.getAttribute('top'));\n\tif(a.getAttribute('page-num') > 1)\n\t\ttop1 += ((a.getAttribute('page-num') - 1) * a.getAttribute('page-height'));\n  \n\tlet top2 = parseInt(b.getAttribute('top'));\n\tif(b.getAttribute('page-num') > 1)\n\t\ttop2 += ((b.getAttribute('page-num') - 1) * b.getAttribute('page-height'));\n\tif (top1 > top2) return 1;\n\tif (top2 > top1) return -1;\n\tif (top2 == top1) {\n\t\t// compare order attributes\n\t\tlet order1 = parseInt(a.getAttribute('order'));\n\t\tlet order2 = parseInt(b.getAttribute('order'));\n\t\tif (order1 > order2) return 1;\n\t\tif (order2 > order1) return -1;\n\t}\n\treturn 0;\n}\n\nfunction hasEnoughSpace(commentCards){\n\tif(commentCards.length > 0){\n\t\tlet svg = _svg;\n\t\tlet rectTop = parseInt(_target.style.top.substring(0, _target.style.top.length - 2));\n\t\tlet svgHeight = svg.getAttribute('height');\n\t\tlet svgPageNum = svg.getAttribute('data-pdf-annotate-page');\n    \n\t\tlet svgTop = 0;\n\t\tif(svgPageNum > 1)\n\t\t\tsvgTop += ((svgPageNum - 1) * svgHeight);\n\t\tlet topPos = svgTop + rectTop - 35;\n\t\tlet endPos = topPos + 105;\n\n\t\t// Check first and last position\n\t\tlet firstTopPos = parseInt(commentCards[0].getAttribute('top-position'));\n\t\tlet lastEndPos = parseInt(commentCards[commentCards.length - 1].getAttribute('top-position')) + \n                      parseInt(commentCards[commentCards.length - 1].offsetHeight);\n\n\t\tif(endPos < firstTopPos || topPos > lastEndPos)\n\t\t\treturn true;\n\t\tif(commentCards.length > 1){\n\t\t\tfor(let i = 0; i < commentCards.length - 1; i++){\n\t\t\t\tlet thisTopPos = parseInt(commentCards[i].getAttribute('top-position'));\n\t\t\t\tlet thisEndPos = thisTopPos + commentCards[i].offsetHeight;\n  \n\t\t\t\tlet nextTopPos = parseInt(commentCards[i + 1].getAttribute('top-position'));\n\t\t\t\t//let nextEndPos = nextTopPos + commentCards[i + 1].offsetHeight;\n  \n\t\t\t\tif(topPos > thisEndPos && endPos < nextTopPos){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n    \n\t\treturn false;\n\t}\n\treturn true;\n}\n\n\nfunction updateCommentsAfterSave(){\n\n}\n\nfunction getHighlightByCommentId(commentId){\n\treturn  document.querySelector(\"g[data-pdf-annotate-id='\"+ commentId +\"']\");\n}\n\n// Add comment tab to the pdf viewer\nfunction displayAddNewCommentForm(){\n\tlet newCommentWrapper = document.getElementById('add-new-comment');\n\n\tnewCommentWrapper.style.visibility = 'visible';\n\n\tlet svg = _svg;\n\tlet rectTop = parseInt(_target.style.top.substring(0, _target.style.top.length - 2));\n\tlet svgHeight = svg.getAttribute('height');\n\tlet svgPageNum = svg.getAttribute('data-pdf-annotate-page');\n  \n\tlet svgTop = 0;\n\tif(svgPageNum > 1)\n\t\tsvgTop += ((svgPageNum - 1) * svgHeight);\n\tlet topPos = svgTop + rectTop - 35;\n\tnewCommentWrapper.style =\n    'position: absolute; right: 5px; top: ' + topPos + 'px;';\n\thideTextToolBar();\n\tlet textArea = document.getElementById('comment-text-area');\n\ttextArea.focus();\n\t_inputHeight = parseInt(textArea.style.height.substring(0, textArea.style.height.length - 2));\n\n\ttextArea.addEventListener('keydown', function (e){\n\t\tlet commentCards = document.querySelectorAll('.comment-card');\n\t\tif(commentCards.length > 0){\n\t\t\tsetTimeout(function(){ \n\t\t\t\tlet newHeight = parseInt(textArea.style.height.substring(0, textArea.style.height.length - 2));\n\t\t\t\tlet newCommentWrapper = document.getElementById('add-new-comment');\n\t\t\t\tlet topPos = parseInt(newCommentWrapper.style.top.substring(0, newCommentWrapper.style.top.length - 2));\n\t\t\t\tlet endPos = topPos + newCommentWrapper.offsetHeight;\n\t\t\t\tif(_inputHeight < newHeight){\n\t\t\t\t\tif(_order <= commentCards.length - 1 )\n\t\t\t\t\t\tmoveDownFromEndPos(commentCards, _order, endPos);\n\t\t\t\t} else if(_inputHeight > newHeight){\n\t\t\t\t\tif(_order < commentCards.length)\n\t\t\t\t\t\tmoveUpToEndPos(commentCards, _order, endPos);\n\t\t\t\t}\n\t\t\t\t_inputHeight = newHeight;\n\t\t\t}, 100);\n\t\t}\n\t});\n\n}\n\nexport function cancelCommentText(){\n\tlet { documentId, pageNumber } = getMetadata(_svg);\n\tlet newCommentWrapper = document.getElementById('add-new-comment');\n\tlet topPos = parseInt(newCommentWrapper.style.top.substring(0, newCommentWrapper.style.top.length - 2));\n\tlet endPos  = topPos + newCommentWrapper.offsetHeight;\n\tnewCommentWrapper.style.display = 'none';\n\tlet commentCards = document.querySelectorAll('.comment-card');\n\tif(commentCards.length > 0){\n\t\tif(_order <= (commentCards.length - 1)){\n\t\t\tmoveUpToEndPos(commentCards, _order, topPos);\n\t\t\tif(_order > 0){\n\t\t\t\tlet orderTopPos = parseInt(commentCards[_order].style.top.substring(0, commentCards[_order].style.top.length - 2)); \n\t\t\t\tmoveDownToTopPos(commentCards, _order - 1, orderTopPos);\n\t\t\t}\n\t\t}\n\t\tif(_order == commentCards.length){\n\t\t\tmoveDownToTopPos(commentCards, _order - 1, endPos);\n\t\t}\n\t}\n\t// Remove the annotation\n\tPDFJSAnnotate.getStoreAdapter().deleteAnnotation(documentId, _annotation.uuid)\n\t\t.then((isDeleted) => {\n\t\t\tif(isDeleted){\n\t\t\t\t//remove highlight in UI\n\t\t\t\tdocument.querySelector(\"g[data-pdf-annotate-id='\"+ _annotation.uuid +\"']\").remove();\n\t\t\t\t_annotation = null;\n\t\t\t}\n      \n\t\t});\n}\n\nexport async function addCommentText(commentContent, documentId){\n\tlet commentWrapper = document.getElementById('add-new-comment');\n\tlet topPos = parseInt(commentWrapper.style.top.substring(0, commentWrapper.style.top.length - 2));\n\tlet annotation = _annotation;\n\treturn await PDFJSAnnotate.getStoreAdapter().addComment(documentId,\n\t\tannotation,\n\t\tcommentContent,\n\t\t_selectedText,\n\t\ttopPos);\n}\n\nexport async function commentText(){\n\t// Highlight the text first\n\tawait highlightText('comment-highlight');\n\t// Update positions of comment boxes\n\tupdateCommentPositions();\n\t// Display add new form\n\tdisplayAddNewCommentForm();\n\tevent.stopPropagation();\n}\n/**\n * Enable rect behavior\n */\nexport function enableSelect(type) {\n\t_type = type;\n  \n\tif (_enabled) { return; }\n\n\t_enabled = true;\n\tdocument.addEventListener('mouseup', handleDocumentMouseup);\n\tdocument.addEventListener('mousedown', handleDocumentMousedown);\n\tdocument.addEventListener('keyup', handleDocumentKeyup);\n\taddEventListener('annotation:click', handleCommentAnnotationClick);\n\n\tlet commentCards = document.querySelectorAll('.comment-card');\n\tcommentCards.forEach(item => {\n\t\titem.addEventListener('click', handleCommentCardClick);\n\t});\n  \n\t//document.getElementById(\"restore\").addEventListener(\"click\", restoreCommentPositions);\n\twindow.addEventListener('beforeunload', restoreCommentPositions);\n}\n\nfunction handleCommentCardClick(){\n\tlet highlightId = this.getAttribute('highlight-id');\n\tlet highlight = document.querySelector(\"g[data-pdf-annotate-id='\"+ highlightId +\"']\");\n\thandleCommentAnnotationClick(highlight);\n}\n\nfunction unselectHighlightComment(){\n\tlet selectedHighlight = document.getElementsByClassName('comment-highlight-selected');\n\tif(selectedHighlight.length > 0)\n\t\tselectedHighlight[0].classList.remove('comment-highlight-selected');\n\tlet selectedComment = document.getElementsByClassName('comment-card-selected');\n\tif(selectedComment.length > 0)\n\t\tselectedComment[0].classList.remove('comment-card-selected');\n}\n\nasync function restoreCommentPositions(e){\n\tlet documentId = document.getElementById('viewer').getAttribute('document-id');\n\tlet highlights = document.querySelectorAll(\"g[data-pdf-annotate-type='comment-highlight']\");\n\thandleCommentAnnotationClick(highlights[0]);\n\tlet comments = await updateCommentAnnotations(documentId);\n\tconsole.log(comments);\n\tawait PDFJSAnnotate.getStoreAdapter().updateComments(documentId, comments);\n}\n\nasync function updateCommentAnnotations(documentId){\n\tlet comments = await PDFJSAnnotate.getStoreAdapter().getComments(documentId);\n\tcomments.forEach(comment => {\n\t\tlet thisCard = document.querySelector(\".comment-card[highlight-id='\"+ comment.uuid +\"']\");\n\t\tcomment.topPosition = parseInt(thisCard.getAttribute('top-position'));\n\t});\n\treturn comments;\n}\n\nfunction handleCommentAnnotationClick(target){\n\tlet text = window\n\t\t.getSelection()\n\t\t.toString()\n\t\t.trim();\n\t// Display text tool bar if text is selected.\n\tif (!text){\n\t\tlet type = target.getAttribute('data-pdf-annotate-type');\n\t\tif(type == 'comment-highlight'){\n\t\t\tlet selectedHighlight = document.getElementsByClassName('comment-highlight-selected');\n\t\t\tif(selectedHighlight.length > 0)\n\t\t\t\tselectedHighlight[0].classList.remove('comment-highlight-selected');\n\t\t\ttarget.classList.add('comment-highlight-selected');\n\n\t\t\tlet commentCards = document.querySelectorAll('.comment-card');\n\t\t\tlet commentHighlights = document.querySelectorAll(\"g[data-pdf-annotate-type='comment-highlight']\");\n\t\t\tlet highlightArr = Array.prototype.slice.call(commentHighlights);\n\t\t\t// Sort the highlights\n\t\t\thighlightArr.sort(compareTopAttributes);\n\t\t\t// Get order of the current highlight\n\t\t\t_order = highlightArr.findIndex(item => {\n\t\t\t\treturn item.dataset.pdfAnnotateId == target.getAttribute('data-pdf-annotate-id');\n\t\t\t});\n      \n\t\t\tlet gTop = parseInt(target.getAttribute('top')) - 35;\n\t\t\tlet svgHeight = parseInt(target.getAttribute('page-height'));\n\t\t\tlet svgPageNum = parseInt(target.getAttribute('page-num'));\n\t\t\tif(svgPageNum > 1)\n\t\t\t\tgTop += ((svgPageNum - 1) * svgHeight);\n\n\t\t\tlet cTop = parseInt(commentCards[_order].style.top.substring(0, commentCards[_order].style.top.length - 2));\n      \n\t\t\t// remove current selected comment card class if any\n\t\t\tlet selected = document.getElementsByClassName('comment-card-selected');\n\t\t\tif(selected.length > 0)\n\t\t\t\tselected[0].classList.remove('comment-card-selected');\n\t\t\t// Set this card as selected\n\t\t\tcommentCards[_order].classList.add('comment-card-selected');\n\n\t\t\tif(cTop != gTop){\n\t\t\t\t// Move the comment up to gTop\n\t\t\t\tcommentCards[_order].style.top = gTop + 'px';\n\t\t\t\tcommentCards[_order].setAttribute('top-position', gTop);\n\n        \n\t\t\t\tlet selected = document.getElementsByClassName('comment-card-selected');\n\t\t\t\tif(selected.length > 0)\n\t\t\t\t\tselected[0].classList.remove('comment-card-selected');\n\t\t\t\tcommentCards[_order].classList.add('comment-card-selected');\n\t\t\t\tlet endPos = gTop + commentCards[_order].offsetHeight;\n\t\t\t\tif(cTop > gTop){\n\t\t\t\t\t// Move up other uppen comments\n\t\t\t\t\tif(_order > 0)\n\t\t\t\t\t\tmoveUpFromTopPos(commentCards, _order - 1, gTop);\n\t\t\t\t\t// Move up other lower comments\n\t\t\t\t\tif(_order < commentCards.length - 1)\n\t\t\t\t\t\tmoveUpToEndPos(commentCards, _order + 1, endPos);\n\t\t\t\t} else if(cTop < gTop){\n\t\t\t\t\t// Move down other uppen comments\n\t\t\t\t\tif(_order > 0)\n\t\t\t\t\t\tmoveDownToTopPos(commentCards, _order - 1, gTop);\n\t\t\t\t\t// Move down other lower comments\n\t\t\t\t\tif(_order < commentCards.length - 1)\n\t\t\t\t\t\tmoveDownFromEndPos(commentCards, _order + 1, endPos);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n/**\n * Disable rect behavior\n */\nexport function disableSelect() {\n\tif (!_enabled) { return; }\n\n\t_enabled = false;\n\tdocument.removeEventListener('mouseup', handleDocumentMouseup);\n\tdocument.removeEventListener('mousedown', handleDocumentMousedown);\n\tdocument.removeEventListener('keyup', handleDocumentKeyup);\n}\n\n","import { addEventListener, removeEventListener, fireEvent } from './event';\nimport { disableEdit, enableEdit } from './edit';\nimport { disablePen, enablePen, setPen } from './pen';\nimport { disablePoint, enablePoint } from './point';\nimport { disableRect, enableRect } from './rect';\nimport { disableText, enableText, setText } from './text';\nimport { createPage, renderPage } from './page';\nimport { disableSelect, enableSelect, highlightText, \n\tstrikethroughText, commentText, addCommentText, \n\tcancelCommentText, updatePositionsAfterCommentAdded } from './select';\n\nexport default {\n\taddEventListener, removeEventListener, fireEvent,\n\tdisableEdit, enableEdit,\n\tdisablePen, enablePen, setPen,\n\tdisablePoint, enablePoint,\n\tdisableRect, enableRect,\n\tdisableText, enableText, setText,\n\tcreatePage, renderPage,\n\tdisableSelect, enableSelect, highlightText, strikethroughText, \n\tcommentText, addCommentText, cancelCommentText, updatePositionsAfterCommentAdded\n};\n","import StoreAdapter from './adapter/StoreAdapter';\nimport LocalStoreAdapter from './adapter/LocalStoreAdapter';\nimport render from './render';\nimport UI from './UI';\n\nexport default {\n\t/**\n   * Abstract class that needs to be defined so PDFJSAnnotate\n   * knows how to communicate with your server.\n   */\n\tStoreAdapter,\n\n\t/**\n   * Implementation of StoreAdapter that stores annotation data to localStorage.\n   */\n\tLocalStoreAdapter,\n\n\t/**\n   * Abstract instance of StoreAdapter\n   */\n\t__storeAdapter: new StoreAdapter(),\n\n\t/**\n   * Getter for the underlying StoreAdapter property\n   *\n   * @return {StoreAdapter}\n   */\n\tgetStoreAdapter() {\n\t\treturn this.__storeAdapter;\n\t},\n\n\t/**\n   * Setter for the underlying StoreAdapter property\n   *\n   * @param {StoreAdapter} adapter The StoreAdapter implementation to be used.\n   */\n\tsetStoreAdapter(adapter) {\n\t\t// TODO this throws an error when bundled\n\t\t// if (!(adapter instanceof StoreAdapter)) {\n\t\t//   throw new Error('adapter must be an instance of StoreAdapter');\n\t\t// }\n\n\t\tthis.__storeAdapter = adapter;\n\t},\n\n\t/**\n   * UI is a helper for instrumenting UI interactions for creating,\n   * editing, and deleting annotations in the browser.\n   */\n\tUI,\n\n\t/**\n   * Render the annotations for a page in the PDF Document\n   *\n   * @param {SVGElement} svg The SVG element that annotations should be rendered to\n   * @param {PageViewport} viewport The PDFPage.getViewport data\n   * @param {Object} data The StoreAdapter.getAnnotations data\n   * @return {Promise}\n   */\n\trender,\n\n\t/**\n   * Convenience method for getting annotation data\n   *\n   * @alias StoreAdapter.getAnnotations\n   * @param {String} documentId The ID of the document\n   * @param {String} pageNumber The page number\n   * @return {Promise}\n   */\n\tgetAnnotations(documentId, pageNumber) {\n\t\treturn this.getStoreAdapter().getAnnotations(documentId, pageNumber);\n\t}\n};\n","/* eslint-disable no-unused-vars */\n// Color picker component\nconst COLORS = [\n\t{hex: '#000000', name: 'Black'},\n\t{hex: '#EF4437', name: 'Red'},\n\t{hex: '#E71F63', name: 'Pink'},\n\t{hex: '#8F3E97', name: 'Purple'},\n\t{hex: '#65499D', name: 'Deep Purple'},\n\t{hex: '#4554A4', name: 'Indigo'},\n\t{hex: '#2083C5', name: 'Blue'},\n\t{hex: '#35A4DC', name: 'Light Blue'},\n\t{hex: '#09BCD3', name: 'Cyan'},\n\t{hex: '#009688', name: 'Teal'},\n\t{hex: '#43A047', name: 'Green'},\n\t{hex: '#8BC34A', name: 'Light Green'},\n\t{hex: '#FDC010', name: 'Yellow'},\n\t{hex: '#F8971C', name: 'Orange'},\n\t{hex: '#F0592B', name: 'Deep Orange'},\n\t{hex: '#F06291', name: 'Light Pink'}\n];\n\nexport default function initColorPicker(el, value, onChange) {\n\tfunction setColor(value, fireOnChange = true) {\n\t\tcurrentValue = value;\n\t\ta.setAttribute('data-color', value);\n\t\ta.style.background = value;\n\t\tif (fireOnChange && typeof onChange === 'function') {\n\t\t\tonChange(value);\n\t\t}\n\t\tclosePicker();\n\t}\n\n\tfunction togglePicker() {\n\t\tif (isPickerOpen) {\n\t\t\tclosePicker();\n\t\t} else {\n\t\t\topenPicker();\n\t\t}\n\t}\n\n\tfunction closePicker() {\n\t\tdocument.removeEventListener('keyup', handleDocumentKeyup);\n\t\tif (picker && picker.parentNode) {\n\t\t\tpicker.parentNode.removeChild(picker);\n\t\t}\n\t\tisPickerOpen = false;\n\t\ta.focus();\n\t}\n\n\tfunction openPicker() {\n\t\tif (!picker) {\n\t\t\tpicker = document.createElement('div');\n\t\t\tpicker.style.background = '#fff';\n\t\t\tpicker.style.border = '1px solid #ccc';\n\t\t\tpicker.style.padding = '2px';\n\t\t\tpicker.style.position = 'absolute';\n\t\t\tpicker.style.width = '122px';\n\t\t\tel.style.position = 'relative';\n\n\t\t\tCOLORS.map(createColorOption).forEach((c) => {\n\t\t\t\tc.style.margin = '2px';\n\t\t\t\tc.onclick = function () { setColor(c.getAttribute('data-color')); };\n\t\t\t\tpicker.appendChild(c);\n\t\t\t});\n\t\t}\n\n\t\tdocument.addEventListener('keyup', handleDocumentKeyup);\n\t\tel.appendChild(picker);\n\t\tisPickerOpen = true;\n\t}\n\n\tfunction createColorOption(color) {\n\t\tlet e = document.createElement('a');\n\t\te.className = 'color';\n\t\te.setAttribute('href', 'javascript://');\n\t\te.setAttribute('title', color.name);\n\t\te.setAttribute('data-color', color.hex);\n\t\te.style.background = color.hex;\n\t\treturn e;\n\t}\n\n\tfunction handleDocumentKeyup(e) {\n\t\tif (e.keyCode === 27) {\n\t\t\tclosePicker();\n\t\t}\n\t}\n\n\tlet picker;\n\tlet isPickerOpen = false;\n\tlet currentValue;\n\tlet a = createColorOption({hex: value});\n\ta.onclick = togglePicker;\n\tel.appendChild(a);\n\tsetColor(value, false);\n}\n","<template>\n\t<div>\n\t\t<div class=\"toolbar\">\n\t\t\t<button class=\"cursor\" type=\"button\" title=\"Cursor\" data-tooltype=\"cursor\">\n\t\t\t\t➚\n\t\t\t</button>\n\n\t\t\t<div class=\"spacer\" />\n\n\t\t\t<button class=\"rectangle\" type=\"button\" title=\"Rectangle\" data-tooltype=\"area\">\n&nbsp;\n\t\t\t</button>\n\t\t\t<button class=\"highlight\" type=\"button\" title=\"Highlight\" data-tooltype=\"highlight\">\n&nbsp;\n\t\t\t</button>\n\t\t\t<button class=\"strikeout\" type=\"button\" title=\"Strikeout\" data-tooltype=\"strikeout\">\n&nbsp;\n\t\t\t</button>\n\n\t\t\t<div class=\"spacer\" />\n\n\t\t\t<button class=\"text\" type=\"button\" title=\"Text Tool\" data-tooltype=\"text\" />\n\t\t\t<select class=\"text-size\" />\n\t\t\t<div class=\"text-color\" />\n\n\t\t\t<div class=\"spacer\" />\n\n\t\t\t<div class=\"spacer\" />\n\n\t\t\t<button class=\"comment\" type=\"button\" title=\"Comment\" data-tooltype=\"point\">\n\t\t\t\t🗨\n\t\t\t</button>\n\n\t\t\t<div class=\"spacer\" />\n\n\t\t\t<select class=\"scale\">\n\t\t\t\t<option value=\".5\">\n\t\t\t\t\t50%\n\t\t\t\t</option>\n\t\t\t\t<option value=\"1\">\n\t\t\t\t\t100%\n\t\t\t\t</option>\n\t\t\t\t<option value=\"1.33\">\n\t\t\t\t\t133%\n\t\t\t\t</option>\n\t\t\t\t<option value=\"1.5\">\n\t\t\t\t\t150%\n\t\t\t\t</option>\n\t\t\t\t<option value=\"2\">\n\t\t\t\t\t200%\n\t\t\t\t</option>\n\t\t\t</select>\n\n\t\t\t<a href=\"javascript://\" class=\"rotate-ccw\" title=\"Rotate Counter Clockwise\">⟲</a>\n\t\t\t<a href=\"javascript://\" class=\"rotate-cw\" title=\"Rotate Clockwise\">⟳</a>\n\n\t\t\t<div class=\"spacer\" />\n\n\t\t\t<a href=\"javascript://\" class=\"clear\" title=\"Clear\">×</a>\n\t\t\t<button id=\"restore\" title=\"Restore\">\n\t\t\t\tRestore\n\t\t\t</button>\n\t\t</div>\n\n\n\t\t<div id=\"rubric-wrapper\">\n\t\t\t<h4>Rubrics</h4>\n\t\t</div>\n\n\t\t<div id=\"content-wrapper\">\n\t\t\t<div id=\"viewer\" class=\"pdfViewer\" :style=\"{ width: viewerWidth + 'px' }\" :document-id=\"documentId\" />\n\t\t</div>\n\n\t\t<div id=\"comment-wrapper\">\n\t\t\t<el-card id=\"add-new-comment\" class=\"box-card add-new-comment\" style=\"width: 100%; display: none;\">\n\t\t\t\t<div slot=\"header\" class=\"clearfix\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div style=\"font-size: 15px; font-weight: bold; text-align: left;\">\n\t\t\t\t\t\t\tDat Le\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<el-input\n\t\t\t\t\t\tid=\"comment-text-area\"\n\t\t\t\t\t\tv-model=\"newComment\"\n\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\tautosize\n\t\t\t\t\t\tplaceholder=\"Add comment\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div style=\"height: 20px; margin-top: 10px;\">\n\t\t\t\t\t\t<el-button type=\"primary\" :disabled=\"newComment.replace(/\\s/g, '').length == 0\" style=\"float: left; padding: 5px;\" @click=\"addCommentText()\">\n\t\t\t\t\t\t\tComment\n\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t<el-button style=\"float: right; padding: 5px;\" @click=\"cancelCommentText()\">\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t</el-button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</el-card>\n\n\t\t\t<el-card v-for=\"(comment, idx) in comments\" :key=\"comment.uuid\" \n\t\t\t\tclass=\"box-card comment-card\"\n\t\t\t\t:highlight-id=\"comment.uuid\" \n\t\t\t\t:top-position=\"comment.topPosition\"\n\t\t\t\t:style=\"{top: comment.topPosition + 'px', width: '100%'}\"\n\t\t\t>\n\t\t\t\t<div slot=\"header\" class=\"clearfix\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div style=\"font-size: 15px; font-weight: bold; text-align: left;\">\n\t\t\t\t\t\t\tDat Le\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style=\"font-size: 12px; text-align: left;\">\n\t\t\t\t\t\t\t3:16 PM Jul 7\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<el-button style=\"right: -10px;\" class=\"action-card-btn\"\ttitle=\"Delete Comment\"\t@click=\"deleteCommentCard(comment)\">\n\t\t\t\t\t\t<i class=\"far fa-trash-alt\" />\n\t\t\t\t\t</el-button>\n\t\t\t\t\t<el-button style=\"right: 10px;\" class=\"action-card-btn\"\ttitle=\"Edit Comment\"\t@click=\"displayEditComment(comment, idx)\">\n\t\t\t\t\t\t<i class=\"far fa-edit\" />\n\t\t\t\t\t</el-button>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div v-show=\"!comment.isSelected\" \n\t\t\t\t\t\t:id=\"'comment-text-' + comment.uuid\" \n\t\t\t\t\t\tstyle=\"text-align: left; overflow-wrap: break-word; white-space: pre-wrap;\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ comment.content }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<el-input\n\t\t\t\t\t\tv-show=\"comment.isSelected == true\"\n\t\t\t\t\t\t:id=\"'comment-input-' + comment.uuid\"\n\t\t\t\t\t\t:ref=\"'comment' + comment.uuid\"\n\t\t\t\t\t\tv-model=\"comment.content\"\n\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\tautosize\n\t\t\t\t\t/>\n\t\t\t\t\t<div v-show=\"comment.isSelected == true\" style=\"height: 20px; margin-top: 10px;\">\n\t\t\t\t\t\t<el-button type=\"primary\" :disabled=\"comment.content.replace(/\\s/g, '').length == 0\" style=\"float: left; padding: 5px;\" @click=\"editCommentCard()\">\n\t\t\t\t\t\t\tComment\n\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t<el-button style=\"float: right; padding: 5px;\" @click=\"cancelCommentText()\">\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t</el-button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</el-card>\n\t\t</div> \n\n\t\t<el-button-group id=\"textTool\" style=\"display: none;\">\n\t\t\t<el-button class=\"textToolBtn\" @click=\"HighlightText()\">\n\t\t\t\t<i class=\"fas fa-highlighter\" />\n\t\t\t</el-button>\n\t\t\t<el-button class=\"textToolBtn\" @click=\"StrikethroughText()\">\n\t\t\t\t<i class=\"fas fa-strikethrough\" />\n\t\t\t</el-button>\n\t\t\t<el-button id=\"comment-text\" class=\"textToolBtn\" @click=\"CommentText()\">\n\t\t\t\t<i class=\"fas fa-comment-alt\" />\n\t\t\t</el-button>\n\t\t</el-button-group>\n\t</div>\n</template>\n\n<script>\n// @ is an alias to /src\n\n// import { PDFJS } from \"@/shared/pdf.js\";\n\n// PDFJS.workerSrc = \"/src/shared/pdf.worker.js\";\n// import {\n//   PDFLinkService,\n//   PDFPageView,\n//   PDFFindController,\n//   DefaultAnnotationLayerFactory,\n//   DefaultTextLayerFactory\n// } from \"pdfjs-dist/web/pdf_viewer.js\";\nimport '@/pdfjs/shared/document.css';\nimport '@/pdfjs/shared/toolbar.css';\nimport '@/pdfjs/shared/pdf_viewer.css';\n//import \"@/pdfjs/pdfjs-dist/web/pdf_viewer.css\";\nimport PDFJS from 'pdf-dist/webpack.js';\n\n// PDFJSAnnotate\nimport PDFJSAnnotate from '@/pdfjs/PDFJSAnnotate';\nconst { UI } = PDFJSAnnotate;\nPDFJSAnnotate.setStoreAdapter(new PDFJSAnnotate.LocalStoreAdapter());\n\n// initColorPicker\nimport initColorPicker from '@/pdfjs/shared/initColorPicker';\nimport {\n  \n\tfindSVGAtPoint,\n\tgetMetadata,\n\t// getOffset,\n\tscaleDown\n\t// scaleUp,\n\t// getAnnotationRect\n} from '@/pdfjs/UI/utils';\nimport { addEventListener } from '@/pdfjs/UI/event';\nimport appendChild from '@/pdfjs/render/appendChild';\n\nexport default {\n\tname: 'Document',\n\tdata() {\n\t\treturn {\n\t\t\tviewer: null,\n\t\t\tPAGE_HEIGHT: 1,\n\t\t\tNUM_PAGES: 0,\n\t\t\tdocumentId: './static/demand.pdf',\n\t\t\tRENDER_OPTIONS: {\n\t\t\t\tdocumentId: './static/demand.pdf',\n\t\t\t\tpdfDocument: null,\n\t\t\t\tscale:\n          parseFloat(localStorage.getItem(`${this.documentId}/scale`), 10) || 1.2,\n\t\t\t\trotate: parseInt(localStorage.getItem(`${this.documentId}/rotate`), 10) || 0\n\t\t\t},\n\t\t\tnewComment: '',\n\t\t\tcomments: [],\n\t\t\tviewerWidth: 900,\n\t\t\ttype: null,\n\t\t\trects: null,\n\t\t\tsvg: null,\n\t\t\ttarget: null,\n\t\t\tannotation: null,\n\t\t\tselectedText: null,\n\t\t\tinputHeight: null,\n\t\t\torder: null,\n\t\t\thasSpace: true,\n\t\t\teditClicked: false,\n\t\t};\n\t},\n\tmounted() {\n\t\t// Render stuff\n\t\t// #57 fix\n\t\tlet renderedPages = {};\n\t\tconst self = this;\n\t\tdocument\n\t\t\t.getElementById('content-wrapper')\n\t\t\t.addEventListener('scroll', function(e) {\n\t\t\t\tlet textTool = document.getElementById('textTool');\n\t\t\t\ttextTool.style.visibility = 'hidden';\n\t\t\t\tlet visiblePageNum =\n          Math.round(e.target.scrollTop / self.PAGE_HEIGHT) + 1;\n\t\t\t\tlet visiblePage = document.querySelector(\n\t\t\t\t\t`.page[data-page-number=\"${visiblePageNum}\"][data-loaded=\"false\"]`\n\t\t\t\t);\n\t\t\t\tif (visiblePage) {\n\t\t\t\t\t// Prevent invoking UI.renderPage on the same page more than once.\n\t\t\t\t\tif (!renderedPages[visiblePageNum]) {\n\t\t\t\t\t\trenderedPages[visiblePageNum] = true;\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tUI.renderPage(visiblePageNum, self.RENDER_OPTIONS);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tthis.render();\n\t\tthis.TextStuff();\n\t\tthis.ToolbarButtons();\n\t\tthis.ClearToolbarButton();\n\t\t// this.ScaleAndRotate();\n\t\t// this.ClearToolbarButton();\n\t},\n\tmethods: {\n\t\tasync render() {\n\t\t\tconst self = this;\n\t\t\tconst pdf = await PDFJS.getDocument(this.RENDER_OPTIONS.documentId)\n\t\t\t\t.promise;\n\t\t\tself.RENDER_OPTIONS.pdfDocument = pdf;\n\t\t\tself.viewer = document.getElementById('viewer');\n\t\t\tself.viewer.innerHTML = '';\n\t\t\tself.NUM_PAGES = pdf.numPages;\n\n\t\t\tfor (let i = 0; i < self.NUM_PAGES; i++) {\n\t\t\t\tlet page = UI.createPage(i + 1);\n\t\t\t\tself.viewer.appendChild(page);\n\t\t\t}\n\n\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\tlet renderer = await UI.renderPage(1, self.RENDER_OPTIONS);\n\t\t\tlet obj = {\n\t\t\t\tscale: self.RENDER_OPTIONS.scale,\n\t\t\t\trotation: self.RENDER_OPTIONS.rotate\n\t\t\t};\n\t\t\tlet viewport = renderer[0].getViewport(obj);\n\t\t\tself.PAGE_HEIGHT = viewport.height;\n\n\t\t\tlet pageWidth = document.getElementById('pageContainer1').offsetWidth;\n\t\t\tthis.viewerWidth = pageWidth + 250;\n\t\t\tthis.commentleftPos = pageWidth + 15;\n\n\t\t\tlet viewer = document.getElementById('viewer');\n\t\t\tlet commentWrapper = document.getElementById('comment-wrapper');\n\t\t\tcommentWrapper.style.left = pageWidth + 15 + 'px';\n\t\t\tviewer.appendChild(commentWrapper);\n\n\t\t\tthis.comments = await PDFJSAnnotate.getStoreAdapter().getComments(this.documentId);\n\t\t\tawait this.comments.forEach(function (element) {\n\t\t\t\telement.isSelected = false;\n\t\t\t});\n\t\t\tawait this.comments.sort((a, b) => (a.topPosition >= b.topPosition) ? 1 : -1);\n\t\t\tthis.TextSelection();\n\t\t},\n\t\tasync TextStuff() {\n\t\t\tconst self = this;\n\t\t\tlet textSize;\n\t\t\tlet textColor;\n\n\t\t\tfunction initText() {\n\t\t\t\tlet size = document.querySelector('.toolbar .text-size');\n\t\t\t\t[8, 9, 10, 11, 12, 14, 18, 24, 30, 36, 48, 60, 72, 96].forEach(s => {\n\t\t\t\t\tsize.appendChild(new Option(s, s));\n\t\t\t\t});\n\n\t\t\t\tsetText(\n\t\t\t\t\tlocalStorage.getItem(`${self.RENDER_OPTIONS.documentId}/text/size`) ||\n            10,\n\t\t\t\t\tlocalStorage.getItem(\n\t\t\t\t\t\t`${self.RENDER_OPTIONS.documentId}/text/color`\n\t\t\t\t\t) || '#000000'\n\t\t\t\t);\n\n\t\t\t\tinitColorPicker(\n\t\t\t\t\tdocument.querySelector('.text-color'),\n\t\t\t\t\ttextColor,\n\t\t\t\t\tfunction(value) {\n\t\t\t\t\t\tsetText(textSize, value);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tfunction setText(size, color) {\n\t\t\t\tlet modified = false;\n\n\t\t\t\tif (textSize !== size) {\n\t\t\t\t\tmodified = true;\n\t\t\t\t\ttextSize = size;\n\t\t\t\t\tlocalStorage.setItem(\n\t\t\t\t\t\t`${self.RENDER_OPTIONS.documentId}/text/size`,\n\t\t\t\t\t\ttextSize\n\t\t\t\t\t);\n\t\t\t\t\tdocument.querySelector('.toolbar .text-size').value = textSize;\n\t\t\t\t}\n\n\t\t\t\tif (textColor !== color) {\n\t\t\t\t\tmodified = true;\n\t\t\t\t\ttextColor = color;\n\t\t\t\t\tlocalStorage.setItem(\n\t\t\t\t\t\t`${self.RENDER_OPTIONS.documentId}/text/color`,\n\t\t\t\t\t\ttextColor\n\t\t\t\t\t);\n\n\t\t\t\t\tlet selected = document.querySelector(\n\t\t\t\t\t\t'.toolbar .text-color.color-selected'\n\t\t\t\t\t);\n\t\t\t\t\tif (selected) {\n\t\t\t\t\t\tselected.classList.remove('color-selected');\n\t\t\t\t\t\tselected.removeAttribute('aria-selected');\n\t\t\t\t\t}\n\n\t\t\t\t\tselected = document.querySelector(\n\t\t\t\t\t\t`.toolbar .text-color[data-color=\"${color}\"]`\n\t\t\t\t\t);\n\t\t\t\t\tif (selected) {\n\t\t\t\t\t\tselected.classList.add('color-selected');\n\t\t\t\t\t\tselected.setAttribute('aria-selected', true);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (modified) {\n\t\t\t\t\tUI.setText(textSize, textColor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction handleTextSizeChange(e) {\n\t\t\t\tsetText(e.target.value, textColor);\n\t\t\t}\n\n\t\t\tdocument\n\t\t\t\t.querySelector('.toolbar .text-size')\n\t\t\t\t.addEventListener('change', handleTextSizeChange);\n\n\t\t\tinitText();\n\t\t},\n\t\tasync ToolbarButtons() {\n\t\t\tconst self = this;\n\t\t\tlet tooltype =\n        localStorage.getItem(`${self.RENDER_OPTIONS.documentId}/tooltype`) ||\n        'cursor';\n\t\t\tif (tooltype) {\n\t\t\t\tsetActiveToolbarItem(\n\t\t\t\t\ttooltype,\n\t\t\t\t\tdocument.querySelector(`.toolbar button[data-tooltype=${tooltype}]`)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tfunction setActiveToolbarItem(type, button) {\n\t\t\t\tlet active = document.querySelector('.toolbar button.active');\n\t\t\t\tif (active) {\n\t\t\t\t\tactive.classList.remove('active');\n\n\t\t\t\t\tswitch (tooltype) {\n\t\t\t\t\t\tcase 'text':\n\t\t\t\t\t\t\tUI.disableText();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'point':\n\t\t\t\t\t\t\tUI.disablePoint();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'area':\n\t\t\t\t\t\tcase 'highlight':\n\t\t\t\t\t\tcase 'strikeout':\n\t\t\t\t\t\t\tUI.disableRect();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (button) {\n\t\t\t\t\tbutton.classList.add('active');\n\t\t\t\t}\n\t\t\t\tif (tooltype !== type) {\n\t\t\t\t\tlocalStorage.setItem(\n\t\t\t\t\t\t`${self.RENDER_OPTIONS.documentId}/tooltype`,\n\t\t\t\t\t\ttype\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\ttooltype = type;\n\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase 'text':\n\t\t\t\t\t\tUI.enableText();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'point':\n\t\t\t\t\t\tUI.enablePoint();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'area':\n\t\t\t\t\tcase 'highlight':\n\t\t\t\t\tcase 'strikeout':\n\t\t\t\t\t\tUI.enableRect(type);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction handleToolbarClick(e) {\n\t\t\t\tif (e.target.nodeName === 'BUTTON') {\n\t\t\t\t\tsetActiveToolbarItem(\n\t\t\t\t\t\te.target.getAttribute('data-tooltype'),\n\t\t\t\t\t\te.target\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdocument\n\t\t\t\t.querySelector('.toolbar')\n\t\t\t\t.addEventListener('click', handleToolbarClick);\n\t\t},\n\t\t// Clear toolbar button\n\t\tClearToolbarButton() {\n\t\t\tconst self = this;\n\t\t\tfunction handleClearClick() {\n\t\t\t\tif (confirm('Are you sure you want to clear annotations?')) {\n\t\t\t\t\tfor (let i = 0; i < self.NUM_PAGES; i++) {\n\t\t\t\t\t\tdocument.querySelector(`div#pageContainer${i + 1} svg.annotationLayer`).innerHTML = '';\n\t\t\t\t\t}\n\n\t\t\t\t\tlocalStorage.removeItem(`${self.RENDER_OPTIONS.documentId}/annotations`);\n\t\t\t\t}\n\t\t\t}\n\t\t\tdocument.querySelector('a.clear').addEventListener('click', handleClearClick);\n\t\t},\n\t\tTextSelection() {\n\t\t\tlet that = this;\n\t\t\t// Register necessary events\n\t\t\tdocument.addEventListener('mouseup', handleDocumentMouseup);\n\t\t\tdocument.addEventListener('mousedown', handleDocumentMousedown);\n\t\t\twindow.addEventListener('beforeunload', restoreCommentPositions);\n\t\t\taddEventListener('annotation:click', annotationClick);\n\t\t\tlet commentCards = document.querySelectorAll('.comment-card');\n\t\t\tcommentCards.forEach(item => {\n\t\t\t\titem.addEventListener('click', commentCardClick);\n\t\t\t});\n\t\t\tfunction handleDocumentMouseup(e){\n\t\t\t\tif(e.target.classList.contains('textLayer') || e.target.parentElement.classList.contains('textLayer')){\n\t\t\t\t\tlet rects = that.getSelectionRects();\n\t\t\t\t\tif (rects) {\n\t\t\t\t\t\tlet text = window\n\t\t\t\t\t\t\t.getSelection()\n\t\t\t\t\t\t\t.toString()\n\t\t\t\t\t\t\t.trim();\n\t\t\t\t\t\t// Display text tool bar if text is selected.\n\t\t\t\t\t\tif (text) {\n\t\t\t\t\t\t\tif(e.target.style.top == ''){\n\t\t\t\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t\t\t\t\tthat.hideTextToolBar();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tlet textTool = document.getElementById('textTool');\n\t\t\t\t\t\t\t\tlet posX = rects[rects.length - 1].left + (rects[rects.length - 1].width / 2);\n\t\t\t\t\t\t\t\tlet posY = rects[rects.length - 1].top + 20;\n\t\t\t\t\t\t\t\ttextTool.style = 'position: absolute; top: ' + posY + 'px; left: ' + posX + 'px;';\n\t\t\t\t\t\t\t\tthat.rects = rects;\n\t\t\t\t\t\t\t\tthat.svg = findSVGAtPoint(rects[0].left, rects[0].top);\n\t\t\t\t\t\t\t\tthat.target = e.target;\n\t\t\t\t\t\t\t\tthat.selectedText = text;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Display different tool bar\n\t\t\t\t\t\t}\n\t\t\t\t\t} \n\t\t\t\t}\n\t\t\t}\n\t\t\tfunction handleDocumentMousedown(e){\n\t\t\t\tlet svg = findSVGAtPoint(e.clientX, e.clientY);\n\t\t\t\tif (svg) {\n\t\t\t\t\t// hide text bool buttons\n\t\t\t\t\tif(!e.target.classList.contains('textToolBtn') && \n              !e.target.classList.contains('svg-inline--fa') &&\n              !e.target.parentElement.classList.contains('svg-inline--fa')){\n\t\t\t\t\t\tlet textTool = document.getElementById('textTool');\n\t\t\t\t\t\ttextTool.style.visibility = 'hidden';\n\t\t\t\t\t}\n\t\t\t\t\t// Hide add new comment form\n\t\t\t\t\tlet newCommentWrapper = document.getElementById('add-new-comment');\n\t\t\t\t\tif(newCommentWrapper && newCommentWrapper.style.display != 'none'){\n\t\t\t\t\t\tlet validTarget = that.hasAParentWithClass(e.target, 'add-new-comment');\n\t\t\t\t\t\tlet comment = document.getElementById('comment-text-area').value;\n\t\t\t\t\t\tif(!validTarget && comment.replace(/\\s/g, '').length == 0)\n\t\t\t\t\t\t\tthat.cancelCommentText();\n\t\t\t\t\t}\n\t\t\t\t\t// Unselect highlight comment\n\t\t\t\t\tif(!e.target.classList.contains('comment-highlight-selected')){\n\t\t\t\t\t\tlet validTarget = that.hasAParentWithClass(e.target, 'comment-card-selected');\n\t\t\t\t\t\tif(!validTarget)\n\t\t\t\t\t\t\tthat.unselectHighlightComment();\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfunction annotationClick(target){\n\t\t\t\tthat.handleCommentAnnotationClick(target);\n\t\t\t}\n\t\t\tfunction commentCardClick(){\n\t\t\t\tthat.handleCommentCardClick(this);\n\t\t\t}\n\t\t\tasync function restoreCommentPositions(){\n\t\t\t\tawait that.handleCommentPositionsRestore();\n\t\t\t}\n\t\t},\n\t\thandleCommentAnnotationClick(target){\n\t\t\tlet text = window.getSelection().toString().trim();\n\t\t\t// Display text tool bar if text is selected.\n\t\t\tif (!text){\n\t\t\t\tlet type = target.getAttribute('data-pdf-annotate-type');\n\t\t\t\tif(type == 'comment-highlight'){\n\t\t\t\t\tlet selectedHighlight = document.getElementsByClassName('comment-highlight-selected');\n\t\t\t\t\tif(selectedHighlight.length > 0)\n\t\t\t\t\t\tselectedHighlight[0].classList.remove('comment-highlight-selected');\n\t\t\t\t\ttarget.classList.add('comment-highlight-selected');\n\n\t\t\t\t\tlet commentCards = document.querySelectorAll('.comment-card');\n\t\t\t\t\tlet commentHighlights = document.querySelectorAll(\"g[data-pdf-annotate-type='comment-highlight']\");\n\t\t\t\t\tlet highlightArr = Array.prototype.slice.call(commentHighlights);\n\t\t\t\t\t// Sort the highlights\n\t\t\t\t\thighlightArr.sort(this.compareTopAttributes);\n\t\t\t\t\t// Get order of the current highlight\n\t\t\t\t\tthis.order = highlightArr.findIndex(item => {\n\t\t\t\t\t\treturn item.dataset.pdfAnnotateId == target.getAttribute('data-pdf-annotate-id');\n\t\t\t\t\t});\n            \n\t\t\t\t\tlet gTop = parseInt(target.getAttribute('top')) - 35;\n\t\t\t\t\tlet svgHeight = parseInt(target.getAttribute('page-height'));\n\t\t\t\t\tlet svgPageNum = parseInt(target.getAttribute('page-num'));\n\t\t\t\t\tif(svgPageNum > 1)\n\t\t\t\t\t\tgTop += ((svgPageNum - 1) * svgHeight);\n\n\t\t\t\t\tlet cTop = this.comments[this.order].topPosition;\n\t\t\t\t\t//parseInt(commentCards[this.order].style.top.substring(0, commentCards[this.order].style.top.length - 2));\n            \n\t\t\t\t\t// remove current selected comment card class if any\n\t\t\t\t\tlet selected = document.getElementsByClassName('comment-card-selected');\n\t\t\t\t\tif(selected.length > 0)\n\t\t\t\t\t\tselected[0].classList.remove('comment-card-selected');\n\t\t\t\t\t// Set this card as selected\n\t\t\t\t\tcommentCards[this.order].classList.add('comment-card-selected');\n\n\t\t\t\t\tif(cTop != gTop){\n\t\t\t\t\t\t// Move the comment up to gTop\n\t\t\t\t\t\tthis.comments[this.order].topPosition = gTop;\n\n\t\t\t\t\t\tlet selected = document.getElementsByClassName('comment-card-selected');\n\t\t\t\t\t\tif(selected.length > 0)\n\t\t\t\t\t\t\tselected[0].classList.remove('comment-card-selected');\n\t\t\t\t\t\tcommentCards[this.order].classList.add('comment-card-selected');\n\n\t\t\t\t\t\tlet endPos = gTop + commentCards[this.order].offsetHeight;\n\t\t\t\t\t\tif(cTop > gTop){\n\t\t\t\t\t\t\t// Move up other uppen comments\n\t\t\t\t\t\t\tif(this.order > 0)\n\t\t\t\t\t\t\t\tthis.moveUpFromTopPos(commentCards, this.order - 1, gTop);\n\t\t\t\t\t\t\t// Move up other lower comments\n\t\t\t\t\t\t\tif(this.order < commentCards.length - 1)\n\t\t\t\t\t\t\t\tthis.moveUpToEndPos(commentCards, this.order + 1, endPos);\n\t\t\t\t\t\t} else if(cTop < gTop){\n\t\t\t\t\t\t\t// Move down other uppen comments\n\t\t\t\t\t\t\tif(this.order > 0)\n\t\t\t\t\t\t\t\tthis.moveDownToTopPos(commentCards, this.order - 1, gTop);\n\t\t\t\t\t\t\t// Move down other lower comments\n\t\t\t\t\t\t\tif(this.order < commentCards.length - 1)\n\t\t\t\t\t\t\t\tthis.moveDownFromEndPos(commentCards, this.order + 1, endPos);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\thandleCommentCardClick(el){\n\t\t\tlet highlightId = el.getAttribute('highlight-id');\n\t\t\tlet highlight = document.querySelector(\"g[data-pdf-annotate-id='\"+ highlightId +\"']\");\n\t\t\tthis.handleCommentAnnotationClick(highlight);\n\t\t},\n\t\tasync handleCommentPositionsRestore(){\n\t\t\tlet documentId = document.getElementById('viewer').getAttribute('document-id');\n\t\t\tlet highlights = document.querySelectorAll(\"g[data-pdf-annotate-type='comment-highlight']\");\n\t\t\tlet highlightArr = Array.prototype.slice.call(highlights);\n\t\t\t// Sort the highlights\n\t\t\thighlightArr.sort(this.compareTopAttributes);\n\t\t\tthis.handleCommentAnnotationClick(highlightArr[0]);\n\t\t\tlet comments = await this.updateCommentAnnotations(documentId);\n\t\t\tawait PDFJSAnnotate.getStoreAdapter().updateComments(documentId, comments);\n\t\t},\n\t\tasync updateCommentAnnotations(documentId){\n\t\t\tlet comments = await PDFJSAnnotate.getStoreAdapter().getComments(documentId);\n\t\t\tcomments.forEach(comment => {\n\t\t\t\tlet thisCard = document.querySelector(\".comment-card[highlight-id='\"+ comment.uuid +\"']\");\n\t\t\t\tcomment.topPosition = parseInt(thisCard.getAttribute('top-position'));\n\t\t\t});\n\t\t\treturn comments;\n\t\t},\n\t\tasync HighlightText(){\n\t\t\tawait this.highlightText('highlight');\n\t\t},\n\t\tasync StrikethroughText(){\n\t\t\tawait this.highlightText('strikeout');\n\t\t\tlet textTool = document.getElementById('textTool');\n\t\t\ttextTool.style.visibility = 'hidden';\n\t\t},\n\t\t// Migration code starts here\n\t\tasync CommentText(){\n\t\t\tif(this.newComment.replace(/\\s/g, '').length != 0){\n\t\t\t\t// Save in-progress comment\n\t\t\t\tawait this.addCommentText();\n\t\t\t}\n\t\t\tawait this.commentText();\n\t\t},\n\t\tasync addCommentText(){\n\t\t\t//let newComment = await UI.addCommentText(this.newComment, this.RENDER_OPTIONS.documentId);\n\t\t\tlet commentWrapper = document.getElementById('add-new-comment');\n\t\t\tlet topPos = parseInt(commentWrapper.style.top.substring(0, commentWrapper.style.top.length - 2));\n\t\t\tlet newComment = await PDFJSAnnotate.getStoreAdapter().addComment(this.documentId,\n\t\t\t\tthis.annotation,\n\t\t\t\tthis.newComment,\n\t\t\t\tthis.selectedText,\n\t\t\t\ttopPos);\n\t\t\tawait this.comments.push(newComment);\n\t\t\tawait this.comments.sort((a, b) => (a.topPosition >= b.topPosition) ? 1 : -1);\n\t\t\tdocument.getElementById('add-new-comment').style.display = 'none';\n\n\t\t\tawait this.updatePositionsAfterCommentAdded();\n\t\t\tthis.newComment = '';\n\t\t},\n\t\t// Begin migrating code from select.js to document.vue\n\t\tasync commentText(){\n\t\t\t// Highlight the text first\n\t\t\tawait this.highlightText('comment-highlight');\n\t\t\t// Update positions of comment boxes\n\t\t\tthis.updateCommentPositions();\n\t\t\t// Display add new form\n\t\t\tthis.displayAddNewCommentForm();\n\t\t\tevent.stopPropagation();\n\t\t},\n\t\tasync highlightText(type){\n\t\t\tif(!this.svg){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet boundingRect = this.svg.getBoundingClientRect();\n      \n\t\t\tlet color = 'FFFF00';\n\t\t\tif(type == 'strikeout')\n\t\t\t\tcolor = 'FF0000';\n\n\t\t\t// Initialize the annotation\n\t\t\tlet annotation = {\n\t\t\t\ttype,\n\t\t\t\tcolor,\n\t\t\t\trectangles: [...this.rects].map((r) => {\n\t\t\t\t\tlet offset = 0;\n\t\t\t\t\tif(type == 'strikeout')\n\t\t\t\t\t\toffset = r.height / 2;\n\t\t\t\t\treturn scaleDown(this.svg, {\n\t\t\t\t\t\ty: (r.top + offset) - boundingRect.top,\n\t\t\t\t\t\tx: r.left - boundingRect.left,\n\t\t\t\t\t\twidth: r.width,\n\t\t\t\t\t\theight: r.height\n\t\t\t\t\t});\n\t\t\t\t}).filter((r) => r.width > 0 && r.height > 0 && r.x > -1 && r.y > -1)\n\t\t\t};\n      \n      \n\t\t\t// Short circuit if no rectangles exist\n\t\t\tif (annotation.rectangles.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(annotation.rectangles.length > 2){\n\t\t\t\tannotation.rectangles = this.removeMinHeigthRects(annotation.rectangles);\n\t\t\t}\n\n\t\t\tlet { documentId, pageNumber } = getMetadata(this.svg);\n\n\t\t\tannotation.top = parseInt(this.target.style.top.substring(0, this.target.style.top.length - 2));\n\t\t\tannotation.pageNum = pageNumber;\n\t\t\tannotation.pageHeight = this.svg.getAttribute('height');\n\t\t\tthis.annotation = annotation;\n\t\t\t// Add the annotation\n\t\t\tawait PDFJSAnnotate.getStoreAdapter().addAnnotation(documentId, pageNumber, annotation)\n\t\t\t\t.then((annotation) => {\n\t\t\t\t\tappendChild(this.svg, annotation);\n\t\t\t\t\tthis.hideTextToolBar();\n\t\t\t\t});\n\t\t},\n\t\tupdateCommentPositions(){\n\t\t\tlet commentCards = document.querySelectorAll('.comment-card');\n\t\t\tlet commentHighlights = document.querySelectorAll(\"g[data-pdf-annotate-type='comment-highlight']\");\n\t\t\tlet highlightArr = Array.prototype.slice.call(commentHighlights);\n\t\t\t// Sort the highlights\n\t\t\thighlightArr.sort(this.compareTopAttributes);\n\t\t\t// Get order of the current highlight\n\t\t\tthis.order = highlightArr.findIndex(item => {\n\t\t\t\treturn item.dataset.pdfAnnotateId == this.annotation.uuid;\n\t\t\t});\n\t\t\tthis.hasSpace = this.hasEnoughSpace(commentCards);\n\t\t\tif(!this.hasSpace){\n\t\t\t\t// Update comment positions\n\n\t\t\t\t// get add new form's top position\n\t\t\t\tlet svg = this.svg;\n\t\t\t\tlet rectTop = parseInt(this.target.style.top.substring(0, this.target.style.top.length - 2));\n\t\t\t\tlet svgHeight = svg.getAttribute('height');\n\t\t\t\tlet svgPageNum = svg.getAttribute('data-pdf-annotate-page');\n\t\t\t\tlet svgTop = 0;\n\t\t\t\tif(svgPageNum > 1)\n\t\t\t\t\tsvgTop += ((svgPageNum - 1) * svgHeight);\n\t\t\t\tlet topPos = svgTop + rectTop - 35;\n\t\t\t\tlet endPos = topPos + 126;\n\n\t\t\t\tif(this.order == 0){\n\t\t\t\t\t// Move down all comment cards\n\t\t\t\t\tthis.moveDownFromEndPos(commentCards, 0, endPos);\n\t\t\t\t} else if(this.order == highlightArr.length - 1){\n\t\t\t\t\t// Move up all comment cards\n\t\t\t\t\tthis.moveUpFromTopPos(commentCards, commentCards.length - 1, topPos);\n\t\t\t\t} else {\n\t\t\t\t\t// Move up commentCards[0] -> commentCards[i - 1]\n\t\t\t\t\tlet upperTop = parseInt(commentCards[this.order - 1].style.top.substring(0, commentCards[this.order - 1].style.top.length - 2));\n\t\t\t\t\tlet upperEnd = upperTop + commentCards[this.order - 1].offsetHeight;\n\t\t\t\t\t// Check if move up is necessary\n\t\t\t\t\tif(upperEnd > (topPos - 10)){\n\t\t\t\t\t\tthis.moveUpFromTopPos(commentCards, this.order - 1, topPos);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Check if move down is necessary\n\t\t\t\t\t\tlet commentId = commentCards[this.order - 1].getAttribute('highlight-id');\n\t\t\t\t\t\tlet g = this.getHighlightByCommentId(commentId);\n\t\t\t\t\t\tlet gTop = parseInt(g.getAttribute('top')) - 35;\n\t\t\t\t\t\tif(g.getAttribute('page-num') > 1)\n\t\t\t\t\t\t\tgTop += ((g.getAttribute('page-num') - 1) * g.getAttribute('page-height'));\n\t\t\t\t\t\tif(upperTop < gTop){\n\t\t\t\t\t\t\tthis.moveDownToTopPos(commentCards, this.order - 1, topPos);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// Move down commentCards[i] -> commentCards[commentCards.length - 1]\n\t\t\t\t\tlet lowerTop = parseInt(commentCards[this.order].style.top.substring(0, commentCards[this.order].style.top.length - 2));\n\t\t\t\t\tif(lowerTop < (endPos + 10)){\n\t\t\t\t\t\tthis.moveDownFromEndPos(commentCards, this.order, endPos);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Check if move up is necessary\n\t\t\t\t\t\tlet commentId = commentCards[this.order].getAttribute('highlight-id');\n\t\t\t\t\t\tlet g = this.getHighlightByCommentId(commentId);\n\t\t\t\t\t\tlet gTop = parseInt(g.getAttribute('top')) - 35;\n\t\t\t\t\t\tif(g.getAttribute('page-num') > 1)\n\t\t\t\t\t\t\tgTop += ((g.getAttribute('page-num') - 1) * g.getAttribute('page-height'));\n\t\t\t\t\t\tif(lowerTop > gTop){\n\t\t\t\t\t\t\tthis.moveUpToEndPos(commentCards, this.order, endPos);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tasync updatePositionsAfterCommentAdded(){\n\t\t\tlet newComment = document.querySelector(\".comment-card[highlight-id='\"+ this.annotation.uuid +\"']\");\n      \n\t\t\tif(!this.hasSpace){\n\t\t\t\tlet commentCards = document.querySelectorAll('.comment-card');\n\t\t\t\tlet endPos = parseInt(newComment.getAttribute('top-position')) + newComment.offsetHeight;\n\t\t\t\tif(this.order < (commentCards.length - 1))\n\t\t\t\t\tthis.moveUpToEndPos(commentCards, this.order + 1, endPos);\n\t\t\t}\n\t\t\tlet that = this;\n\t\t\tnewComment.addEventListener('click', function commentCardClick(){\n\t\t\t\tthat.handleCommentCardClick(this);\n\t\t\t});\n\t\t},\n\t\tdisplayAddNewCommentForm(){\n\t\t\tlet newCommentWrapper = document.getElementById('add-new-comment');\n\t\t\tnewCommentWrapper.style.visibility = 'visible';\n\t\t\tlet svg = this.svg;\n\t\t\tlet rectTop = parseInt(this.target.style.top.substring(0, this.target.style.top.length - 2));\n\t\t\tlet svgHeight = svg.getAttribute('height');\n\t\t\tlet svgPageNum = svg.getAttribute('data-pdf-annotate-page');\n      \n\t\t\tlet svgTop = 0;\n\t\t\tif(svgPageNum > 1)\n\t\t\t\tsvgTop += ((svgPageNum - 1) * svgHeight);\n\t\t\tlet topPos = svgTop + rectTop - 35;\n\t\t\tnewCommentWrapper.style = 'width: 100%; position: absolute; left: 5px; top: ' + topPos + 'px;';\n\t\t\tthis.hideTextToolBar();\n\t\t\tlet textArea = document.getElementById('comment-text-area');\n\t\t\ttextArea.focus();\n\t\t\tthis.inputHeight = parseInt(textArea.style.height.substring(0, textArea.style.height.length - 2));\n\t\t\tlet that = this;\n\t\t\ttextArea.addEventListener('keydown', function (){\n\t\t\t\tlet commentCards = document.querySelectorAll('.comment-card');\n\t\t\t\tif(commentCards.length > 0){\n\t\t\t\t\tsetTimeout(function(){ \n\t\t\t\t\t\tlet newHeight = parseInt(textArea.style.height.substring(0, textArea.style.height.length - 2));\n\t\t\t\t\t\tlet newCommentWrapper = document.getElementById('add-new-comment');\n\t\t\t\t\t\tlet topPos = parseInt(newCommentWrapper.style.top.substring(0, newCommentWrapper.style.top.length - 2));\n\t\t\t\t\t\tlet endPos = topPos + newCommentWrapper.offsetHeight;\n\t\t\t\t\t\tif(that.inputHeight < newHeight){\n\t\t\t\t\t\t\tif(that.order <= commentCards.length - 1 )\n\t\t\t\t\t\t\t\tthat.moveDownFromEndPos(commentCards, that.order, endPos);\n\t\t\t\t\t\t} else if(that.inputHeight > newHeight){\n\t\t\t\t\t\t\tif(that.order < commentCards.length)\n\t\t\t\t\t\t\t\tthat.moveUpToEndPos(commentCards, that.order, endPos);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthat.inputHeight = newHeight;\n\t\t\t\t\t}, 100);\n\t\t\t\t}\n\t\t\t});\n\n\t\t},\n\t\tcancelCommentText(){\n\t\t\tthis.newComment = '';\n\t\t\tlet documentId = getMetadata(this.svg).documentId;\n\t\t\tlet newCommentWrapper = document.getElementById('add-new-comment');\n\t\t\tlet topPos = parseInt(newCommentWrapper.style.top.substring(0, newCommentWrapper.style.top.length - 2));\n\t\t\tlet endPos  = topPos + newCommentWrapper.offsetHeight;\n\t\t\tnewCommentWrapper.style.display = 'none';\n\t\t\tlet commentCards = document.querySelectorAll('.comment-card');\n\t\t\tif(commentCards.length > 0){\n\t\t\t\tif(this.order <= (commentCards.length - 1)){\n\t\t\t\t\tthis.moveUpToEndPos(commentCards, this.order, topPos);\n\t\t\t\t\tif(this.order > 0){\n\t\t\t\t\t\tlet orderTopPos = this.comments[this.order].topPosition;\n\t\t\t\t\t\t//parseInt(commentCards[this.order].style.top.substring(0, commentCards[this.order].style.top.length - 2)); \n\t\t\t\t\t\tthis.moveDownToTopPos(commentCards, this.order - 1, orderTopPos);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(this.order == commentCards.length){\n\t\t\t\t\tthis.moveDownToTopPos(commentCards, this.order - 1, endPos);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Remove the annotation\n\t\t\tPDFJSAnnotate.getStoreAdapter().deleteAnnotation(documentId, this.annotation.uuid)\n\t\t\t\t.then((isDeleted) => {\n\t\t\t\t\tif(isDeleted){\n\t\t\t\t\t\t//remove highlight in UI\n\t\t\t\t\t\tdocument.querySelector(\"g[data-pdf-annotate-id='\"+ this.annotation.uuid +\"']\").remove();\n\t\t\t\t\t\tthis.annotation = null;\n\t\t\t\t\t}\n          \n\t\t\t\t});\n\t\t},\n\t\tunselectHighlightComment(){\n\t\t\tlet selectedHighlight = document.getElementsByClassName('comment-highlight-selected');\n\t\t\tif(selectedHighlight.length > 0)\n\t\t\t\tselectedHighlight[0].classList.remove('comment-highlight-selected');\n\t\t\tlet selectedComment = document.getElementsByClassName('comment-card-selected');\n\t\t\tif(selectedComment.length > 0)\n\t\t\t\tselectedComment[0].classList.remove('comment-card-selected');\n\t\t},\n\t\tmoveUpFromTopPos(commentCards, startIndex, topPos){\n\t\t\t// Get start index card's position\n\t\t\tlet adjTop = this.comments[startIndex].topPosition;\n\t\t\tlet adjEnd = adjTop + commentCards[startIndex].offsetHeight;\n\t\t\t// Move the start index card up first\n\n\t\t\tthis.comments[startIndex].topPosition = adjTop - (adjEnd - topPos) - 10;\n\t\t\tif(startIndex > 0){\n\t\t\t\tfor(let m = startIndex - 1; m >= 0; m--){\n\t\t\t\t\tlet previousTop = this.comments[m + 1].topPosition;\n\t\t\t\t\tlet thisTop = this.comments[m].topPosition;\n\t\t\t\t\tlet thisEnd = thisTop + commentCards[m].offsetHeight;\n\t\t\t\t\tif(thisEnd > (previousTop - 10)){\n\t\t\t\t\t\tthis.comments[m].topPosition = thisTop - (thisEnd - previousTop) - 10;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t},\n\t\tmoveUpToEndPos(commentCards, startIndex, endPos){\n\t\t\tlet g = this.getHighlightByCommentId(this.comments[startIndex].uuid);\n\t\t\tlet gTop = parseInt(g.getAttribute('top')) - 35;\n\t\t\tif(g.getAttribute('page-num') > 1)\n\t\t\t\tgTop += ((g.getAttribute('page-num') - 1) * g.getAttribute('page-height'));\n\t\t\tif(this.comments[startIndex].topPosition > gTop )\n\t\t\t{\n\t\t\t\tlet desiredTop = gTop >= (endPos + 10) ? gTop : (endPos + 10) ;\n\t\t\t\t// Move start index card up\n\t\t\t\tthis.comments[startIndex].topPosition = desiredTop;\n\t\t\t\tif(commentCards.length > (startIndex + 1)){\n\t\t\t\t\tfor(let n = startIndex + 1; n < this.comments.length; n++){\n\t\t\t\t\t\tlet previousTop = this.comments[n - 1].topPosition;\n\t\t\t\t\t\tlet previousEnd = previousTop + commentCards[n - 1].offsetHeight;\n\t\t\t\t\t\tlet thisTop = this.comments[n].topPosition;\n            \n\t\t\t\t\t\t// Check if move down is necessary\n\t\t\t\t\t\tif(thisTop > (previousEnd + 10)){\n\t\t\t\t\t\t\tlet thisG = this.getHighlightByCommentId(this.comments[n].uuid);\n\t\t\t\t\t\t\tlet thisGTop = parseInt(thisG.getAttribute('top')) - 35;\n\t\t\t\t\t\t\tif(thisG.getAttribute('page-num') > 1)\n\t\t\t\t\t\t\t\tthisGTop += ((thisG.getAttribute('page-num') - 1) * thisG.getAttribute('page-height'));\n\t\t\t\t\t\t\tif(thisTop > thisGTop){\n\t\t\t\t\t\t\t\tlet thisDesiredTop = thisGTop >= (previousEnd + 10) ? thisGTop : (previousEnd + 10) ;\n\t\t\t\t\t\t\t\tthis.comments[n].topPosition = thisDesiredTop;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmoveDownToTopPos(commentCards, startIndex, topPos){\n\t\t\t// Get start index card's position\n\t\t\tlet adjTop = this.comments[startIndex].topPosition;\n\t\t\tlet adjEnd = adjTop + commentCards[startIndex].offsetHeight;\n\t\t\t// Check if move down is necessary\n\t\t\tlet g = this.getHighlightByCommentId(this.comments[startIndex].uuid);\n\t\t\tlet gTop = parseInt(g.getAttribute('top')) - 35;\n\t\t\tif(g.getAttribute('page-num') > 1)\n\t\t\t\tgTop += ((g.getAttribute('page-num') - 1) * g.getAttribute('page-height'));\n\t\t\t// Only move cards down if the upper card is higher that its highlight\n\t\t\tif(adjTop < gTop ){\n\t\t\t\tlet desiredTop = gTop <= (adjTop + (topPos - adjEnd) - 10) ? gTop : (adjTop + (topPos - adjEnd) - 10) ;\n\t\t\t\t// Move upper adjacent card down\n\t\t\t\tthis.comments[startIndex].topPosition = desiredTop;\n\t\t\t\t// Move other cards down\n\t\t\t\tif(startIndex > 0){\n\t\t\t\t\tfor(let n = startIndex - 1; n >= 0; n--){\n\t\t\t\t\t\tlet previousTop = this.comments[n + 1].topPosition;\n\t\t\t\t\t\t//let previousEnd = previousTop + commentCards[n + 1].offsetHeight;\n\t\t\t\t\t\tlet thisTop = this.comments[n].topPosition;\n\t\t\t\t\t\tlet thisEnd = thisTop + commentCards[n].offsetHeight;\n\t\t\t\t\t\t// Check if move down is necessary\n\t\t\t\t\t\tif(thisEnd < (previousTop - 10)){\n\t\t\t\t\t\t\tlet thisG = this.getHighlightByCommentId(this.comments[n].uuid);\n\t\t\t\t\t\t\tlet thisGTop = parseInt(thisG.getAttribute('top')) - 35;\n\t\t\t\t\t\t\tif(thisG.getAttribute('page-num') > 1)\n\t\t\t\t\t\t\t\tthisGTop += ((thisG.getAttribute('page-num') - 1) * thisG.getAttribute('page-height'));\n\t\t\t\t\t\t\tif(thisTop < thisGTop){\n\t\t\t\t\t\t\t\tlet thisDesiredTop = thisGTop <= (thisTop + (previousTop - thisEnd) - 10) ? thisGTop : (thisTop + (previousTop - thisEnd) - 10) ;\n\t\t\t\t\t\t\t\tthis.comments[n].topPosition = thisDesiredTop;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n      \n\t\t},\n\t\tmoveDownFromEndPos(commentCards, startIndex, endPos){\n\t\t\t// Move the start index card down first\n\t\t\tthis.comments[startIndex].topPosition = endPos + 10;\n\t\t\t// Move other cards down ward\n\t\t\tif(this.comments.length > (startIndex + 1)){\n\t\t\t\tfor(let j = startIndex + 1; j < this.comments.length; j++){\n\t\t\t\t\tlet previousTop = this.comments[j - 1].topPosition;\n\t\t\t\t\tlet previousEnd = previousTop + commentCards[j - 1].offsetHeight;\n\t\t\t\t\tlet thisTop = this.comments[j].topPosition;\n\t\t\t\t\tif(thisTop < (previousEnd + 10)){\n\t\t\t\t\t\tthis.comments[j].topPosition = thisTop + (previousEnd - thisTop) + 10;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\thasEnoughSpace(commentCards){\n\t\t\tif(this.comments.length > 0){\n\t\t\t\tlet svg = this.svg;\n\t\t\t\tlet rectTop = parseInt(this.target.style.top.substring(0, this.target.style.top.length - 2));\n\t\t\t\tlet svgHeight = svg.getAttribute('height');\n\t\t\t\tlet svgPageNum = svg.getAttribute('data-pdf-annotate-page');\n        \n\t\t\t\tlet svgTop = 0;\n\t\t\t\tif(svgPageNum > 1)\n\t\t\t\t\tsvgTop += ((svgPageNum - 1) * svgHeight);\n\t\t\t\tlet topPos = svgTop + rectTop - 35;\n\t\t\t\tlet endPos = topPos + 105;\n\n\t\t\t\t// Check first and last position\n\t\t\t\tlet firstTopPos = this.comments[0].topPosition;\n\t\t\t\tlet lastEndPos = this.comments[this.comments.length - 1].topPosition + commentCards[commentCards.length - 1].offsetHeight;\n\n\t\t\t\tif(endPos < firstTopPos || topPos > lastEndPos)\n\t\t\t\t\treturn true;\n\t\t\t\tif(this.comments.length > 1){\n\t\t\t\t\tfor(let i = 0; i < this.comments.length - 1; i++){\n\t\t\t\t\t\tlet thisTopPos = this.comments[i].topPosition;\n\t\t\t\t\t\tlet thisEndPos = thisTopPos + commentCards[i].offsetHeight;\n\t\t\t\t\t\tlet nextTopPos = this.comments[i + 1].topPosition;\n\t\t\t\t\t\tif(topPos > thisEndPos && endPos < nextTopPos){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n        \n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}, \n\t\tcompareTopAttributes(a, b){\n\t\t\tlet top1 = parseInt(a.getAttribute('top'));\n\t\t\tif(a.getAttribute('page-num') > 1)\n\t\t\t\ttop1 += ((a.getAttribute('page-num') - 1) * a.getAttribute('page-height'));\n      \n\t\t\tlet top2 = parseInt(b.getAttribute('top'));\n\t\t\tif(b.getAttribute('page-num') > 1)\n\t\t\t\ttop2 += ((b.getAttribute('page-num') - 1) * b.getAttribute('page-height'));\n\t\t\tif (top1 > top2) return 1;\n\t\t\tif (top2 > top1) return -1;\n\t\t\tif (top2 == top1) {\n\t\t\t\t// compare order attributes\n\t\t\t\tlet order1 = parseInt(a.getAttribute('order'));\n\t\t\t\tlet order2 = parseInt(b.getAttribute('order'));\n\t\t\t\tif (order1 > order2) return 1;\n\t\t\t\tif (order2 > order1) return -1;\n\t\t\t}\n\t\t\treturn 0;\n\t\t},\n\t\tremoveMinHeigthRects(arr) {\n\t\t\tlet min = Math.min(...arr.map(a => a.height));\n\t\t\treturn arr.filter(a => a.height != min);\n\t\t},\n\t\tdisplayEditComment(comment){\n\t\t\tthis.comments.forEach(function (element) {\n\t\t\t\telement.isSelected = false;\n\t\t\t});\n\t\t\tcomment.isSelected = true;\n\t\t\tthis.$forceUpdate();\n\t\t\tlet refName = 'comment' + comment.uuid;\n\t\t\tthis.$refs[refName][0].$el.childNodes[0].focus();\n\t\t},\n\t\teditCommentCard(){\n\n\t\t},\n\t\tdeleteCommentCard(commentId){\n\t\t\tconsole.log(commentId);\n\t\t},\n\t\thideTextToolBar(){\n\t\t\tlet textTool = document.getElementById('textTool');\n\t\t\ttextTool.style.visibility = 'hidden';\n\t\t},\n\t\tgetHighlightByCommentId(commentId){\n\t\t\treturn  document.querySelector(\"g[data-pdf-annotate-id='\"+ commentId +\"']\");\n\t\t},\n\t\tgetSelectionRects() {\n\t\t\tlet selection = window.getSelection();\n\t\t\tlet range = selection.getRangeAt(0);\n\t\t\tlet rects = range.getClientRects();\n\n\t\t\tif (rects.length > 0 &&\n          rects[0].width > 0 &&\n          rects[0].height > 0) {\n\t\t\t\treturn rects;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\thasAParentWithClass(element, className){\n\t\t\tfor(let i = 0; i <= 5; i++){\n\t\t\t\tif (element.classList.contains(className)) \n\t\t\t\t\treturn true;\n\t\t\t\telse\n\t\t\t\t\telement = element.parentNode;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\t// End migration\n\t}\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Document.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Document.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Document.vue?vue&type=template&id=352586b8&\"\nimport script from \"./Document.vue?vue&type=script&lang=js&\"\nexport * from \"./Document.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"test\"},[_c('div',[_c('p',[_vm._v(\"Hello \"+_vm._s(_vm.username))])]),_c('el-form',{ref:\"form\",staticStyle:{\"width\":\"30%\",\"margin\":\"auto\"},attrs:{\"model\":_vm.form,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"Username\"}},[_c('el-input',{model:{value:(_vm.form.username),callback:function ($$v) {_vm.$set(_vm.form, \"username\", $$v)},expression:\"form.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"Password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"autocomplete\":\"off\"},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.login()}}},[_vm._v(\" Sign In \")]),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.apiCall()}}},[_vm._v(\" Api Call \")]),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.logout()}}},[_vm._v(\" Logout \")])],1)],1),(_vm.weathers && _vm.weathers.length > 0)?_c('el-table',{staticStyle:{\"width\":\"50%\",\"margin\":\"auto\",\"margin-top\":\"20px\"},attrs:{\"data\":_vm.weathers,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"date\",\"label\":\"Date\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"temperatureC\",\"label\":\"Temperature C\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"temperatureF\",\"label\":\"Temperature F\"}}),_c('el-table-column',{attrs:{\"prop\":\"summary\",\"label\":\"Summary\"}})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * URL utilities.\n * @module utils/url-utils\n */\n\n/**\n * Get base URL.\n *\n * @return {String} URL\n */\nexport const getBaseURL = () => {\n\tlet url = window.location.href;\n\tlet arr = url.split('/');\n\tconst protocol = arr[0];\n\t//const protocol = process.env.NODE_ENV === 'production' ? 'https:' :'http:';\n\tconst host = process.env.NODE_ENV === 'production' ? window.location.host : 'localhost:5000';\n\treturn `${protocol}//${host}`;\n};\n\n/**\n * Get base URL of REST service.\n *\n * @return {String} URL\n */\nexport const getBaseApiURL = () => {\n\tconst apiEndpoint = process.env.VUE_APP_API_ENDPOINT;\n\treturn `${getBaseURL()}/${apiEndpoint}`;\n};","/**\n * HTTP client.\n *\n * @see {@link https://github.com/axios/axios}\n * @module utils/axios\n */\n// import _ from 'lodash';\nimport axios from 'axios';\nimport * as urlUtils from '@/utils/url';\n// // import store from '../store';\n// import NProgress from 'nprogress';\n\n// import { Notification } from 'element-ui';\n\nconst config = {\n\tbaseURL: urlUtils.getBaseApiURL(),\n\ttimeout: 100000\n};\n\nconst instance = axios.create(config);\n\n// // Add a request interceptor\n// instance.interceptors.request.use(\n// \tfunction(config) {\n// \t\tstore.dispatch('loading/startLoading');\n// \t\tlet accessToken = store.state.auth.token.accessToken;\n// \t\tif (!_.isEmpty(accessToken)) {\n// \t\t\tconfig.headers.Authorization = `Bearer ${accessToken}`;\n// \t\t}\n// \t\treturn config;\n// \t},\n// \tfunction(error) {\n// \t\tstore.dispatch('loading/startLoading');\n// \t\treturn Promise.reject(error);\n// \t}\n// );\n\n// instance.interceptors.response.use(\n// \tresponse => {\n// \t\tstore.dispatch('loading/doneLoading');\n// \t\treturn response;\n// \t},\n// \terror => {\n// \t\tstore.dispatch('loading/doneLoading');\n\n// \t\t// Check for errorHandle config\n// \t\tif (error.config.hasOwnProperty('errorHandle') && error.config.errorHandle === false) {\n// \t\t\treturn Promise.reject(error);\n// \t\t}\n\t\n// \t\t// Handling error\n// \t\tif (error.response) {\n// \t\t\tlet message = '';\n// \t\t\tif (error.response.data.Message)\n// \t\t\t\tmessage += error.response.data.Message + ' ';\n// \t\t\tif (error.response.data.ModelState)\n// \t\t\t\tmessage += error.response.data.ModelState.invalid_grant + ' ';\n// \t\t\tif (error.response.data.InnerException)\n// \t\t\t\tmessage += error.response.data.InnerException.ExceptionMessage;\n\n// \t\t\tNotification.error({\n// \t\t\t\ttitle: 'Error',\n// \t\t\t\tmessage: message\n// \t\t\t});\n// \t\t}\n\t\t\n// \t}\n// );\n\n// axios methods\nconst methods = {\n\t/**\n\t * request.\n\t * @param {Object} config Config\n\t * @return {Promise} Promise\n\t * @see {@link https://github.com/mzabriskie/axios#instance-methods}\n\t */\n\trequest(config) {\n\t\tthrow new Error('Not Implemented');\n\t},\n\n\t/**\n\t * get.\n\t * @param {String} url Url\n\t * @param {Object} config Config\n\t * @return {Promise} Promise\n\t * @see {@link https://github.com/mzabriskie/axios#instance-methods}\n\t */\n\tget(url, config) {\n\t\treturn instance.get(url, config);\n\t},\n\n\t/**\n\t * delete.\n\t * @param {String} url Url\n\t * @param {Object} config Config\n\t * @return {Promise} Promise\n\t * @see {@link https://github.com/mzabriskie/axios#instance-methods}\n\t */\n\tdelete(url, config) {\n\t\treturn instance.delete(url, config);\n\t},\n\n\t/**\n\t * head.\n\t * @param {String} url Url\n\t * @param {Object} config Config\n\t * @return {Promise} Promise\n\t * @see {@link https://github.com/mzabriskie/axios#instance-methods}\n\t */\n\thead(url, config) {\n\t\tthrow new Error('Not Implemented');\n\t},\n\n\t/**\n\t * options.\n\t * @param {String} url Url\n\t * @param {Object} config Config\n\t * @return {Promise} Promise\n\t * @see {@link https://github.com/mzabriskie/axios#instance-methods}\n\t */\n\toptions(url, config) {\n\t\tthrow new Error('Not Implemented');\n\t},\n\n\t/**\n\t * post.\n\t * @param {String} url Url\n\t * @param {Object} data Data\n\t * @param {Object} config Config\n\t * @return {Promise} Promise\n\t * @see {@link https://github.com/mzabriskie/axios#instance-methods}\n\t */\n\tpost(url, data, config) {\n\t\treturn instance.post(url, data, config);\n\t},\n\n\t/**\n\t * put.\n\t * @param {String} url Url\n\t * @param {Object} data Data\n\t * @param {Object} config Config\n\t * @return {Promise} Promise\n\t * @see {@link https://github.com/mzabriskie/axios#instance-methods}\n\t */\n\tput(url, data, config) {\n\t\treturn instance.put(url, data, config);\n\t},\n\n\t/**\n\t * patch.\n\t * @param {String} url Url\n\t * @param {Object} data Data\n\t * @param {Object} config Config\n\t * @return {Promise} Promise\n\t * @see {@link https://github.com/mzabriskie/axios#instance-methods}\n\t */\n\tpatch(url, data, config) {\n\t\tthrow new Error('Not Implemented');\n\t}\n};\n\nexport default methods;\n\n/**\n * Set access token.\n *\n * @param {String} token access token\n */\nexport const setAccessToken = token => {\n\taccessToken = token;\n};\n\n/**\n * Set error handler for axios instance.\n *\n * @param {Function} handler handler fucntion\n */\nexport const setErrorHander = handler => {\n\terrorHandler = handler;\n};\n","<template>\n\t<div class=\"test\">\n\t\t<div>\n\t\t\t<p>Hello {{ username }}</p>\n\t\t</div>\n\n\t\t<el-form ref=\"form\" :model=\"form\" label-width=\"120px\" style=\"width: 30%; margin: auto;\">\n\t\t\t<el-form-item label=\"Username\">\n\t\t\t\t<el-input v-model=\"form.username\" />\n\t\t\t</el-form-item>\n\t\t\t<el-form-item label=\"Password\">\n\t\t\t\t<el-input v-model=\"form.password\" type=\"password\" autocomplete=\"off\" />\n\t\t\t</el-form-item>\n\t\t\t<el-form-item>\n\t\t\t\t<el-button type=\"primary\" @click=\"login()\">\n\t\t\t\t\tSign In\n\t\t\t\t</el-button>\n\t\t\t\t<el-button type=\"primary\" plain @click=\"apiCall()\">\n\t\t\t\t\tApi Call\n\t\t\t\t</el-button>\n\t\t\t\t<el-button type=\"primary\" plain @click=\"logout()\">\n\t\t\t\t\tLogout\n\t\t\t\t</el-button>\n\t\t\t</el-form-item>\n\t\t</el-form>\n\n\t\t\n\t\t<el-table\n\t\t\tv-if=\"weathers && weathers.length > 0\"\n\t\t\t:data=\"weathers\"\n\t\t\tborder\n\t\t\tstyle=\"width: 50%; margin: auto; margin-top: 20px;\"\n\t\t>\n\t\t\t<el-table-column\n\t\t\t\tprop=\"date\"\n\t\t\t\tlabel=\"Date\"\n\t\t\t\twidth=\"180\"\n\t\t\t/>\n\t\t\t<el-table-column\n\t\t\t\tprop=\"temperatureC\"\n\t\t\t\tlabel=\"Temperature C\"\n\t\t\t\twidth=\"180\"\n\t\t\t/>\n\t\t\t<el-table-column\n\t\t\t\tprop=\"temperatureF\"\n\t\t\t\tlabel=\"Temperature F\"\n\t\t\t/>\n\t\t\t<el-table-column\n\t\t\t\tprop=\"summary\"\n\t\t\t\tlabel=\"Summary\"\n\t\t\t/>\n\t\t</el-table>\n\t</div>\n</template>\n<script>\n// @ is an alias to /src\nimport http from '@/utils/axios';\nexport default {\n\tname: 'Test',\n\tdata() {\n\t\treturn {\n\t\t\tweathers: [],\n\t\t\tuser: null,\n\t\t\tmgr: null,\n\t\t\tusername: 'guest',\n\t\t\tform: {\n\t\t\t\tusername: '',\n\t\t\t\tpassword: ''\n\t\t\t},\n\t\t\taccess_token: null,\n\t\t};\n\t},\n\tasync created(){\n\t},\n\tmethods:{\n\t\tlogin() {\n\t\t\tlet that = this;\n\t  \t\thttp.post('http://localhost:5000/api/auth/login', {\n\t\t\t\tEmail: this.form.username,\n\t\t\t\tPassword: this.form.password\n\t\t\t})\n\t\t\t\t.then(function (response) {\n\t\t\t\t\tconsole.log(response);\n\t\t\t\t\tthat.username = response.data.email;\n\t\t\t\t\tthat.access_token = response.data.message;\n\t\t\t\t})\n\t\t\t\t.catch(function (error) {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t});\n\t\t},\n\t\tlogout() {\n\t\t\tthis.mgr.signoutRedirect();\n\t\t},\n\t\tapiCall(){\n\n\t\t\tconst config = {\n\t\t\t\theaders: { Authorization: `Bearer ${this.access_token}` }\n\t\t\t};\n\t\t\tlet url = 'http://localhost:5000/api/weatherforecast';\n\t\t\t//let url = 'https://edvision.ai/api/weatherforecast';\n\t\t\thttp.get( \n\t\t\t\turl,\n\t\t\t\tconfig\n\t\t\t).then(response => {\n\t\t\t\tif (response && response.data.length > 0){\n\t\t\t\t\tthis.weathers = response.data;\n\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}).catch(error => {\n\t\t\t\tthis.$notify.error({\n\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\tmessage: error\n\t\t\t\t});\n\t\t\t\t\t\n\t\t\t});\n\t\t}\n\t}\n};\n</script>\n<style>\n.text {\n  font-size: 14px;\n}\n\n.item {\n  margin-bottom: 18px;\n}\n\n.clearfix:before,\n.clearfix:after {\n  display: table;\n  content: \"\";\n}\n.clearfix:after {\n  clear: both;\n}\n\n.box-card {\n  width: 480px;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Test.vue?vue&type=template&id=283f7bfa&\"\nimport script from \"./Test.vue?vue&type=script&lang=js&\"\nexport * from \"./Test.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Test.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport Router from 'vue-router';\nimport Home from '../views/Home.vue';\nimport Document from '../views/Document.vue';\nimport Test from '../views/Test.vue';\n\nVue.use(Router);\n\nconst router = new Router({\n\tmode: 'history',\n\tbase: process.env.BASE_URL,\n\troutes: [\n\t\t{\n\t\t\tpath: '/',\n\t\t\tname: 'Home',\n\t\t\tcomponent: Home\n\t\t},\n\t\t{\n\t\t\tpath: '/about',\n\t\t\tname: 'About',\n\t\t\t// route level code-splitting\n\t\t\t// this generates a separate chunk (about.[hash].js) for this route\n\t\t\t// which is lazy-loaded when the route is visited.\n\t\t\tcomponent: () => import(/* webpackChunkName: \"about\" */ '../views/About.vue')\n\t\t},\n\t\t{\n\t\t\tpath: '/document',\n\t\t\tname: 'Document',\n\t\t\tcomponent: Document\n\t\t},\n\t\t{\n\t\t\tpath: '/test',\n\t\t\tname: 'Test',\n\t\t\tcomponent: Test\n\t\t}\n\t]\n});\n\nexport default router;\n","import Vue from 'vue';\nimport Vuex from 'vuex';\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n\tstate: {\n\t},\n\tmutations: {\n\t},\n\tactions: {\n\t},\n\tmodules: {\n\t}\n});\n","import Vue from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport Element from 'element-ui';\nimport locale from 'element-ui/lib/locale/lang/en';\nimport '@fortawesome/fontawesome-free/css/all.css';\nimport '@fortawesome/fontawesome-free/js/all.js';\n\nVue.use(Element, { locale });\nVue.config.productionTip = false;\n\nnew Vue({\n\trouter,\n\tstore,\n\trender: h => h(App)\n}).$mount('#app');\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelloWorld.vue?vue&type=style&index=0&id=712c49d7&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelloWorld.vue?vue&type=style&index=0&id=712c49d7&scoped=true&lang=css&\"","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"92c2\";","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test.vue?vue&type=style&index=0&lang=css&\"","module.exports = __webpack_public_path__ + \"img/logo.82b9c7a5.png\";"],"sourceRoot":""}